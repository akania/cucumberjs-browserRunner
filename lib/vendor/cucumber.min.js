/*
The MIT License

Copyright (c) 2011-2013 Julien Biezemans and contributors

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.Cucumber=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var Cucumber=function(featureSource,supportCodeInitializer,options){var configuration=Cucumber.VolatileConfiguration(featureSource,supportCodeInitializer,options);var runtime=Cucumber.Runtime(configuration);return runtime};Cucumber.Api=require("./cucumber/api");Cucumber.Ast=require("./cucumber/ast");Cucumber.Cli=require("./cucumber/cli");Cucumber.Debug=require("./cucumber/debug");Cucumber.Listener=require("./cucumber/listener");Cucumber.Parser=require("./cucumber/parser");Cucumber.Runtime=require("./cucumber/runtime");Cucumber.SupportCode=require("./cucumber/support_code");Cucumber.TagGroupParser=require("./cucumber/tag_group_parser");Cucumber.Type=require("./cucumber/type");Cucumber.Util=require("./cucumber/util");Cucumber.VolatileConfiguration=require("./cucumber/volatile_configuration");Cucumber.VERSION="0.4.4";module.exports=Cucumber},{"./cucumber/api":2,"./cucumber/ast":4,"./cucumber/cli":23,"./cucumber/debug":24,"./cucumber/listener":26,"./cucumber/parser":34,"./cucumber/runtime":35,"./cucumber/support_code":45,"./cucumber/tag_group_parser":53,"./cucumber/type":54,"./cucumber/util":58,"./cucumber/volatile_configuration":64}],2:[function(require,module,exports){var Api={};Api.Scenario=require("./api/scenario");module.exports=Api},{"./api/scenario":3}],3:[function(require,module,exports){(function(Buffer){var Scenario=function(astTreeWalker,astScenario){var self={getKeyword:function getKeyword(){return astScenario.getKeyword()},getName:function getName(){return astScenario.getName()},getDescription:function getDescription(){return astScenario.getDescription()},getUri:function getUri(){return astScenario.getUri()},getLine:function getLine(){return astScenario.getLine()},getTags:function getTags(){return astScenario.getTags()},isSuccessful:function isSuccessful(){return astTreeWalker.isScenarioSuccessful()},isFailed:function isFailed(){return astTreeWalker.isScenarioFailed()},isPending:function isPending(){return astTreeWalker.isScenarioPending()},isUndefined:function isUndefined(){return astTreeWalker.isScenarioUndefined()},getAttachments:function getAttachments(){return astTreeWalker.getAttachments()},attach:function attach(data,mimeType,callback){if(isStream(data)){if(!mimeType)throw Error(Scenario.ATTACH_MISSING_MIME_TYPE_ARGUMENT);if(!callback)throw Error(Scenario.ATTACH_MISSING_CALLBACK_ARGUMENT_FOR_STREAM_READABLE);var buffers=[];data.on("data",function(chunk){buffers.push(chunk)});data.on("end",function(){astTreeWalker.attach(Buffer.concat(buffers).toString(),mimeType);callback()})}else if(Buffer&&Buffer.isBuffer(data)){if(!mimeType)throw Error(Scenario.ATTACH_MISSING_MIME_TYPE_ARGUMENT);astTreeWalker.attach(data.toString(),mimeType);if(callback){callback()}}else{if(!mimeType){mimeType=Scenario.DEFAULT_TEXT_MIME_TYPE}astTreeWalker.attach(data.toString(),mimeType)}}};return self};function isStream(value){return value&&typeof value==="object"&&typeof value.pipe==="function"}Scenario.DEFAULT_TEXT_MIME_TYPE="text/plain";Scenario.ATTACH_MISSING_MIME_TYPE_ARGUMENT="Cucumber.Api.Scenario.attach() expects a mimeType";Scenario.ATTACH_MISSING_CALLBACK_ARGUMENT_FOR_STREAM_READABLE="Cucumber.Api.Scenario.attach() expects a callback when data is a stream.Readable";module.exports=Scenario}).call(this,require("buffer").Buffer)},{buffer:65}],4:[function(require,module,exports){var Ast={};Ast.Assembler=require("./ast/assembler");Ast.Background=require("./ast/background");Ast.DataTable=require("./ast/data_table");Ast.DocString=require("./ast/doc_string");Ast.Feature=require("./ast/feature");Ast.Features=require("./ast/features");Ast.Filter=require("./ast/filter");Ast.Scenario=require("./ast/scenario");Ast.ScenarioOutline=require("./ast/scenario_outline");Ast.OutlineStep=require("./ast/outline_step");Ast.Examples=require("./ast/examples");Ast.Step=require("./ast/step");Ast.HookStep=require("./ast/hook_step");Ast.Tag=require("./ast/tag");module.exports=Ast},{"./ast/assembler":5,"./ast/background":6,"./ast/data_table":7,"./ast/doc_string":9,"./ast/examples":10,"./ast/feature":11,"./ast/features":12,"./ast/filter":13,"./ast/hook_step":17,"./ast/outline_step":18,"./ast/scenario":19,"./ast/scenario_outline":20,"./ast/step":21,"./ast/tag":22}],5:[function(require,module,exports){var Assembler=function(features,filter){var currentFeature,currentFeatureElement,currentStep,suggestedFeature;var stashedTags=[];var self={setCurrentFeature:function setCurrentFeature(feature){currentFeature=feature;self.setCurrentFeatureElement(undefined)},getCurrentFeature:function getCurrentFeature(){return currentFeature},setCurrentFeatureElement:function setCurrentFeatureElement(featureElement){currentFeatureElement=featureElement;self.setCurrentStep(undefined)},getCurrentFeatureElement:function getCurrentFeatureElement(){return currentFeatureElement},setCurrentStep:function setCurrentStep(step){currentStep=step},getCurrentStep:function getCurrentStep(){return currentStep},stashTag:function stashTag(tag){stashedTags.push(tag)},revealTags:function revealTags(){var revealedTags=stashedTags;stashedTags=[];return revealedTags},applyCurrentFeatureTagsToElement:function applyCurrentFeatureTagsToElement(element){var currentFeature=self.getCurrentFeature();var featureTags=currentFeature.getTags();element.addInheritedTags(featureTags)},applyStashedTagsToElement:function applyStashedTagsToElement(element){var revealedTags=self.revealTags();element.addTags(revealedTags)},insertBackground:function insertBackground(background){self.setCurrentFeatureElement(background);var currentFeature=self.getCurrentFeature();currentFeature.setBackground(background)},insertDataTableRow:function insertDataTableRow(dataTableRow){var currentStep=self.getCurrentStep();currentStep.attachDataTableRow(dataTableRow)},insertDocString:function insertDocString(docString){var currentStep=self.getCurrentStep();currentStep.attachDocString(docString)},insertFeature:function insertFeature(feature){self.tryEnrollingSuggestedFeature();self.applyStashedTagsToElement(feature);self.setCurrentFeature(feature);self.suggestFeature(feature)},insertScenario:function insertScenario(scenario){self.applyCurrentFeatureTagsToElement(scenario);self.applyStashedTagsToElement(scenario);self.setCurrentFeatureElement(scenario);if(filter.isElementEnrolled(scenario)){var currentFeature=self.getCurrentFeature();currentFeature.addFeatureElement(scenario)}},insertExamples:function insertExamples(examples){var currentFeatureElement=self.getCurrentFeatureElement();if(!currentFeatureElement.isScenarioOutline())throw new Error("Examples are allowed inside scenario outlines only");currentFeatureElement.addExamples(examples);self.setCurrentStep(examples)},insertStep:function insertStep(step){self.setCurrentStep(step);var currentFeatureElement=self.getCurrentFeatureElement();currentFeatureElement.addStep(step)},insertTag:function insertTag(tag){self.stashTag(tag)},finish:function finish(){self.getCurrentFeature().convertScenarioOutlinesToScenarios();self.tryEnrollingSuggestedFeature()},suggestFeature:function suggestFeature(feature){suggestedFeature=feature},isSuggestedFeatureEnrollable:function isSuggestedFeatureEnrollable(){var enrollable=suggestedFeature&&(suggestedFeature.hasFeatureElements()||filter.isElementEnrolled(suggestedFeature));return enrollable},tryEnrollingSuggestedFeature:function tryEnrollingSuggestedFeature(){if(self.isSuggestedFeatureEnrollable())self.enrollSuggestedFeature()},enrollSuggestedFeature:function enrollSuggestedFeature(){features.addFeature(suggestedFeature);suggestedFeature=null}};return self};module.exports=Assembler},{}],6:[function(require,module,exports){var Background=function(keyword,name,description,uri,line){var Cucumber=require("../../cucumber");var steps=Cucumber.Type.Collection();var self={getKeyword:function getKeyword(){return keyword},getName:function getName(){return name},getDescription:function getDescription(){return description},getUri:function getUri(){return uri},getLine:function getLine(){return line},addStep:function addStep(step){var lastStep=self.getLastStep();step.setPreviousStep(lastStep);steps.add(step)},getLastStep:function getLastStep(){return steps.getLast()},getSteps:function getSteps(){return steps}};return self};module.exports=Background},{"../../cucumber":1}],7:[function(require,module,exports){var DataTable=function(){var Cucumber=require("../../cucumber");var rowsCollection=Cucumber.Type.Collection();var self={attachRow:function attachRow(row){rowsCollection.add(row)},getContents:function getContents(){return self},getRows:function getRows(){var newRows=Cucumber.Type.Collection();rowsCollection.syncForEach(function(row){newRows.add(row)});return newRows},rows:function rows(){rawRows=[];rowsCollection.syncForEach(function(row,index){if(index>0){rawRows.push(row.raw())}});return rawRows},raw:function raw(){rawRows=[];rowsCollection.syncForEach(function(row){rawRows.push(row.raw())});return rawRows},hashes:function hashes(){var raw=self.raw();var hashDataTable=Cucumber.Type.HashDataTable(raw);var rawHashDataTable=hashDataTable.raw();return rawHashDataTable}};return self};DataTable.Row=require("./data_table/row");module.exports=DataTable},{"../../cucumber":1,"./data_table/row":8}],8:[function(require,module,exports){var Row=function(cells,uri,line){var Cucumber=require("../../../cucumber");self={raw:function raw(){return cells},getLine:function getLine(){return line}};return self};module.exports=Row},{"../../../cucumber":1}],9:[function(require,module,exports){var DocString=function(contentType,contents,uri,line){var self={getContents:function getContents(){return contents},getContentType:function getContentType(){return contentType},getUri:function getUri(){return uri},getLine:function getLine(){return line}};return self};module.exports=DocString},{}],10:[function(require,module,exports){var Examples=function(keyword,name,description,line){var Cucumber=require("../../cucumber");var dataTable;var self={getKeyword:function getKeyword(){return keyword},getName:function getName(){return name},getDescription:function getDescription(){return description},getLine:function getLine(){return line},getDataTable:function getDataTable(){return dataTable},hasDataTable:function hasDataTable(){return!!dataTable},attachDataTable:function attachDataTable(_dataTable){dataTable=_dataTable},attachDataTableRow:function attachDataTableRow(row){self.ensureDataTableIsAttached();var dataTable=self.getDataTable();dataTable.attachRow(row)},ensureDataTableIsAttached:function ensureDataTableIsAttached(){var dataTable=self.getDataTable();if(!dataTable){dataTable=Cucumber.Ast.DataTable();self.attachDataTable(dataTable)}}};return self};module.exports=Examples},{"../../cucumber":1}],11:[function(require,module,exports){var Feature=function(keyword,name,description,uri,line){var Cucumber=require("../../cucumber");var background;var featureElements=Cucumber.Type.Collection();var tags=[];var self={getKeyword:function getKeyword(){return keyword},getName:function getName(){return name},getDescription:function getDescription(){return description},getUri:function getUri(){return uri},getLine:function getLine(){return line},setBackground:function setBackground(newBackground){background=newBackground},getBackground:function getBackground(){return background},hasBackground:function hasBackground(){return typeof background!="undefined"},addFeatureElement:function addFeatureElement(featureElement){var background=self.getBackground();featureElement.setBackground(background);featureElements.add(featureElement)},insertFeatureElement:function insertFeatureElement(index,featureElement){var background=self.getBackground();featureElement.setBackground(background);featureElements.insert(index,featureElement)},convertScenarioOutlinesToScenarios:function convertScenarioOutlinesToScenarios(){featureElements.syncForEach(function(featureElement){if(featureElement.isScenarioOutline()){self.convertScenarioOutlineToScenarios(featureElement)}})},convertScenarioOutlineToScenarios:function convertScenarioOutlineToScenarios(scenarioOutline){var scenarios=scenarioOutline.buildScenarios();var scenarioOutlineIndex=featureElements.indexOf(scenarioOutline);featureElements.removeAtIndex(scenarioOutlineIndex);var scenarioOutlineTags=scenarioOutline.getTags();scenarios.syncForEach(function(scenario,index){scenario.addTags(scenarioOutlineTags);self.insertFeatureElement(scenarioOutlineIndex+index,scenario)})},getLastFeatureElement:function getLastFeatureElement(){return featureElements.getLast()},hasFeatureElements:function hasFeatureElements(){return featureElements.length()>0},addTags:function setTags(newTags){tags=tags.concat(newTags)},getTags:function getTags(){return tags},acceptVisitor:function acceptVisitor(visitor,callback){self.instructVisitorToVisitBackground(visitor,function(){self.instructVisitorToVisitScenarios(visitor,callback)})},instructVisitorToVisitBackground:function instructVisitorToVisitBackground(visitor,callback){if(self.hasBackground()){var background=self.getBackground();visitor.visitBackground(background,callback)}else{callback()}},instructVisitorToVisitScenarios:function instructVisitorToVisitScenarios(visitor,callback){featureElements.forEach(function(scenario,iterate){visitor.visitScenario(scenario,iterate)},callback)}};return self};module.exports=Feature},{"../../cucumber":1}],12:[function(require,module,exports){var Features=function(){var Cucumber=require("../../cucumber");var features=Cucumber.Type.Collection();var self={addFeature:function addFeature(feature){features.add(feature)},getFeatures:function getFeatures(){return features},getLastFeature:function getLastFeature(){return features.getLast()},acceptVisitor:function acceptVisitor(visitor,callback){features.forEach(function(feature,iterate){visitor.visitFeature(feature,iterate)},callback)}};return self};module.exports=Features},{"../../cucumber":1}],13:[function(require,module,exports){var _=require("underscore");var Filter=function(rules){var self={isElementEnrolled:function isElementEnrolled(element){var enrolled=_.all(rules,function(rule){return rule.isSatisfiedByElement(element)});return enrolled}};return self};Filter.AnyOfTagsRule=require("./filter/any_of_tags_rule");Filter.ElementMatchingTagSpec=require("./filter/element_matching_tag_spec");Filter.ScenarioAtLineRule=require("./filter/only_run_scenario_at_line_rule");module.exports=Filter},{"./filter/any_of_tags_rule":14,"./filter/element_matching_tag_spec":15,"./filter/only_run_scenario_at_line_rule":16,underscore:112}],14:[function(require,module,exports){var _=require("underscore");var AnyOfTagsRule=function(tags){var Cucumber=require("../../../cucumber");var self={isSatisfiedByElement:function isSatisfiedByElement(element){var satisfied=_.any(tags,function(tag){var spec=Cucumber.Ast.Filter.ElementMatchingTagSpec(tag);return spec.isMatching(element)});return satisfied}};return self};module.exports=AnyOfTagsRule},{"../../../cucumber":1,underscore:112}],15:[function(require,module,exports){var _=require("underscore");var ElementMatchingTagSpec=function(tagName){var self={isMatching:function isMatching(element){var elementTags=element.getTags();var matching;if(self.isExpectingTag())matching=_.any(elementTags,self.isTagSatisfying);else matching=_.all(elementTags,self.isTagSatisfying);return matching},isTagSatisfying:function isTagSatisfying(tag){var checkedTagName=tag.getName();var satisfying;if(self.isExpectingTag())satisfying=checkedTagName==tagName;else{var negatedCheckedTagName=ElementMatchingTagSpec.NEGATION_CHARACTER+checkedTagName;satisfying=negatedCheckedTagName!=tagName}return satisfying},isExpectingTag:function isExpectingTag(){var expectingTag=tagName[0]!=ElementMatchingTagSpec.NEGATION_CHARACTER;return expectingTag}};return self};ElementMatchingTagSpec.NEGATION_CHARACTER="~";module.exports=ElementMatchingTagSpec},{underscore:112}],16:[function(require,module,exports){var ScenarioAtLineRule=function(tags){var Cucumber=require("../../../cucumber");var self={isSatisfiedByElement:function isSatisfiedByElement(element){if(element.getUri&&element.getLine){var matches=Cucumber.Cli.ArgumentParser.FEATURE_FILENAME_AND_LINENUM_REGEXP.exec(element.getUri());var specifiedLineNum=matches&&matches[2];if(specifiedLineNum){return parseInt(specifiedLineNum)===element.getLine()}return true}return true}};return self};module.exports=ScenarioAtLineRule},{"../../../cucumber":1}],17:[function(require,module,exports){var HookStep=function(keyword){var Cucumber=require("../../cucumber");var self=Cucumber.Ast.Step(keyword,HookStep.NAME,HookStep.UNDEFINED_URI,HookStep.UNDEFINED_LINE);var hook;self.isHidden=function isHidden(){return true};self.hasUri=function hasUri(){return false};self.setHook=function setHook(newHook){hook=newHook};self.getStepDefinition=function getStepDefinition(visitor){return hook};return self};HookStep.NAME=undefined;HookStep.UNDEFINED_URI=undefined;HookStep.UNDEFINED_LINE=undefined;module.exports=HookStep},{"../../cucumber":1}],18:[function(require,module,exports){var OutlineStep=function(keyword,name,uri,line){var Cucumber=require("../../cucumber");var self=Cucumber.Ast.Step(keyword,name,uri,line);self.setOriginalStep=function setOriginalStep(originalStep){self.originalStep=originalStep};self.getOriginalStep=function getOriginalStep(originalStep){return self.originalStep};self.isOutlineStep=function isOutlineStep(){return true};return self};module.exports=OutlineStep},{"../../cucumber":1}],19:[function(require,module,exports){var Scenario=function(keyword,name,description,uri,line){var Cucumber=require("../../cucumber");var background;var steps=Cucumber.Type.Collection();var inheritedTags=[];var tags=[];var self={isScenarioOutline:function isScenarioOutline(){return false},setBackground:function setBackground(newBackground){background=newBackground},getKeyword:function getKeyword(){return keyword},getName:function getName(){return name},getDescription:function getDescription(){return description},getUri:function getUri(){return uri},getLine:function getLine(){return line},getBackground:function getBackground(){return background},addStep:function addStep(step){var lastStep=self.getLastStep();step.setPreviousStep(lastStep);steps.add(step)},getLastStep:function getLastStep(){return steps.getLast()},setSteps:function setSteps(newSteps){steps=newSteps},getSteps:function getSteps(){return steps},addTags:function addTags(newTags){tags=tags.concat(newTags)},addInheritedTags:function addInheritedTags(newTags){inheritedTags=tags.concat(newTags)},getTags:function getTags(){return tags.concat(inheritedTags)},getOwnTags:function getOwnTags(){return tags},acceptVisitor:function acceptVisitor(visitor,callback){self.instructVisitorToVisitBackgroundSteps(visitor,function(){self.instructVisitorToVisitScenarioSteps(visitor,callback)})},instructVisitorToVisitBackgroundSteps:function instructVisitorToVisitBackgroundSteps(visitor,callback){var background=self.getBackground();if(typeof background!="undefined"){var steps=background.getSteps();self.instructVisitorToVisitSteps(visitor,steps,callback)}else{callback()}},instructVisitorToVisitScenarioSteps:function instructVisitorToVisitScenarioSteps(visitor,callback){self.instructVisitorToVisitSteps(visitor,steps,callback)},instructVisitorToVisitSteps:function instructVisitorToVisitSteps(visitor,steps,callback){steps.forEach(function(step,iterate){visitor.visitStep(step,iterate)},callback)}};return self};module.exports=Scenario},{"../../cucumber":1}],20:[function(require,module,exports){var ScenarioOutline=function(keyword,name,description,uri,line){var Cucumber=require("../../cucumber");var self=Cucumber.Ast.Scenario(keyword,name,description,uri,line);var examplesCollection=Cucumber.Type.Collection();self.isScenarioOutline=function(){return true};self.addExamples=function(examples){examplesCollection.add(examples)};function buildScenario(example){var newSteps=self.applyExampleRow(example,self.getSteps());var subScenario=Cucumber.Ast.Scenario(keyword,name,description,uri,line);subScenario.setSteps(newSteps);return subScenario}self.buildScenarios=function(){var scenarios=Cucumber.Type.Collection();examplesCollection.syncForEach(function(examples){var exampleHashes=examples.getDataTable().hashes();exampleHashes.forEach(function(exampleHash){scenarios.add(buildScenario(exampleHash))})});return scenarios};self.getExamples=function(){return examplesCollection};self.applyExampleRow=function(example,steps){return steps.syncMap(function(step){var name=step.getName();var table=Cucumber.Ast.DataTable();var rows=[];var hasDocString=step.hasDocString();var hasDataTable=step.hasDataTable();var oldDocString=hasDocString?step.getDocString():null;var docString=hasDocString?oldDocString.getContents():null;if(hasDataTable){step.getDataTable().getRows().syncForEach(function(row){var newRow={line:row.getLine(),cells:JSON.stringify(row.raw())};rows.push(newRow)})}for(var hashKey in example){if(Object.prototype.hasOwnProperty.call(example,hashKey)){var findText="<"+hashKey+">";var exampleData=example[hashKey];name=name.replace(findText,exampleData);if(hasDataTable){rows=rows.map(function(row){return{line:row.line,cells:row.cells.replace(findText,exampleData)}})}if(hasDocString){docString=docString.replace(findText,exampleData)}}}var newStep=Cucumber.Ast.OutlineStep(step.getKeyword(),name,uri,step.getLine());newStep.setOriginalStep(Cucumber.Ast.Step(step.getKeyword(),step.getName(),step.getUri(),step.getLine()));if(hasDataTable){rows.forEach(function(row){table.attachRow(Cucumber.Ast.DataTable.Row(JSON.parse(row.cells),row.line))});newStep.attachDataTable(table)}if(hasDocString){newStep.attachDocString(Cucumber.Ast.DocString(oldDocString.getContentType(),docString,oldDocString.getLine()))}return newStep})};self.acceptVisitor=function(visitor,callback){callback()};return self};module.exports=ScenarioOutline},{"../../cucumber":1}],21:[function(require,module,exports){var Step=function(keyword,name,uri,line){var Cucumber=require("../../cucumber");var docString,dataTable,previousStep;var self={setPreviousStep:function setPreviousStep(newPreviousStep){previousStep=newPreviousStep},isHidden:function isHidden(){return false},isOutlineStep:function isOutlineStep(){return false},getKeyword:function getKeyword(){return keyword},getName:function getName(){return name},hasUri:function hasUri(){return true},getUri:function getUri(){return uri},getLine:function getLine(){return line},getPreviousStep:function getPreviousStep(){return previousStep},hasPreviousStep:function hasPreviousStep(){return!!previousStep},getAttachment:function getAttachment(){var attachment;if(self.hasDocString()){attachment=self.getDocString()}else if(self.hasDataTable()){attachment=self.getDataTable()}return attachment},getAttachmentContents:function getAttachmentContents(){var attachment=self.getAttachment();var attachmentContents;if(attachment)attachmentContents=attachment.getContents();return attachmentContents},getDocString:function getDocString(){return docString},getDataTable:function getDataTable(){return dataTable},hasAttachment:function hasAttachment(){return self.hasDocString()||self.hasDataTable()},hasDocString:function hasDocString(){return!!docString},hasDataTable:function hasDataTable(){return!!dataTable},attachDocString:function attachDocString(_docString){docString=_docString},attachDataTable:function attachDataTable(_dataTable){dataTable=_dataTable},attachDataTableRow:function attachDataTableRow(row){self.ensureDataTableIsAttached();var dataTable=self.getDataTable();dataTable.attachRow(row)},ensureDataTableIsAttached:function ensureDataTableIsAttached(){var dataTable=self.getDataTable();if(!dataTable){dataTable=Cucumber.Ast.DataTable();self.attachDataTable(dataTable)}},isOutcomeStep:function isOutcomeStep(){var isOutcomeStep=self.hasOutcomeStepKeyword()||self.isRepeatingOutcomeStep();return isOutcomeStep},isEventStep:function isEventStep(){var isEventStep=self.hasEventStepKeyword()||self.isRepeatingEventStep();return isEventStep},hasOutcomeStepKeyword:function hasOutcomeStepKeyword(){var hasOutcomeStepKeyword=keyword==Step.OUTCOME_STEP_KEYWORD;return hasOutcomeStepKeyword},hasEventStepKeyword:function hasEventStepKeyword(){var hasEventStepKeyword=keyword==Step.EVENT_STEP_KEYWORD;return hasEventStepKeyword},isRepeatingOutcomeStep:function isRepeatingOutcomeStep(){var isRepeatingOutcomeStep=self.hasRepeatStepKeyword()&&self.isPrecededByOutcomeStep();return isRepeatingOutcomeStep},isRepeatingEventStep:function isRepeatingEventStep(){var isRepeatingEventStep=self.hasRepeatStepKeyword()&&self.isPrecededByEventStep();return isRepeatingEventStep},hasRepeatStepKeyword:function hasRepeatStepKeyword(){var hasRepeatStepKeyword=keyword==Step.AND_STEP_KEYWORD||keyword==Step.BUT_STEP_KEYWORD||keyword==Step.STAR_STEP_KEYWORD;return hasRepeatStepKeyword},isPrecededByOutcomeStep:function isPrecededByOutcomeStep(){var isPrecededByOutcomeStep=false;if(self.hasPreviousStep()){var previousStep=self.getPreviousStep();var isPrecededByOutcomeStep=previousStep.isOutcomeStep()}return isPrecededByOutcomeStep},isPrecededByEventStep:function isPrecededByEventStep(){var isPrecededByEventStep=false;if(self.hasPreviousStep()){var previousStep=self.getPreviousStep();var isPrecededByEventStep=previousStep.isEventStep()}return isPrecededByEventStep},acceptVisitor:function acceptVisitor(visitor,callback){self.execute(visitor,function(stepResult){visitor.visitStepResult(stepResult,callback)})},getStepDefinition:function getStepDefinition(visitor){return visitor.lookupStepDefinitionByName(name)},execute:function execute(visitor,callback){var stepDefinition=self.getStepDefinition(visitor);var world=visitor.getWorld();var scenario=visitor.getScenario();stepDefinition.invoke(self,world,scenario,callback)}};return self};Step.EVENT_STEP_KEYWORD="When ";Step.OUTCOME_STEP_KEYWORD="Then ";Step.AND_STEP_KEYWORD="And ";Step.BUT_STEP_KEYWORD="But ";Step.STAR_STEP_KEYWORD="* ";module.exports=Step},{"../../cucumber":1}],22:[function(require,module,exports){var Tag=function(name,uri,line){var Cucumber=require("../../cucumber");var self={getName:function getName(){return name},getUri:function getUri(){return uri},getLine:function getLine(){return line}};return self};module.exports=Tag},{"../../cucumber":1}],23:[function(require,module,exports){},{}],24:[function(require,module,exports){(function(process){var Debug={TODO:function TODO(description){return function(){throw new Error("IMPLEMENT ME: "+description)}},warn:function warn(string,caption,level){if(Debug.isMessageLeveltoBeDisplayed(level))process.stdout.write(Debug.warningString(string,caption))},notice:function notice(string,caption,level){if(Debug.isMessageLeveltoBeDisplayed(level))process.stdout.write(Debug.noticeString(string,caption))},warningString:function warningString(string,caption){caption=caption||"debug-warning";return"[30;43m"+caption+":[0m [33m"+string+"[0m"},noticeString:function noticeString(string,caption){caption=caption||"debug-notice";return"[30;46m"+caption+":[0m [36m"+string+"[0m"},prefix:function prefix(){return},isMessageLeveltoBeDisplayed:function isMessageLeveltoBeDisplayed(level){if(process.env){level=level||3;return level<=process.env["DEBUG_LEVEL"]}else{return false}}};Debug.SimpleAstListener=require("./debug/simple_ast_listener");module.exports=Debug}).call(this,require("_process"))},{"./debug/simple_ast_listener":25,_process:76}],25:[function(require,module,exports){var SimpleAstListener=function(options){var logs="";var failed=false;var beforeEachScenarioCallbacks=[];var currentStep;if(!options)var options={};var self={hear:function hear(event,callback){switch(event.getName()){case"BeforeFeature":self.hearBeforeFeature(event.getPayloadItem("feature"),callback);break;case"BeforeScenario":self.hearBeforeScenario(event.getPayloadItem("scenario"),callback);break;case"BeforeStep":self.hearBeforeStep(event.getPayloadItem("step"),callback);break;case"StepResult":self.hearStepResult(event.getPayloadItem("stepResult"),callback);break;default:callback()}},hearBeforeFeature:function hearBeforeFeature(feature,callback){log("Feature: "+feature.getName());var description=feature.getDescription();if(description!="")log(description,1);callback()},hearBeforeScenario:function hearBeforeScenario(scenario,callback){beforeEachScenarioCallbacks.forEach(function(func){func()});log("");log(scenario.getKeyword()+": "+scenario.getName(),1);callback()},hearBeforeStep:function hearBeforeStep(step,callback){currentStep=step;callback()},hearStepResult:function hearStepResult(stepResult,callback){log(currentStep.getKeyword()+(currentStep.getName()||""),2);if(currentStep.hasDocString()){log('"""',3);log(currentStep.getDocString().getContents(),3);log('"""',3)}callback()},getLogs:function getLogs(){return logs},featuresPassed:function featuresPassed(){return!failed},beforeEachScenarioDo:function beforeEachScenarioDo(func){beforeEachScenarioCallbacks.push(func)}};return self;function log(message,indentation){if(indentation)message=indent(message,indentation);logs=logs+message+"\n";if(options["logToConsole"])console.log(message);if(typeof options["logToFunction"]=="function")options["logToFunction"](message)}function indent(text,indentation){var indented;text.split("\n").forEach(function(line){var prefix=new Array(indentation+1).join("  ");line=prefix+line;indented=typeof indented=="undefined"?line:indented+"\n"+line});return indented}};module.exports=SimpleAstListener},{}],26:[function(require,module,exports){var Listener=function(){var self={hear:function hear(event,callback){if(self.hasHandlerForEvent(event)){var handler=self.getHandlerForEvent(event);handler(event,callback)}else{callback()}},hasHandlerForEvent:function hasHandlerForEvent(event){var handlerName=self.buildHandlerNameForEvent(event);return self[handlerName]!=undefined},buildHandlerNameForEvent:function buildHandlerNameForEvent(event){return self.buildHandlerName(event.getName())},getHandlerForEvent:function getHandlerForEvent(event){var eventHandlerName=self.buildHandlerNameForEvent(event);return self[eventHandlerName]},buildHandlerName:function buildHandler(shortName){return Listener.EVENT_HANDLER_NAME_PREFIX+shortName+Listener.EVENT_HANDLER_NAME_SUFFIX},setHandlerForEvent:function setHandlerForEvent(shortname,handler){var eventName=self.buildHandlerName(shortname);self[eventName]=handler}};return self};Listener.EVENT_HANDLER_NAME_PREFIX="handle";Listener.EVENT_HANDLER_NAME_SUFFIX="Event";Listener.Events=require("./listener/events");Listener.Formatter=require("./listener/formatter");Listener.PrettyFormatter=require("./listener/pretty_formatter");Listener.ProgressFormatter=require("./listener/progress_formatter");Listener.JsonFormatter=require("./listener/json_formatter");Listener.StatsJournal=require("./listener/stats_journal");Listener.SummaryFormatter=require("./listener/summary_formatter");module.exports=Listener},{"./listener/events":27,"./listener/formatter":28,"./listener/json_formatter":29,"./listener/pretty_formatter":30,"./listener/progress_formatter":31,"./listener/stats_journal":32,"./listener/summary_formatter":33}],27:[function(require,module,exports){exports["BeforeFeatures"]="BeforeFeatures";
exports["BeforeFeature"]="BeforeFeature";exports["Background"]="Background";exports["BeforeScenario"]="BeforeScenario";exports["BeforeStep"]="BeforeStep";exports["StepResult"]="StepResult";exports["AfterStep"]="AfterStep";exports["AfterScenario"]="AfterScenario";exports["AfterFeature"]="AfterFeature";exports["AfterFeatures"]="AfterFeatures"},{}],28:[function(require,module,exports){(function(process){var Formatter=function(options){var Cucumber=require("../../cucumber");if(!options)options={};if(options["logToConsole"]==undefined)options["logToConsole"]=true;var logs="";var self=Cucumber.Listener();self.log=function log(string){logs+=string;if(options["logToConsole"])process.stdout.write(string);if(typeof options["logToFunction"]=="function")options["logToFunction"](string)};self.getLogs=function getLogs(){return logs};return self};module.exports=Formatter}).call(this,require("_process"))},{"../../cucumber":1,_process:76}],29:[function(require,module,exports){var JsonFormatter=function(options){var Cucumber=require("../../cucumber");var GherkinJsonFormatter=require("gherkin/lib/gherkin/formatter/json_formatter");var currentFeatureId="undefined";var self=Cucumber.Listener.Formatter(options);var formatterIo={write:function(string){self.log(string)}};var gherkinJsonFormatter=new GherkinJsonFormatter(formatterIo);var parentFeatureTags;self.getGherkinFormatter=function getGherkinFormatter(){return gherkinJsonFormatter};self.formatStep=function formatStep(step){var stepProperties={name:step.getName(),line:step.getLine(),keyword:step.getKeyword()};if(step.isHidden()){stepProperties["hidden"]=true}if(step.hasDocString()){var docString=step.getDocString();stepProperties["doc_string"]={value:docString.getContents(),line:docString.getLine(),content_type:docString.getContentType()}}if(step.hasDataTable()){var tableContents=step.getDataTable().getContents();var raw=tableContents.raw();var tableProperties=[];raw.forEach(function(rawRow){var row={line:undefined,cells:rawRow};tableProperties.push(row)});stepProperties["rows"]=tableProperties}gherkinJsonFormatter.step(stepProperties)};self.formatTags=function formatTags(tags,parentTags){var tagsProperties=[];tags.forEach(function(tag){var isParentTag=false;if(parentTags){parentTags.forEach(function(parentTag){if(tag.getName()==parentTag.getName()&&tag.getLine()==parentTag.getLine()){isParentTag=true}})}if(!isParentTag){tagsProperties.push({name:tag.getName(),line:tag.getLine()})}});return tagsProperties};self.handleBeforeFeatureEvent=function handleBeforeFeatureEvent(event,callback){var feature=event.getPayloadItem("feature");currentFeatureId=feature.getName().replace(/ /g,"-");var featureProperties={id:currentFeatureId,name:feature.getName(),description:feature.getDescription(),line:feature.getLine(),keyword:feature.getKeyword()};var tags=feature.getTags();if(tags.length>0){formattedTags=self.formatTags(tags,[]);featureProperties["tags"]=formattedTags}gherkinJsonFormatter.uri(feature.getUri());gherkinJsonFormatter.feature(featureProperties);parentFeatureTags=tags;callback()};self.handleBackgroundEvent=function handleBackgroundEvent(event,callback){var background=event.getPayloadItem("background");gherkinJsonFormatter.background({name:background.getName(),keyword:"Background",description:background.getDescription(),type:"background",line:background.getLine()});var steps=background.getSteps();steps.forEach(function(value,index,ar){self.formatStep(value)});callback()};self.handleBeforeScenarioEvent=function handleBeforeScenarioEvent(event,callback){var scenario=event.getPayloadItem("scenario");var id=currentFeatureId+";"+scenario.getName().replace(/ /g,"-").toLowerCase();var scenarioProperties={name:scenario.getName(),id:id,line:scenario.getLine(),keyword:"Scenario",description:scenario.getDescription(),type:"scenario"};var tags=scenario.getTags();if(tags.length>0){var formattedTags=self.formatTags(tags,parentFeatureTags);if(formattedTags.length>0){scenarioProperties["tags"]=formattedTags}}gherkinJsonFormatter.scenario(scenarioProperties);callback()};self.handleStepResultEvent=function handleStepResultEvent(event,callback){var stepResult=event.getPayloadItem("stepResult");var step=stepResult.getStep();self.formatStep(step);var stepOutput={};var resultStatus;var attachments;if(stepResult.isSuccessful()){resultStatus="passed";if(stepResult.hasAttachments()){attachments=stepResult.getAttachments()}stepOutput["duration"]=stepResult.getDuration()}else if(stepResult.isPending()){resultStatus="pending";stepOutput["error_message"]=undefined}else if(stepResult.isSkipped()){resultStatus="skipped"}else if(stepResult.isUndefined()){resultStatus="undefined"}else{resultStatus="failed";var failureMessage=stepResult.getFailureException();if(failureMessage){stepOutput["error_message"]=failureMessage.stack||failureMessage}if(stepResult.hasAttachments()){attachments=stepResult.getAttachments()}stepOutput["duration"]=stepResult.getDuration()}stepOutput["status"]=resultStatus;gherkinJsonFormatter.result(stepOutput);gherkinJsonFormatter.match({location:undefined});if(attachments){attachments.syncForEach(function(attachment){gherkinJsonFormatter.embedding(attachment.getMimeType(),attachment.getData())})}callback()};self.handleAfterFeaturesEvent=function handleAfterFeaturesEvent(event,callback){gherkinJsonFormatter.eof();gherkinJsonFormatter.done();callback()};return self};module.exports=JsonFormatter},{"../../cucumber":1,"gherkin/lib/gherkin/formatter/json_formatter":109}],30:[function(require,module,exports){(function(process){var PrettyFormatter=function(options){var Cucumber=require("../../cucumber");var color=Cucumber.Util.ConsoleColor;var self=Cucumber.Listener.Formatter(options);var summaryFormatter=Cucumber.Listener.SummaryFormatter({coffeeScriptSnippets:options.coffeeScriptSnippets,logToConsole:false});var currentMaxStepLength=0;var parentHear=self.hear;self.hear=function hear(event,callback){summaryFormatter.hear(event,function(){parentHear(event,callback)})};self.handleBeforeFeatureEvent=function handleBeforeFeatureEvent(event,callback){var feature=event.getPayloadItem("feature");var tags=feature.getTags();var tagNames=[];for(var idx=0;idx<tags.length;idx++){tagNames.push(tags[idx].getName())}var source=color.format("tag",tagNames.join(" "))+"\n"+feature.getKeyword()+": "+feature.getName()+"\n";self.log(source);self.logIndented(feature.getDescription()+"\n\n",1);callback()};self.handleBeforeScenarioEvent=function handleBeforeScenarioEvent(event,callback){var scenario=event.getPayloadItem("scenario");var tags=scenario.getOwnTags();var tagNames=[];for(var idx=0;idx<tags.length;idx++){tagNames.push(tags[idx].getName())}var tagSource=color.format("tag",tagNames.join(" "))+"\n";var source=scenario.getKeyword()+": "+scenario.getName();var lineLengths=[source.length,self.determineMaxStepLengthForElement(scenario)];if(scenario.getBackground()!==undefined){lineLengths.push(self.determineMaxStepLengthForElement(scenario.getBackground()))}lineLengths.sort(function(a,b){return b-a});currentMaxStepLength=lineLengths[0];source=tagSource+self._pad(source,currentMaxStepLength+3);var uri=color.format("comment","# "+scenario.getUri().replace(process.cwd(),"").slice(1)+":"+scenario.getLine());source+=uri+"\n";self.logIndented(source,1);callback()};self.handleAfterScenarioEvent=function handleAfterScenarioEvent(event,callback){self.log("\n");callback()};self.applyColor=function(stepResult,source){if(stepResult.isFailed())source=color.format("failed",source);else if(stepResult.isPending())source=color.format("pending",source);else if(stepResult.isSkipped())source=color.format("skipped",source);else if(stepResult.isSuccessful())source=color.format("passed",source);else if(stepResult.isUndefined())source=color.format("undefined",source);return source};self.resetColorFormat=function(){color.resetFormat()};self.handleStepResultEvent=function handleStepResultEvent(event,callback){var stepResult=event.getPayloadItem("stepResult");var step=stepResult.getStep();if(!step.isHidden()||stepResult.isFailed()){self.logStepResult(step,stepResult)}callback()};self.logStepResult=function logStepResult(step,stepResult){var source=self.applyColor(stepResult,step.getKeyword()+(step.getName()||""));source=self._pad(source,self._getCurrentMaxStepLength()+10);if(step.hasUri()){source+=color.format("comment","# "+step.getUri().replace(process.cwd(),"").slice(1)+":"+step.getLine())}source+="\n";self.logIndented(source,2);if(step.hasDataTable()){var dataTable=step.getDataTable();self.logDataTable(stepResult,dataTable)}if(step.hasDocString()){var docString=step.getDocString();self.logDocString(stepResult,docString)}if(stepResult.isFailed()){var failure=stepResult.getFailureException();var failureDescription=failure.stack||failure;self.logIndented(failureDescription+"\n",3)}};self.handleAfterFeaturesEvent=function handleAfterFeaturesEvent(event,callback){var summaryLogs=summaryFormatter.getLogs();self.log("\n");self.log(summaryLogs);callback()};self.logDataTable=function logDataTable(stepResult,dataTable){var rows=dataTable.raw();var columnWidths=self._determineColumnWidthsFromRows(rows);var rowCount=rows.length;var columnCount=columnWidths.length;for(var rowIndex=0;rowIndex<rowCount;rowIndex++){var cells=rows[rowIndex];var line="|";for(var columnIndex=0;columnIndex<columnCount;columnIndex++){var cell=cells[columnIndex];var columnWidth=columnWidths[columnIndex];line+=" "+self.applyColor(stepResult,self._pad(cell,columnWidth))+" |"}line+="\n";self.logIndented(line,3)}};self.logDocString=function logDocString(stepResult,docString){var contents='"""\n'+docString.getContents()+'\n"""\n';contents=self.applyColor(stepResult,contents);self.logIndented(contents,3)};self.logIndented=function logIndented(text,level){var indented=self.indent(text,level);self.log(indented)};self.indent=function indent(text,level){var indented;text.split("\n").forEach(function(line){var prefix=new Array(level+1).join("  ");line=(prefix+line).replace(/\s+$/,"");indented=typeof indented=="undefined"?line:indented+"\n"+line});return indented};self.determineMaxStepLengthForElement=function determineMaxStepLengthForElement(element){var max=0;element.getSteps().syncForEach(function(step){var stepLength=step.getKeyword().length+step.getName().length;if(stepLength>max)max=stepLength});return max};self._determineColumnWidthsFromRows=function _determineColumnWidthsFromRows(rows){var columnWidths=[];var currentColumn;rows.forEach(function(cells){currentColumn=0;cells.forEach(function(cell){var currentColumnWidth=columnWidths[currentColumn];var currentCellWidth=cell.length;if(typeof currentColumnWidth=="undefined"||currentColumnWidth<currentCellWidth)columnWidths[currentColumn]=currentCellWidth;currentColumn+=1})});return columnWidths};self._getCurrentMaxStepLength=function _getCurrentMaxStepLength(){return currentMaxStepLength};self._pad=function _pad(text,width){var padded=""+text;while(padded.length<width){padded+=" "}return padded};return self};module.exports=PrettyFormatter}).call(this,require("_process"))},{"../../cucumber":1,_process:76}],31:[function(require,module,exports){var ConsoleColor=require("../util/colors");var ProgressFormatter=function(options){var Cucumber=require("../../cucumber");if(!options)options={};var self=Cucumber.Listener.Formatter(options);var summaryFormatter=Cucumber.Listener.SummaryFormatter({coffeeScriptSnippets:options.coffeeScriptSnippets,logToConsole:false});var parentHear=self.hear;self.hear=function hear(event,callback){summaryFormatter.hear(event,function(){parentHear(event,callback)})};self.handleStepResultEvent=function handleStepResult(event,callback){var stepResult=event.getPayloadItem("stepResult");if(stepResult.isSuccessful())self.handleSuccessfulStepResult();else if(stepResult.isPending())self.handlePendingStepResult();else if(stepResult.isSkipped())self.handleSkippedStepResult();else if(stepResult.isUndefined())self.handleUndefinedStepResult();else self.handleFailedStepResult();callback()};self.handleSuccessfulStepResult=function handleSuccessfulStepResult(){self.log(ProgressFormatter.PASSED_STEP_CHARACTER)};self.handlePendingStepResult=function handlePendingStepResult(){self.log(ProgressFormatter.PENDING_STEP_CHARACTER)};self.handleSkippedStepResult=function handleSkippedStepResult(){self.log(ProgressFormatter.SKIPPED_STEP_CHARACTER)};self.handleUndefinedStepResult=function handleUndefinedStepResult(){self.log(ProgressFormatter.UNDEFINED_STEP_CHARACTER)};self.handleFailedStepResult=function handleFailedStepResult(){self.log(ProgressFormatter.FAILED_STEP_CHARACTER)};self.handleAfterFeaturesEvent=function handleAfterFeaturesEvent(event,callback){var summaryLogs=summaryFormatter.getLogs();self.log("\n\n");self.log(summaryLogs);callback()};return self};ProgressFormatter.PASSED_STEP_CHARACTER=ConsoleColor.format("passed",".");ProgressFormatter.SKIPPED_STEP_CHARACTER=ConsoleColor.format("skipped","-");ProgressFormatter.UNDEFINED_STEP_CHARACTER=ConsoleColor.format("undefined","U");ProgressFormatter.PENDING_STEP_CHARACTER=ConsoleColor.format("pending","P");ProgressFormatter.FAILED_STEP_CHARACTER=ConsoleColor.format("failed","F");module.exports=ProgressFormatter},{"../../cucumber":1,"../util/colors":60}],32:[function(require,module,exports){var StatsJournal=function(options){var Cucumber=require("../../cucumber");var passedScenarioCount=0;var undefinedScenarioCount=0;var pendingScenarioCount=0;var failedScenarioCount=0;var passedStepCount=0;var failedStepCount=0;var skippedStepCount=0;var undefinedStepCount=0;var pendingStepCount=0;var currentScenarioFailing=false;var currentScenarioUndefined=false;var currentScenarioPending=false;if(!options)options={};var self=Cucumber.Listener();self.handleBeforeScenarioEvent=function handleBeforeScenarioEvent(event,callback){self.prepareBeforeScenario();callback()};self.handleStepResultEvent=function handleStepResult(event,callback){var stepResult=event.getPayloadItem("stepResult");var step=stepResult.getStep();if(stepResult.isSuccessful())self.handleSuccessfulStepResult(step);else if(stepResult.isPending())self.handlePendingStepResult();else if(stepResult.isSkipped())self.handleSkippedStepResult();else if(stepResult.isUndefined())self.handleUndefinedStepResult();else self.handleFailedStepResult();callback()};self.handleSuccessfulStepResult=function handleSuccessfulStepResult(step){if(!step.isHidden())self.witnessPassedStep()};self.handlePendingStepResult=function handlePendingStepResult(){self.witnessPendingStep();self.markCurrentScenarioAsPending()};self.handleSkippedStepResult=function handleSkippedStepResult(){self.witnessSkippedStep()};self.handleUndefinedStepResult=function handleUndefinedStepResult(){self.witnessUndefinedStep();self.markCurrentScenarioAsUndefined()};self.handleFailedStepResult=function handleFailedStepResult(){self.witnessFailedStep();self.markCurrentScenarioAsFailing()};self.handleAfterScenarioEvent=function handleAfterScenarioEvent(event,callback){if(self.isCurrentScenarioFailing()){var scenario=event.getPayloadItem("scenario");self.witnessFailedScenario()}else if(self.isCurrentScenarioUndefined()){self.witnessUndefinedScenario()}else if(self.isCurrentScenarioPending()){self.witnessPendingScenario()}else{self.witnessPassedScenario()}callback()};self.prepareBeforeScenario=function prepareBeforeScenario(){currentScenarioFailing=false;currentScenarioPending=false;currentScenarioUndefined=false};self.markCurrentScenarioAsFailing=function markCurrentScenarioAsFailing(){currentScenarioFailing=true};self.markCurrentScenarioAsUndefined=function markCurrentScenarioAsUndefined(){currentScenarioUndefined=true};self.markCurrentScenarioAsPending=function markCurrentScenarioAsPending(){currentScenarioPending=true};self.isCurrentScenarioFailing=function isCurrentScenarioFailing(){return currentScenarioFailing};self.isCurrentScenarioUndefined=function isCurrentScenarioUndefined(){return currentScenarioUndefined};self.isCurrentScenarioPending=function isCurrentScenarioPending(){return currentScenarioPending};self.witnessPassedScenario=function witnessPassedScenario(){passedScenarioCount++};self.witnessUndefinedScenario=function witnessUndefinedScenario(){undefinedScenarioCount++};self.witnessPendingScenario=function witnessPendingScenario(){pendingScenarioCount++};self.witnessFailedScenario=function witnessFailedScenario(){failedScenarioCount++};self.witnessPassedStep=function witnessPassedStep(){passedStepCount++};self.witnessUndefinedStep=function witnessUndefinedStep(){undefinedStepCount++};self.witnessPendingStep=function witnessPendingStep(){pendingStepCount++};self.witnessFailedStep=function witnessFailedStep(){failedStepCount++};self.witnessSkippedStep=function witnessSkippedStep(){skippedStepCount++};self.getScenarioCount=function getScenarioCount(){var scenarioCount=self.getPassedScenarioCount()+self.getUndefinedScenarioCount()+self.getPendingScenarioCount()+self.getFailedScenarioCount();return scenarioCount};self.getPassedScenarioCount=function getPassedScenarioCount(){return passedScenarioCount};self.getUndefinedScenarioCount=function getUndefinedScenarioCount(){return undefinedScenarioCount};self.getPendingScenarioCount=function getPendingScenarioCount(){return pendingScenarioCount};self.getFailedScenarioCount=function getFailedScenarioCount(){return failedScenarioCount};self.getStepCount=function getStepCount(){var stepCount=self.getPassedStepCount()+self.getUndefinedStepCount()+self.getSkippedStepCount()+self.getPendingStepCount()+self.getFailedStepCount();return stepCount};self.getPassedStepCount=function getPassedStepCount(){return passedStepCount};self.getPendingStepCount=function getPendingStepCount(){return pendingStepCount};self.getFailedStepCount=function getFailedStepCount(){return failedStepCount};self.getSkippedStepCount=function getSkippedStepCount(){return skippedStepCount};self.getUndefinedStepCount=function getUndefinedStepCount(){return undefinedStepCount};self.witnessedAnyFailedStep=function witnessedAnyFailedStep(){return failedStepCount>0};self.witnessedAnyUndefinedStep=function witnessedAnyUndefinedStep(){return undefinedStepCount>0};return self};StatsJournal.EVENT_HANDLER_NAME_PREFIX="handle";StatsJournal.EVENT_HANDLER_NAME_SUFFIX="Event";module.exports=StatsJournal},{"../../cucumber":1}],33:[function(require,module,exports){var SummaryFormatter=function(options){var Cucumber=require("../../cucumber");var failedScenarioLogBuffer="";var undefinedStepLogBuffer="";var failedStepResults=Cucumber.Type.Collection();var statsJournal=Cucumber.Listener.StatsJournal();var color=Cucumber.Util.ConsoleColor;var self=Cucumber.Listener.Formatter(options);var parentHear=self.hear;self.hear=function hear(event,callback){statsJournal.hear(event,function(){parentHear(event,callback)})};self.handleStepResultEvent=function handleStepResult(event,callback){var stepResult=event.getPayloadItem("stepResult");if(stepResult.isUndefined()){self.handleUndefinedStepResult(stepResult)}else if(stepResult.isFailed()){self.handleFailedStepResult(stepResult)}callback()};self.handleUndefinedStepResult=function handleUndefinedStepResult(stepResult){var step=stepResult.getStep();self.storeUndefinedStepResult(step)};self.handleFailedStepResult=function handleFailedStepResult(stepResult){self.storeFailedStepResult(stepResult)};self.handleAfterScenarioEvent=function handleAfterScenarioEvent(event,callback){if(statsJournal.isCurrentScenarioFailing()){var scenario=event.getPayloadItem("scenario");self.storeFailedScenario(scenario)}callback()};self.handleAfterFeaturesEvent=function handleAfterFeaturesEvent(event,callback){self.logSummary();callback()};self.storeFailedStepResult=function storeFailedStepResult(failedStepResult){failedStepResults.add(failedStepResult)};self.storeFailedScenario=function storeFailedScenario(failedScenario){var name=failedScenario.getName();var uri=failedScenario.getUri();var line=failedScenario.getLine();self.appendStringToFailedScenarioLogBuffer(uri+":"+line+" # Scenario: "+name)};self.storeUndefinedStepResult=function storeUndefinedStepResult(step){var snippetBuilder=Cucumber.SupportCode.StepDefinitionSnippetBuilder(step,self.getStepDefinitionSyntax());var snippet=snippetBuilder.buildSnippet();self.appendStringToUndefinedStepLogBuffer(snippet)};self.getStepDefinitionSyntax=function getStepDefinitionSyntax(){var syntax=options.coffeeScriptSnippets?"CoffeeScript":"JavaScript";return new Cucumber.SupportCode.StepDefinitionSnippetBuilderSyntax[syntax]};self.appendStringToFailedScenarioLogBuffer=function appendStringToFailedScenarioLogBuffer(string){failedScenarioLogBuffer+=string+"\n"};self.appendStringToUndefinedStepLogBuffer=function appendStringToUndefinedStepLogBuffer(string){if(undefinedStepLogBuffer.indexOf(string)==-1)undefinedStepLogBuffer+=string+"\n"};self.getFailedScenarioLogBuffer=function getFailedScenarioLogBuffer(){return failedScenarioLogBuffer};self.getUndefinedStepLogBuffer=function getUndefinedStepLogBuffer(){return undefinedStepLogBuffer};self.logSummary=function logSummary(){if(statsJournal.witnessedAnyFailedStep())self.logFailedStepResults();self.logScenariosSummary();self.logStepsSummary();if(statsJournal.witnessedAnyUndefinedStep())self.logUndefinedStepSnippets()};self.logFailedStepResults=function logFailedStepResults(){self.log("(::) failed steps (::)\n\n");failedStepResults.syncForEach(function(stepResult){self.logFailedStepResult(stepResult)});self.log("Failing scenarios:\n");var failedScenarios=self.getFailedScenarioLogBuffer();self.log(failedScenarios);self.log("\n")};self.logFailedStepResult=function logFailedStepResult(stepResult){var failureMessage=stepResult.getFailureException();self.log(failureMessage.stack||failureMessage);self.log("\n\n")};self.logScenariosSummary=function logScenariosSummary(){var scenarioCount=statsJournal.getScenarioCount();var passedScenarioCount=statsJournal.getPassedScenarioCount();var undefinedScenarioCount=statsJournal.getUndefinedScenarioCount();var pendingScenarioCount=statsJournal.getPendingScenarioCount();var failedScenarioCount=statsJournal.getFailedScenarioCount();var details=[];self.log(scenarioCount+" scenario"+(scenarioCount!=1?"s":""));if(scenarioCount>0){if(failedScenarioCount>0)details.push(color.format("failed",failedScenarioCount+" failed"));if(undefinedScenarioCount>0)details.push(color.format("undefined",undefinedScenarioCount+" undefined"));if(pendingScenarioCount>0)details.push(color.format("pending",pendingScenarioCount+" pending"));if(passedScenarioCount>0)details.push(color.format("passed",passedScenarioCount+" passed"));self.log(" ("+details.join(", ")+")")}self.log("\n")};self.logStepsSummary=function logStepsSummary(){var stepCount=statsJournal.getStepCount();var passedStepCount=statsJournal.getPassedStepCount();var undefinedStepCount=statsJournal.getUndefinedStepCount();var skippedStepCount=statsJournal.getSkippedStepCount();var pendingStepCount=statsJournal.getPendingStepCount();var failedStepCount=statsJournal.getFailedStepCount();var details=[];self.log(stepCount+" step"+(stepCount!=1?"s":""));if(stepCount>0){if(failedStepCount>0)details.push(color.format("failed",failedStepCount+" failed"));if(undefinedStepCount>0)details.push(color.format("undefined",undefinedStepCount+" undefined"));if(pendingStepCount>0)details.push(color.format("pending",pendingStepCount+" pending"));if(skippedStepCount>0)details.push(color.format("skipped",skippedStepCount+" skipped"));if(passedStepCount>0)details.push(color.format("passed",passedStepCount+" passed"));self.log(" ("+details.join(", ")+")")}self.log("\n")};self.logUndefinedStepSnippets=function logUndefinedStepSnippets(){var undefinedStepLogBuffer=self.getUndefinedStepLogBuffer();self.log(color.format("pending","\nYou can implement step definitions for undefined steps with these snippets:\n\n"));self.log(color.format("pending",undefinedStepLogBuffer))};return self};module.exports=SummaryFormatter},{"../../cucumber":1}],34:[function(require,module,exports){var Parser=function(featureSources,astFilter){var Gherkin=require("gherkin");var Cucumber=require("../cucumber");var features=Cucumber.Ast.Features();var astAssembler=Cucumber.Ast.Assembler(features,astFilter);var currentSourceUri;var self={parse:function parse(){var lexers={};var lexer=function(lang){if(!(lang in lexers)){lexers[lang]=new(Gherkin.Lexer(lang))(self.getEventHandlers())}return lexers[lang]};for(i in featureSources){var currentSourceUri=featureSources[i][Parser.FEATURE_NAME_SOURCE_PAIR_URI_INDEX];var featureSource=featureSources[i][Parser.FEATURE_NAME_SOURCE_PAIR_SOURCE_INDEX];self.setCurrentSourceUri(currentSourceUri);var languageMatch=/^\s*#\s*language:\s*([a-z_]*)/.exec(featureSource.toString());var language=languageMatch==null?"en":languageMatch[1];lexer(language).scan(featureSource)}return features},setCurrentSourceUri:function setCurrentSourceUri(uri){currentSourceUri=uri},getCurrentSourceUri:function getCurrentSourceUri(){return currentSourceUri},getEventHandlers:function getEventHandlers(){return{background:self.handleBackground,comment:self.handleComment,doc_string:self.handleDocString,eof:self.handleEof,feature:self.handleFeature,row:self.handleDataTableRow,scenario:self.handleScenario,step:self.handleStep,tag:self.handleTag,scenario_outline:self.handleScenarioOutline,examples:self.handleExamples}},handleBackground:function handleBackground(keyword,name,description,line){var uri=self.getCurrentSourceUri();var background=Cucumber.Ast.Background(keyword,name,description,uri,line);astAssembler.insertBackground(background)},handleComment:function handleComment(){},handleDocString:function handleDocString(contentType,string,line){var uri=self.getCurrentSourceUri();var docString=Cucumber.Ast.DocString(contentType,string,uri,line);astAssembler.insertDocString(docString)},handleEof:function handleEof(){astAssembler.finish()},handleFeature:function handleFeature(keyword,name,description,line){var uri=self.getCurrentSourceUri();var feature=Cucumber.Ast.Feature(keyword,name,description,uri,line);astAssembler.insertFeature(feature)},handleDataTableRow:function handleDataTableRow(cells,line){var uri=self.getCurrentSourceUri();var dataTableRow=Cucumber.Ast.DataTable.Row(cells,uri,line);astAssembler.insertDataTableRow(dataTableRow)},handleScenario:function handleScenario(keyword,name,description,line){var uri=self.getCurrentSourceUri();var scenario=Cucumber.Ast.Scenario(keyword,name,description,uri,line);astAssembler.insertScenario(scenario)},handleStep:function handleStep(keyword,name,line){var uri=self.getCurrentSourceUri();var step=Cucumber.Ast.Step(keyword,name,uri,line);astAssembler.insertStep(step)},handleTag:function handleTag(tag,line){var uri=self.getCurrentSourceUri();var tag=Cucumber.Ast.Tag(tag,uri,line);astAssembler.insertTag(tag)},handleScenarioOutline:function handleScenarioOutline(keyword,name,description,line){var uri=self.getCurrentSourceUri();var outline=Cucumber.Ast.ScenarioOutline(keyword,name,description,uri,line);astAssembler.insertScenario(outline)},handleExamples:function handleExamples(keyword,name,description,line){var examples=Cucumber.Ast.Examples(keyword,name,description,line);astAssembler.insertExamples(examples)}};return self};Parser.FEATURE_NAME_SOURCE_PAIR_URI_INDEX=0;Parser.FEATURE_NAME_SOURCE_PAIR_SOURCE_INDEX=1;module.exports=Parser},{"../cucumber":1,gherkin:108}],35:[function(require,module,exports){var Runtime=function(configuration){var Cucumber=require("../cucumber");var listeners=Cucumber.Type.Collection();var self={start:function start(callback){if(typeof callback!=="function")throw new Error(Runtime.START_MISSING_CALLBACK_ERROR);var features=self.getFeatures();var supportCodeLibrary=self.getSupportCodeLibrary();var astTreeWalker=Runtime.AstTreeWalker(features,supportCodeLibrary,listeners);astTreeWalker.walk(callback)},attachListener:function attachListener(listener){listeners.add(listener)},getFeatures:function getFeatures(){var featureSources=configuration.getFeatureSources();var astFilter=configuration.getAstFilter();var parser=Cucumber.Parser(featureSources,astFilter);var features=parser.parse();return features},getSupportCodeLibrary:function getSupportCodeLibrary(){var supportCodeLibrary=configuration.getSupportCodeLibrary();return supportCodeLibrary}};return self};Runtime.START_MISSING_CALLBACK_ERROR="Cucumber.Runtime.start() expects a callback";Runtime.AstTreeWalker=require("./runtime/ast_tree_walker");Runtime.StepResult=require("./runtime/step_result");Runtime.SuccessfulStepResult=require("./runtime/successful_step_result");Runtime.PendingStepResult=require("./runtime/pending_step_result");Runtime.FailedStepResult=require("./runtime/failed_step_result");Runtime.SkippedStepResult=require("./runtime/skipped_step_result");Runtime.UndefinedStepResult=require("./runtime/undefined_step_result");Runtime.Attachment=require("./runtime/attachment");module.exports=Runtime},{"../cucumber":1,"./runtime/ast_tree_walker":36,"./runtime/attachment":38,"./runtime/failed_step_result":39,"./runtime/pending_step_result":40,"./runtime/skipped_step_result":41,"./runtime/step_result":42,"./runtime/successful_step_result":43,"./runtime/undefined_step_result":44}],36:[function(require,module,exports){var AstTreeWalker=function(features,supportCodeLibrary,listeners){var Cucumber=require("../../cucumber");var world;var allFeaturesSucceded=true;var emptyHook=Cucumber.SupportCode.Hook(function(callback){callback()},{});var beforeSteps=Cucumber.Type.Collection();var afterSteps=Cucumber.Type.Collection();var attachments=Cucumber.Type.Collection();var apiScenario,scenarioSuccessful,scenarioFailed,scenarioPending,scenarioUndefined;var self={walk:function walk(callback){self.visitFeatures(features,function(){var featuresResult=self.didAllFeaturesSucceed();callback(featuresResult)})},visitFeatures:function visitFeatures(features,callback){var payload={features:features};var event=AstTreeWalker.Event(AstTreeWalker.FEATURES_EVENT_NAME,payload);self.broadcastEventAroundUserFunction(event,function(callback){features.acceptVisitor(self,callback)},callback)},visitFeature:function visitFeature(feature,callback){var payload={feature:feature};var event=AstTreeWalker.Event(AstTreeWalker.FEATURE_EVENT_NAME,payload);self.broadcastEventAroundUserFunction(event,function(callback){feature.acceptVisitor(self,callback)},callback)},visitBackground:function visitBackground(background,callback){var payload={background:background};var event=AstTreeWalker.Event(AstTreeWalker.BACKGROUND_EVENT_NAME,payload);self.broadcastEvent(event,callback)},visitScenario:function visitScenario(scenario,callback){supportCodeLibrary.instantiateNewWorld(function(world){self.setWorld(world);self.witnessNewScenario(scenario);self.createBeforeAndAfterStepsForAroundHooks(scenario);self.createBeforeStepsForBeforeHooks(scenario);self.createAfterStepsForAfterHooks(scenario);var payload={scenario:scenario};var event=AstTreeWalker.Event(AstTreeWalker.SCENARIO_EVENT_NAME,payload);self.broadcastEventAroundUserFunction(event,function(callback){self.visitBeforeSteps(function(){scenario.acceptVisitor(self,function(){self.visitAfterSteps(callback)})})},callback)})},createBeforeAndAfterStepsForAroundHooks:function createBeforeAndAfterStepsForAroundHooks(scenario){var aroundHooks=supportCodeLibrary.lookupAroundHooksByScenario(scenario);aroundHooks.syncForEach(function(aroundHook){var beforeStep=Cucumber.Ast.HookStep(AstTreeWalker.AROUND_STEP_KEYWORD);beforeStep.setHook(aroundHook);beforeSteps.add(beforeStep);var afterStep=Cucumber.Ast.HookStep(AstTreeWalker.AROUND_STEP_KEYWORD);afterStep.setHook(emptyHook);afterSteps.unshift(afterStep);aroundHook.setAfterStep(afterStep)})},createBeforeStepsForBeforeHooks:function createBeforeStepsForBeforeHooks(scenario){var beforeHooks=supportCodeLibrary.lookupBeforeHooksByScenario(scenario);beforeHooks.syncForEach(function(beforeHook){var beforeStep=Cucumber.Ast.HookStep(AstTreeWalker.BEFORE_STEP_KEYWORD);beforeStep.setHook(beforeHook);beforeSteps.add(beforeStep)})},createAfterStepsForAfterHooks:function createAfterStepsForAfterHooks(scenario){var afterHooks=supportCodeLibrary.lookupAfterHooksByScenario(scenario);
afterHooks.syncForEach(function(afterHook){var afterStep=Cucumber.Ast.HookStep(AstTreeWalker.AFTER_STEP_KEYWORD);afterStep.setHook(afterHook);afterSteps.unshift(afterStep)})},visitBeforeSteps:function visitBeforeSteps(callback){beforeSteps.forEach(function(beforeStep,callback){beforeStep.acceptVisitor(self,callback)},callback)},visitAfterSteps:function visitAfterSteps(callback){afterSteps.forEach(function(afterStep,callback){afterStep.acceptVisitor(self,callback)},callback)},visitStep:function visitStep(step,callback){self.witnessNewStep();var payload={step:step};var event=AstTreeWalker.Event(AstTreeWalker.STEP_EVENT_NAME,payload);self.broadcastEventAroundUserFunction(event,function(callback){self.processStep(step,callback)},callback)},visitStepResult:function visitStepResult(stepResult,callback){if(stepResult.isFailed())self.witnessFailedStep();else if(stepResult.isPending())self.witnessPendingStep();var payload={stepResult:stepResult};var event=AstTreeWalker.Event(AstTreeWalker.STEP_RESULT_EVENT_NAME,payload);self.broadcastEvent(event,callback)},broadcastEventAroundUserFunction:function broadcastEventAroundUserFunction(event,userFunction,callback){var userFunctionWrapper=self.wrapUserFunctionAndAfterEventBroadcast(userFunction,event,callback);self.broadcastBeforeEvent(event,userFunctionWrapper)},wrapUserFunctionAndAfterEventBroadcast:function wrapUserFunctionAndAfterEventBroadcast(userFunction,event,callback){var callAfterEventBroadcast=self.wrapAfterEventBroadcast(event,callback);return function callUserFunctionAndBroadcastAfterEvent(){userFunction(callAfterEventBroadcast)}},wrapAfterEventBroadcast:function wrapAfterEventBroadcast(event,callback){return function(){self.broadcastAfterEvent(event,callback)}},broadcastBeforeEvent:function broadcastBeforeEvent(event,callback){var preEvent=event.replicateAsPreEvent();self.broadcastEvent(preEvent,callback)},broadcastAfterEvent:function broadcastAfterEvent(event,callback){var postEvent=event.replicateAsPostEvent();self.broadcastEvent(postEvent,callback)},broadcastEvent:function broadcastEvent(event,callback){broadcastToListeners(listeners,onRuntimeListenersComplete);function onRuntimeListenersComplete(){var listeners=supportCodeLibrary.getListeners();broadcastToListeners(listeners,callback)}function broadcastToListeners(listeners,callback){listeners.forEach(function(listener,callback){listener.hear(event,callback)},callback)}},lookupStepDefinitionByName:function lookupStepDefinitionByName(stepName){return supportCodeLibrary.lookupStepDefinitionByName(stepName)},setWorld:function setWorld(newWorld){world=newWorld},getWorld:function getWorld(){return world},isStepUndefined:function isStepUndefined(step){var stepName=step.getName();return!supportCodeLibrary.isStepDefinitionNameDefined(stepName)},didAllFeaturesSucceed:function didAllFeaturesSucceed(){return allFeaturesSucceded},isScenarioSuccessful:function isScenarioSuccessful(){return scenarioSuccessful},isScenarioFailed:function isScenarioFailed(){return scenarioFailed},isScenarioPending:function isScenarioPending(){return scenarioPending},isScenarioUndefined:function isScenarioUndefined(){return scenarioUndefined},attach:function attach(data,mimeType){attachments.add(Cucumber.Runtime.Attachment({mimeType:mimeType,data:data}))},getAttachments:function getAttachments(){return attachments},witnessNewStep:function witnessNewStep(){attachments.clear()},witnessFailedStep:function witnessFailedStep(){allFeaturesSucceded=false;scenarioSuccessful=false;scenarioFailed=true},witnessPendingStep:function witnessPendingStep(){scenarioSuccessful=false;scenarioPending=true},witnessUndefinedStep:function witnessUndefinedStep(){scenarioSuccessful=false;scenarioUndefined=true},witnessNewScenario:function witnessNewScenario(scenario){apiScenario=Cucumber.Api.Scenario(self,scenario);scenarioSuccessful=true;scenarioFailed=false;scenarioPending=false;scenarioUndefined=false;beforeSteps.clear();afterSteps.clear()},getScenario:function getScenario(){return apiScenario},isSkippingSteps:function isSkippingSteps(){return!scenarioSuccessful},processStep:function processStep(step,callback){if(self.isStepUndefined(step)){self.witnessUndefinedStep();self.skipUndefinedStep(step,callback)}else if(self.isSkippingSteps()){self.skipStep(step,callback)}else{self.executeStep(step,callback)}},executeStep:function executeStep(step,callback){step.acceptVisitor(self,callback)},skipStep:function skipStep(step,callback){var skippedStepResult=Cucumber.Runtime.SkippedStepResult({step:step});var payload={stepResult:skippedStepResult};var event=AstTreeWalker.Event(AstTreeWalker.STEP_RESULT_EVENT_NAME,payload);self.broadcastEvent(event,callback)},skipUndefinedStep:function skipUndefinedStep(step,callback){var undefinedStepResult=Cucumber.Runtime.UndefinedStepResult({step:step});var payload={stepResult:undefinedStepResult};var event=AstTreeWalker.Event(AstTreeWalker.STEP_RESULT_EVENT_NAME,payload);self.broadcastEvent(event,callback)}};return self};AstTreeWalker.FEATURES_EVENT_NAME="Features";AstTreeWalker.FEATURE_EVENT_NAME="Feature";AstTreeWalker.BACKGROUND_EVENT_NAME="Background";AstTreeWalker.SCENARIO_EVENT_NAME="Scenario";AstTreeWalker.STEP_EVENT_NAME="Step";AstTreeWalker.STEP_RESULT_EVENT_NAME="StepResult";AstTreeWalker.ROW_EVENT_NAME="ExampleRow";AstTreeWalker.BEFORE_EVENT_NAME_PREFIX="Before";AstTreeWalker.AFTER_EVENT_NAME_PREFIX="After";AstTreeWalker.NON_EVENT_LEADING_PARAMETERS_COUNT=0;AstTreeWalker.NON_EVENT_TRAILING_PARAMETERS_COUNT=2;AstTreeWalker.AROUND_STEP_KEYWORD="Around ";AstTreeWalker.BEFORE_STEP_KEYWORD="Before ";AstTreeWalker.AFTER_STEP_KEYWORD="After ";AstTreeWalker.Event=require("./ast_tree_walker/event");module.exports=AstTreeWalker},{"../../cucumber":1,"./ast_tree_walker/event":37}],37:[function(require,module,exports){var Event=function(name,payload){var AstTreeWalker=require("../ast_tree_walker");var self={getName:function getName(){return name},getPayloadItem:function getPayloadItem(itemName){return payload[itemName]},replicateAsPreEvent:function replicateAsPreEvent(){var newName=buildBeforeEventName(name);return AstTreeWalker.Event(newName,payload)},replicateAsPostEvent:function replicateAsPostEvent(){var newName=buildAfterEventName(name);return AstTreeWalker.Event(newName,payload)},occurredOn:function occurredOn(eventName){return eventName==name},occurredAfter:function occurredAfter(eventName){var afterEventName=buildAfterEventName(eventName);return afterEventName==name}};function buildBeforeEventName(eventName){return AstTreeWalker.BEFORE_EVENT_NAME_PREFIX+eventName}function buildAfterEventName(eventName){return AstTreeWalker.AFTER_EVENT_NAME_PREFIX+eventName}return self};module.exports=Event},{"../ast_tree_walker":36}],38:[function(require,module,exports){var Attachment=function(payload){var self={getMimeType:function getMimeType(){return payload.mimeType},getData:function getData(){return payload.data}};return self};module.exports=Attachment},{}],39:[function(require,module,exports){var FailedStepResult=function(payload){var Cucumber=require("../../cucumber");var self=Cucumber.Runtime.StepResult(payload);self.isFailed=function isFailed(){return true};self.getFailureException=function getFailureException(){return payload.failureException};return self};module.exports=FailedStepResult},{"../../cucumber":1}],40:[function(require,module,exports){var PendingStepResult=function(payload){var Cucumber=require("../../cucumber");var self=Cucumber.Runtime.StepResult(payload);self.isPending=function isPending(){return true};return self};module.exports=PendingStepResult},{"../../cucumber":1}],41:[function(require,module,exports){var SkippedStepResult=function(payload){var Cucumber=require("../../cucumber");var self=Cucumber.Runtime.StepResult(payload);self.isSkipped=function isSkipped(){return true};return self};module.exports=SkippedStepResult},{"../../cucumber":1}],42:[function(require,module,exports){var StepResult=function(payload){var self={isFailed:function isFailed(){return false},isPending:function isPending(){return false},isSkipped:function isSkipped(){return false},isSuccessful:function isSuccessful(){return false},isUndefined:function isUndefined(){return false},getStep:function getStep(){return payload.step},getDuration:function getDuration(){return payload.duration},hasAttachments:function hasAttachments(){return payload.attachments.length()>0},getAttachments:function getAttachments(){return payload.attachments}};return self};module.exports=StepResult},{}],43:[function(require,module,exports){var SuccessfulStepResult=function(payload){var Cucumber=require("../../cucumber");var self=Cucumber.Runtime.StepResult(payload);self.isSuccessful=function isSuccessful(){return true};return self};module.exports=SuccessfulStepResult},{"../../cucumber":1}],44:[function(require,module,exports){var UndefinedStepResult=function(payload){var Cucumber=require("../../cucumber");var self=Cucumber.Runtime.StepResult(payload);self.isUndefined=function isUndefined(){return true};return self};module.exports=UndefinedStepResult},{"../../cucumber":1}],45:[function(require,module,exports){var SupportCode={};SupportCode.Hook=require("./support_code/hook");SupportCode.AroundHook=require("./support_code/around_hook");SupportCode.Library=require("./support_code/library");SupportCode.StepDefinition=require("./support_code/step_definition");SupportCode.StepDefinitionSnippetBuilder=require("./support_code/step_definition_snippet_builder");SupportCode.StepDefinitionSnippetBuilderSyntax=require("./support_code/step_definition_snippet_builder_syntax");SupportCode.WorldConstructor=require("./support_code/world_constructor");module.exports=SupportCode},{"./support_code/around_hook":46,"./support_code/hook":47,"./support_code/library":48,"./support_code/step_definition":49,"./support_code/step_definition_snippet_builder":50,"./support_code/step_definition_snippet_builder_syntax":51,"./support_code/world_constructor":52}],46:[function(require,module,exports){var AroundHook=function(code,options){var Cucumber=require("../../cucumber");var self=Cucumber.SupportCode.Hook(code,options);var afterStep;self.setAfterStep=function setAfterStep(newAfterStep){afterStep=newAfterStep};self.buildCodeCallback=function buildCodeCallback(callback){var codeCallback=function(error,postScenarioAroundHookCallback){if(arguments.length===1){postScenarioAroundHookCallback=error;error=undefined}var afterHook=Cucumber.SupportCode.Hook(postScenarioAroundHookCallback,{});afterStep.setHook(afterHook);callback(error)};return codeCallback};return self};module.exports=AroundHook},{"../../cucumber":1}],47:[function(require,module,exports){var Hook=function(code,options){var _=require("underscore");var Cucumber=require("../../cucumber");var self=Cucumber.SupportCode.StepDefinition(Hook.EMPTY_PATTERN,code);var tags=options["tags"]||[];self.matchesStepName=function matchesStepName(stepName){return false};self.buildInvocationParameters=function buildInvocationParameters(step,scenario,callback){if(code.length===1)return[callback];else return[scenario,callback]};self.appliesToScenario=function appliesToScenario(scenario){var astFilter=self.getAstFilter();return astFilter.isElementEnrolled(scenario)};self.getAstFilter=function getAstFilter(){var tagGroups=Cucumber.TagGroupParser.getTagGroupsFromStrings(tags);var rules=_.map(tagGroups,function(tagGroup){var rule=Cucumber.Ast.Filter.AnyOfTagsRule(tagGroup);return rule});var astFilter=Cucumber.Ast.Filter(rules);return astFilter};return self};Hook.EMPTY_PATTERN="";module.exports=Hook},{"../../cucumber":1,underscore:112}],48:[function(require,module,exports){(function(process){var Library=function(supportCodeDefinition){var Cucumber=require("../../cucumber");var listeners=Cucumber.Type.Collection();var stepDefinitions=Cucumber.Type.Collection();var aroundHooks=Cucumber.Type.Collection();var beforeHooks=Cucumber.Type.Collection();var afterHooks=Cucumber.Type.Collection();var worldConstructor=Cucumber.SupportCode.WorldConstructor();var self={lookupAroundHooksByScenario:function lookupBeforeHooksByScenario(scenario){return self.lookupHooksByScenario(aroundHooks,scenario)},lookupBeforeHooksByScenario:function lookupBeforeHooksByScenario(scenario){return self.lookupHooksByScenario(beforeHooks,scenario)},lookupAfterHooksByScenario:function lookupBeforeHooksByScenario(scenario){return self.lookupHooksByScenario(afterHooks,scenario)},lookupHooksByScenario:function lookupHooksByScenario(hooks,scenario){var matchingHooks=Cucumber.Type.Collection();hooks.syncForEach(function(hook){if(hook.appliesToScenario(scenario)){matchingHooks.add(hook)}});return matchingHooks},lookupStepDefinitionByName:function lookupStepDefinitionByName(name){var matchingStepDefinition;stepDefinitions.syncForEach(function(stepDefinition){if(stepDefinition.matchesStepName(name)){matchingStepDefinition=stepDefinition}});return matchingStepDefinition},isStepDefinitionNameDefined:function isStepDefinitionNameDefined(name){var stepDefinition=self.lookupStepDefinitionByName(name);return stepDefinition!=undefined},defineAroundHook:function defineAroundHook(){var tagGroupStrings=Cucumber.Util.Arguments(arguments);var code=tagGroupStrings.pop();var hook=Cucumber.SupportCode.AroundHook(code,{tags:tagGroupStrings});aroundHooks.add(hook)},defineBeforeHook:function defineBeforeHook(){var tagGroupStrings=Cucumber.Util.Arguments(arguments);var code=tagGroupStrings.pop();var hook=Cucumber.SupportCode.Hook(code,{tags:tagGroupStrings});beforeHooks.add(hook)},defineAfterHook:function defineAfterHook(){var tagGroupStrings=Cucumber.Util.Arguments(arguments);var code=tagGroupStrings.pop();var hook=Cucumber.SupportCode.Hook(code,{tags:tagGroupStrings});afterHooks.add(hook)},defineStep:function defineStep(name,code){var stepDefinition=Cucumber.SupportCode.StepDefinition(name,code);stepDefinitions.add(stepDefinition)},registerListener:function registerListener(listener){listeners.add(listener)},registerHandler:function registerHandler(eventName,handler){var listener=Cucumber.Listener();listener.setHandlerForEvent(eventName,handler);self.registerListener(listener)},getListeners:function getListeners(){return listeners},instantiateNewWorld:function instantiateNewWorld(callback){var world=new worldConstructor(function(explicitWorld){process.nextTick(function(){callback(explicitWorld||world)})})}};var supportCodeHelper={Around:self.defineAroundHook,Before:self.defineBeforeHook,After:self.defineAfterHook,Given:self.defineStep,When:self.defineStep,Then:self.defineStep,defineStep:self.defineStep,registerListener:self.registerListener,registerHandler:self.registerHandler,World:worldConstructor};appendEventHandlers(supportCodeHelper,self);supportCodeDefinition.call(supportCodeHelper);worldConstructor=supportCodeHelper.World;return self};function appendEventHandlers(supportCodeHelper,library){var Cucumber=require("../../cucumber");var events=Cucumber.Listener.Events;var eventName;for(eventName in events){if(events.hasOwnProperty(eventName)){supportCodeHelper[eventName]=createEventListenerMethod(library,eventName)}}}function createEventListenerMethod(library,eventName){return function(handler){library.registerHandler(eventName,handler)}}module.exports=Library}).call(this,require("_process"))},{"../../cucumber":1,_process:76}],49:[function(require,module,exports){(function(process){var StepDefinition=function(pattern,code){var Cucumber=require("../../cucumber");var self={getPatternRegexp:function getPatternRegexp(){var regexp;if(pattern.replace){var regexpString=pattern.replace(StepDefinition.UNSAFE_STRING_CHARACTERS_REGEXP,StepDefinition.PREVIOUS_REGEXP_MATCH).replace(StepDefinition.QUOTED_DOLLAR_PARAMETER_REGEXP,StepDefinition.QUOTED_DOLLAR_PARAMETER_SUBSTITUTION).replace(StepDefinition.DOLLAR_PARAMETER_REGEXP,StepDefinition.DOLLAR_PARAMETER_SUBSTITUTION);regexpString=StepDefinition.STRING_PATTERN_REGEXP_PREFIX+regexpString+StepDefinition.STRING_PATTERN_REGEXP_SUFFIX;regexp=RegExp(regexpString)}else regexp=pattern;return regexp},matchesStepName:function matchesStepName(stepName){var regexp=self.getPatternRegexp();return regexp.test(stepName)},invoke:function invoke(step,world,scenario,callback){var timeoutValue=Cucumber.Runtime.stepTimeoutValue,timeoutRef;var time=function time(){if(typeof process!=="undefined"&&process.hrtime){return process.hrtime()}else{return(new Date).getTime()}};var durationInNanoseconds=function durationInNanoseconds(start){if(typeof process!=="undefined"&&process.hrtime){var duration=process.hrtime(start);return duration[0]*1e9+duration[1]}else{return((new Date).getTime()-start)*1e6}};var start=time();var cleanUp=function cleanUp(){Cucumber.Util.Exception.unregisterUncaughtExceptionHandler(handleException)};timeoutRef=setTimeout(function(){codeCallback.fail("Timeout")},timeoutValue);var codeCallback=self.buildCodeCallback(function(error){if(codeCallback.wasCalled){console.error("Callback was already called for this step : ",step.getName());return}codeCallback.wasCalled=true;clearTimeout(timeoutRef);if(error){codeCallback.fail(error)}else{var duration=durationInNanoseconds(start);var successfulStepResult=Cucumber.Runtime.SuccessfulStepResult({step:step,duration:duration,attachments:scenario.getAttachments()});cleanUp();callback(successfulStepResult)}});codeCallback.pending=function pending(reason){clearTimeout(timeoutRef);var pendingStepResult=Cucumber.Runtime.PendingStepResult({step:step,pendingReason:reason,attachments:scenario.getAttachments()});cleanUp();callback(pendingStepResult)};codeCallback.fail=function fail(failureReason){clearTimeout(timeoutRef);var failureException=failureReason||new Error(StepDefinition.UNKNOWN_STEP_FAILURE_MESSAGE);var duration=durationInNanoseconds(start);var failedStepResult=Cucumber.Runtime.FailedStepResult({step:step,failureException:failureException,duration:duration,attachments:scenario.getAttachments()});cleanUp();callback(failedStepResult)};var parameters=self.buildInvocationParameters(step,scenario,codeCallback);var handleException=self.buildExceptionHandlerToCodeCallback(codeCallback);Cucumber.Util.Exception.registerUncaughtExceptionHandler(handleException);try{code.apply(world,parameters)}catch(exception){handleException(exception)}},buildCodeCallback:function buildCodeCallback(callback){return callback},buildInvocationParameters:function buildInvocationParameters(step,scenario,callback){var stepName=step.getName();var patternRegexp=self.getPatternRegexp();var parameters=patternRegexp.exec(stepName);parameters.shift();if(step.hasAttachment()){var attachmentContents=step.getAttachmentContents();parameters.push(attachmentContents)}parameters.push(callback);return parameters},buildExceptionHandlerToCodeCallback:function buildExceptionHandlerToCodeCallback(codeCallback){var exceptionHandler=function handleScenarioException(exception){if(exception)Cucumber.Debug.warn(exception.stack||exception,"exception inside feature",3);codeCallback.fail(exception)};return exceptionHandler}};return self};StepDefinition.DOLLAR_PARAMETER_REGEXP=/\$[a-zA-Z_-]+/g;StepDefinition.DOLLAR_PARAMETER_SUBSTITUTION="(.*)";StepDefinition.PREVIOUS_REGEXP_MATCH="\\$&";StepDefinition.QUOTED_DOLLAR_PARAMETER_REGEXP=/"\$[a-zA-Z_-]+"/g;StepDefinition.QUOTED_DOLLAR_PARAMETER_SUBSTITUTION='"([^"]*)"';StepDefinition.STRING_PATTERN_REGEXP_PREFIX="^";StepDefinition.STRING_PATTERN_REGEXP_SUFFIX="$";StepDefinition.UNSAFE_STRING_CHARACTERS_REGEXP=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\|]/g;StepDefinition.UNKNOWN_STEP_FAILURE_MESSAGE="Step failure";module.exports=StepDefinition}).call(this,require("_process"))},{"../../cucumber":1,_process:76}],50:[function(require,module,exports){var _=require("underscore");_.str=require("underscore.string");var StepDefinitionSnippetBuilder=function(step,syntax){var Cucumber=require("../../cucumber");var self={buildSnippet:function buildSnippet(){var functionName=self.buildStepDefinitionFunctionName();var pattern=self.buildStepDefinitionPattern();var parameters=self.buildStepDefinitionParameters();var snippet=syntax.getStepDefinitionStart()+functionName+syntax.getStepDefinitionInner1()+pattern+syntax.getStepDefinitionInner2()+parameters+syntax.getStepDefinitionEnd();return snippet},buildStepDefinitionFunctionName:function buildStepDefinitionFunctionName(){var functionName;if(step.isOutcomeStep())functionName=syntax.getOutcomeStepDefinitionFunctionName();else if(step.isEventStep())functionName=syntax.getEventStepDefinitionFunctionName();else functionName=syntax.getContextStepDefinitionFunctionName();return functionName},buildStepDefinitionPattern:function buildStepDefinitionPattern(){var stepName=step.isOutlineStep()?step.getOriginalStep().getName():step.getName();var escapedStepName=Cucumber.Util.RegExp.escapeString(stepName);var parameterizedStepName=self.parameterizeStepName(escapedStepName);var pattern=syntax.getPatternStart()+parameterizedStepName+syntax.getPatternEnd();return pattern},buildStepDefinitionParameters:function buildStepDefinitionParameters(){var parameters=self.getStepDefinitionPatternMatchingGroupParameters();if(step.hasDocString())parameters=parameters.concat([syntax.getStepDefinitionDocString()]);else if(step.hasDataTable())parameters=parameters.concat([syntax.getStepDefinitionDataTable()]);var parametersAndCallback=parameters.concat([syntax.getStepDefinitionCallback()]);var parameterString=parametersAndCallback.join(syntax.getFunctionParameterSeparator());return parameterString},getStepDefinitionPatternMatchingGroupParameters:function getStepDefinitionPatternMatchingGroupParameters(){var parameterCount=self.countStepDefinitionPatternMatchingGroups();var parameters=[];_(parameterCount).times(function(n){var offset=n+1;parameters.push("arg"+offset)});var stepName=step.isOutlineStep()?step.getOriginalStep().getName():step.getName();var outlineParams=stepName.match(StepDefinitionSnippetBuilder.OUTLINE_STRING_PATTERN);function cleanParam(param){return _.str.camelize(param.substr(1,param.length-2))}var cleaned=_.map(outlineParams,cleanParam);return parameters.concat(cleaned)},countStepDefinitionPatternMatchingGroups:function countStepDefinitionPatternMatchingGroups(){var stepDefinitionPattern=self.buildStepDefinitionPattern();var numberMatchingGroupCount=Cucumber.Util.String.count(stepDefinitionPattern,syntax.getNumberMatchingGroup());var quotedStringMatchingGroupCount=Cucumber.Util.String.count(stepDefinitionPattern,syntax.getQuotedStringMatchingGroup());var count=numberMatchingGroupCount+quotedStringMatchingGroupCount;return count},parameterizeStepName:function parameterizeStepName(stepName){var parameterizedStepName=stepName.replace(StepDefinitionSnippetBuilder.NUMBER_PATTERN,syntax.getNumberMatchingGroup()).replace(StepDefinitionSnippetBuilder.QUOTED_STRING_PATTERN,syntax.getQuotedStringMatchingGroup()).replace(StepDefinitionSnippetBuilder.OUTLINE_STRING_PATTERN,syntax.getOutlineExampleMatchingGroup());return parameterizedStepName}};return self};StepDefinitionSnippetBuilder.NUMBER_PATTERN=/\d+/gi;StepDefinitionSnippetBuilder.QUOTED_STRING_PATTERN=/"[^"]*"/gi;StepDefinitionSnippetBuilder.OUTLINE_STRING_PATTERN=/<[^>]*>/gi;module.exports=StepDefinitionSnippetBuilder},{"../../cucumber":1,underscore:112,"underscore.string":111}],51:[function(require,module,exports){var _=require("underscore");var Syntax=function(){};var JavaScriptSyntax=function(){};var CoffeeScriptSyntax=function(){};Syntax.prototype={getStepDefinitionDocString:function(){return"string"},getStepDefinitionDataTable:function(){return"table"},getStepDefinitionCallback:function(){return"callback"},getPatternStart:function(){return"/^"},getPatternEnd:function(){return"$/"},getContextStepDefinitionFunctionName:function(){return"Given"},getEventStepDefinitionFunctionName:function(){return"When"},getOutcomeStepDefinitionFunctionName:function(){return"Then"},getNumberMatchingGroup:function(){return"(\\d+)"},getQuotedStringMatchingGroup:function(){return'"([^"]*)"'},getOutlineExampleMatchingGroup:function(){return"(.*)"},getFunctionParameterSeparator:function(){return", "},getStepDefinitionEndComment:function(){return"Write code here that turns the phrase above into concrete actions"}};JavaScriptSyntax.prototype={getStepDefinitionStart:function(){return"this."},getStepDefinitionInner1:function(){return"("},getStepDefinitionInner2:function(){return", function ("},getStepDefinitionEnd:function(){return") {\n  // "+this.getStepDefinitionEndComment()+"\n  callback.pending();\n});\n"}};_.extend(JavaScriptSyntax.prototype,Syntax.prototype);CoffeeScriptSyntax.prototype={getStepDefinitionStart:function(){return"@"},getStepDefinitionInner1:function(){return" "},getStepDefinitionInner2:function(){return", ("},getStepDefinitionEnd:function(){return") ->\n  # "+this.getStepDefinitionEndComment()+"\n  callback.pending()\n"}};_.extend(CoffeeScriptSyntax.prototype,Syntax.prototype);exports.JavaScript=JavaScriptSyntax;exports.CoffeeScript=CoffeeScriptSyntax},{underscore:112}],52:[function(require,module,exports){var WorldConstructor=function(){return function World(callback){callback()}};module.exports=WorldConstructor},{}],53:[function(require,module,exports){var _=require("underscore");var TagGroupParser=function(tagGroupString){var self={parse:function parse(){var splitTags=tagGroupString.split(TagGroupParser.TAG_SEPARATOR);var trimmedTags=_.map(splitTags,function(tag){return tag.trim()});return trimmedTags}};return self};TagGroupParser.getTagGroupsFromStrings=function getTagGroupsFromStrings(tagGroupStrings){var Cucumber=require("../cucumber");var tagGroups=_.map(tagGroupStrings,function(tagOptionValue){var tagGroupParser=Cucumber.TagGroupParser(tagOptionValue);var tagGroup=tagGroupParser.parse();return tagGroup});return tagGroups};TagGroupParser.TAG_SEPARATOR=",";module.exports=TagGroupParser},{"../cucumber":1,underscore:112}],54:[function(require,module,exports){var Type={};Type.Collection=require("./type/collection");Type.HashDataTable=require("./type/hash_data_table");Type.String=require("./type/string");module.exports=Type},{"./type/collection":55,"./type/hash_data_table":56,"./type/string":57}],55:[function(require,module,exports){var Collection=function(){var items=new Array;var self={add:function add(item){items.push(item)},insert:function insert(index,item){items.splice(index,0,item)},removeAtIndex:function removeAtIndex(index){items.splice(index,1)},unshift:function unshift(item){items.unshift(item)},shift:function shift(){return items.shift()},clear:function clear(){items.length=0},indexOf:function indexOf(item){return items.indexOf(item)},getAtIndex:function getAtIndex(index){return items[index]},getLast:function getLast(){return items[items.length-1]},syncForEach:function syncForEach(userFunction){var itemsCopy=items.slice(0);itemsCopy.forEach(userFunction)},forEach:function forEach(userFunction,callback){var itemsCopy=items.slice(0);function iterate(){if(itemsCopy.length>0){processItem()}else{callback()}}function processItem(){var item=itemsCopy.shift();userFunction(item,function(){iterate()})}iterate()},syncMap:function map(userFunction){var newCollection=Collection();items.map(function(item){newCollection.add(userFunction(item))});return newCollection},length:function length(){return items.length}};return self};module.exports=Collection},{}],56:[function(require,module,exports){var HashDataTable=function(rawArray){var self={raw:function raw(){var hashKeys=self.getHashKeys();var hashValueArrays=self.getHashValueArrays();var hashes=self.createHashesFromKeysAndValueArrays(hashKeys,hashValueArrays);return hashes},getHashKeys:function getHashKeys(){return rawArray[0]},getHashValueArrays:function getHashValueArrays(){var _rawArray=[].concat(rawArray);_rawArray.shift();return _rawArray},createHashesFromKeysAndValueArrays:function createHashesFromKeysAndValueArrays(keys,valueArrays){var hashes=[];valueArrays.forEach(function(values){var hash=self.createHashFromKeysAndValues(keys,values);hashes.push(hash)});return hashes},createHashFromKeysAndValues:function createHashFromKeysAndValues(keys,values){var hash={};var len=keys.length;for(var i=0;i<len;i++){hash[keys[i]]=values[i]}return hash}};return self};module.exports=HashDataTable},{}],57:[function(require,module,exports){if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}module.exports=String},{}],58:[function(require,module,exports){var Util={};Util.Arguments=require("./util/arguments");Util.Exception=require("./util/exception");Util.RegExp=require("./util/reg_exp");Util.String=require("./util/string");Util.ConsoleColor=require("./util/colors");module.exports=Util},{"./util/arguments":59,"./util/colors":60,"./util/exception":61,"./util/reg_exp":62,"./util/string":63}],59:[function(require,module,exports){var Arguments=function Arguments(argumentsObject){return Array.prototype.slice.call(argumentsObject)};module.exports=Arguments},{}],60:[function(require,module,exports){(function(process){var ConsoleColor={ANSICodes:{reset:"[0m",bold:"[1m",faint:"[2m",grey:"[2m[37m",italic:"[3m",underline:"[4m",blink:"[5m",black:"[30m",red:"[31m",green:"[32m",yellow:"[33m",blue:"[34m",magenta:"[35m",cyan:"[36m",white:"[37m"},formatColors:{undefined:["yellow"],pending:["yellow"],pending_param:["yellow","bold"],failed:["red"],failed_param:["red","bold"],passed:["green"],passed_param:["green","bold"],skipped:["cyan"],skipped_param:["cyan","bold"],comment:["grey"],tag:["cyan"]},color:function(colors,text,noReset){code="";if(Object.prototype.toString.call(colors).slice(8,-1)!=="Array")colors=[colors];for(var idx=0;idx<colors.length;idx++){if(this.ANSICodes[colors[idx]]!==undefined){code+=this.ANSICodes[colors[idx]]}}lines=text.split("\n");for(var lineNumber=0;lineNumber<lines.length;lineNumber++){if(lines[lineNumber].length>0){lines[lineNumber]=code+lines[lineNumber]+this.ANSICodes["reset"]}}return lines.join("\n")},format:function(format,text,noReset){var envColors=process.env.CUCUMBER_COLORS;if(envColors!==undefined&&envColors.length>0){envColors=process.env.CUCUMBER_COLORS.split(":");for(var idx=0;idx<envColors.length;idx++){var envColor=envColors[idx].split("=");if(envColor[1]===undefined)break;var newColors=envColor[1].split(",");var isValidColor=true;for(var idx2=0;idx2<newColors.length;idx2++){if(this.ANSICodes[newColors[idx2]]===undefined)isValidColor=false}if(isValidColor&&this.formatColors[envColor[0]]!==undefined){this.formatColors[envColor[0]]=newColors}}}format=this.formatColors[format];return this.color(format,text,noReset)},setFormat:function(format){process.stdout.write(this.format(format,"",true))},resetFormat:function(format){process.stdout.write(this.color("reset","",true))}};module.exports=ConsoleColor}).call(this,require("_process"))},{_process:76}],61:[function(require,module,exports){(function(process){var Exception={registerUncaughtExceptionHandler:function registerUncaughtExceptionHandler(exceptionHandler){if(process.on)process.on("uncaughtException",exceptionHandler);else if(typeof window!="undefined")window.onerror=exceptionHandler},unregisterUncaughtExceptionHandler:function unregisterUncaughtExceptionHandler(exceptionHandler){if(process.removeListener)process.removeListener("uncaughtException",exceptionHandler);else if(typeof window!="undefined")window.onerror=void 0}};module.exports=Exception}).call(this,require("_process"))},{_process:76}],62:[function(require,module,exports){var RegExp={escapeString:function escapeString(string){var escaped=string.replace(RegExp.ESCAPE_PATTERN,RegExp.ESCAPE_REPLACEMENT);return escaped}};RegExp.ESCAPE_PATTERN=/[-[\]{}()*+?.\\^$|#\n\/]/g;RegExp.ESCAPE_REPLACEMENT="\\$&";module.exports=RegExp},{}],63:[function(require,module,exports){var String={count:function count(hayStack,needle){var splitHayStack=hayStack.split(needle);return splitHayStack.length-1}};module.exports=String},{}],64:[function(require,module,exports){var VolatileConfiguration=function VolatileConfiguration(features,supportCodeInitializer,options){var Cucumber=require("../cucumber");
var supportCodeLibrary=Cucumber.SupportCode.Library(supportCodeInitializer);options=options||{};var tagGroupStrings=options["tags"]||[];var self={getFeatureSources:function getFeatureSources(){if(features.replace){var featureNameSourcePair=[VolatileConfiguration.FEATURE_SOURCE_NAME,features];return[featureNameSourcePair]}else{return features}},getAstFilter:function getAstFilter(){var tagRules=self.getTagAstFilterRules();var astFilter=Cucumber.Ast.Filter(tagRules);return astFilter},getSupportCodeLibrary:function getSupportCodeLibrary(){return supportCodeLibrary},getTagAstFilterRules:function getTagAstFilterRules(){var rules=[];tagGroupStrings.forEach(function(tagGroupString){var rule=self.buildAstFilterRuleFromTagGroupString(tagGroupString);rules.push(rule)});return rules},buildAstFilterRuleFromTagGroupString:function buildAstFilterRuleFromTagGroupString(tagGroupString){var tagGroupParser=Cucumber.TagGroupParser(tagGroupString);var tagGroup=tagGroupParser.parse();var rule=Cucumber.Ast.Filter.AnyOfTagsRule(tagGroup);return rule}};return self};VolatileConfiguration.FEATURE_SOURCE_NAME="(feature)";module.exports=VolatileConfiguration},{"../cucumber":1}],65:[function(require,module,exports){var base64=require("base64-js");var ieee754=require("ieee754");var isArray=require("is-array");exports.Buffer=Buffer;exports.SlowBuffer=Buffer;exports.INSPECT_MAX_BYTES=50;Buffer.poolSize=8192;var kMaxLength=1073741823;Buffer.TYPED_ARRAY_SUPPORT=function(){try{var buf=new ArrayBuffer(0);var arr=new Uint8Array(buf);arr.foo=function(){return 42};return 42===arr.foo()&&typeof arr.subarray==="function"&&new Uint8Array(1).subarray(1,1).byteLength===0}catch(e){return false}}();function Buffer(subject,encoding,noZero){if(!(this instanceof Buffer))return new Buffer(subject,encoding,noZero);var type=typeof subject;var length;if(type==="number")length=subject>0?subject>>>0:0;else if(type==="string"){if(encoding==="base64")subject=base64clean(subject);length=Buffer.byteLength(subject,encoding)}else if(type==="object"&&subject!==null){if(subject.type==="Buffer"&&isArray(subject.data))subject=subject.data;length=+subject.length>0?Math.floor(+subject.length):0}else throw new TypeError("must start with number, buffer, array or string");if(this.length>kMaxLength)throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+kMaxLength.toString(16)+" bytes");var buf;if(Buffer.TYPED_ARRAY_SUPPORT){buf=Buffer._augment(new Uint8Array(length))}else{buf=this;buf.length=length;buf._isBuffer=true}var i;if(Buffer.TYPED_ARRAY_SUPPORT&&typeof subject.byteLength==="number"){buf._set(subject)}else if(isArrayish(subject)){if(Buffer.isBuffer(subject)){for(i=0;i<length;i++)buf[i]=subject.readUInt8(i)}else{for(i=0;i<length;i++)buf[i]=(subject[i]%256+256)%256}}else if(type==="string"){buf.write(subject,0,encoding)}else if(type==="number"&&!Buffer.TYPED_ARRAY_SUPPORT&&!noZero){for(i=0;i<length;i++){buf[i]=0}}return buf}Buffer.isBuffer=function(b){return!!(b!=null&&b._isBuffer)};Buffer.compare=function(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len&&a[i]===b[i];i++){}if(i!==len){x=a[i];y=b[i]}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function(list,totalLength){if(!isArray(list))throw new TypeError("Usage: Buffer.concat(list[, length])");if(list.length===0){return new Buffer(0)}else if(list.length===1){return list[0]}var i;if(totalLength===undefined){totalLength=0;for(i=0;i<list.length;i++){totalLength+=list[i].length}}var buf=new Buffer(totalLength);var pos=0;for(i=0;i<list.length;i++){var item=list[i];item.copy(buf,pos);pos+=item.length}return buf};Buffer.byteLength=function(str,encoding){var ret;str=str+"";switch(encoding||"utf8"){case"ascii":case"binary":case"raw":ret=str.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ret=str.length*2;break;case"hex":ret=str.length>>>1;break;case"utf8":case"utf-8":ret=utf8ToBytes(str).length;break;case"base64":ret=base64ToBytes(str).length;break;default:ret=str.length}return ret};Buffer.prototype.length=undefined;Buffer.prototype.parent=undefined;Buffer.prototype.toString=function(encoding,start,end){var loweredCase=false;start=start>>>0;end=end===undefined||end===Infinity?this.length:end>>>0;if(!encoding)encoding="utf8";if(start<0)start=0;if(end>this.length)end=this.length;if(end<=start)return"";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"binary":return binarySlice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}};Buffer.prototype.equals=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function(){var str="";var max=exports.INSPECT_MAX_BYTES;if(this.length>0){str=this.toString("hex",0,max).match(/.{2}/g).join(" ");if(this.length>max)str+=" ... "}return"<Buffer "+str+">"};Buffer.prototype.compare=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return Buffer.compare(this,b)};Buffer.prototype.get=function(offset){console.log(".get() is deprecated. Access using array indexes instead.");return this.readUInt8(offset)};Buffer.prototype.set=function(v,offset){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(v,offset)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(strLen%2!==0)throw new Error("Invalid hex string");if(length>strLen/2){length=strLen/2}for(var i=0;i<length;i++){var byte=parseInt(string.substr(i*2,2),16);if(isNaN(byte))throw new Error("Invalid hex string");buf[offset+i]=byte}return i}function utf8Write(buf,string,offset,length){var charsWritten=blitBuffer(utf8ToBytes(string),buf,offset,length);return charsWritten}function asciiWrite(buf,string,offset,length){var charsWritten=blitBuffer(asciiToBytes(string),buf,offset,length);return charsWritten}function binaryWrite(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){var charsWritten=blitBuffer(base64ToBytes(string),buf,offset,length);return charsWritten}function utf16leWrite(buf,string,offset,length){var charsWritten=blitBuffer(utf16leToBytes(string),buf,offset,length);return charsWritten}Buffer.prototype.write=function(string,offset,length,encoding){if(isFinite(offset)){if(!isFinite(length)){encoding=length;length=undefined}}else{var swap=encoding;encoding=offset;offset=length;length=swap}offset=Number(offset)||0;var remaining=this.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}encoding=String(encoding||"utf8").toLowerCase();var ret;switch(encoding){case"hex":ret=hexWrite(this,string,offset,length);break;case"utf8":case"utf-8":ret=utf8Write(this,string,offset,length);break;case"ascii":ret=asciiWrite(this,string,offset,length);break;case"binary":ret=binaryWrite(this,string,offset,length);break;case"base64":ret=base64Write(this,string,offset,length);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ret=utf16leWrite(this,string,offset,length);break;default:throw new TypeError("Unknown encoding: "+encoding)}return ret};Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){var res="";var tmp="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){if(buf[i]<=127){res+=decodeUtf8Char(tmp)+String.fromCharCode(buf[i]);tmp=""}else{tmp+="%"+buf[i].toString(16)}}return res+decodeUtf8Char(tmp)}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){ret+=String.fromCharCode(buf[i])}return ret}function binarySlice(buf,start,end){return asciiSlice(buf,start,end)}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;i++){out+=toHex(buf[i])}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;if(Buffer.TYPED_ARRAY_SUPPORT){return Buffer._augment(this.subarray(start,end))}else{var sliceLen=end-start;var newBuf=new Buffer(sliceLen,undefined,true);for(var i=0;i<sliceLen;i++){newBuf[i]=this[i+start]}return newBuf}};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUInt8=function(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUInt32BE=function(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readInt8=function(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError("buffer must be a Buffer instance");if(value>max||value<min)throw new TypeError("value is out of bounds");if(offset+ext>buf.length)throw new TypeError("index out of range")}Buffer.prototype.writeUInt8=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,255,0);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);this[offset]=value;return offset+1};function objectWriteUInt16(buf,value,offset,littleEndian){if(value<0)value=65535+value+1;for(var i=0,j=Math.min(buf.length-offset,2);i<j;i++){buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8}}Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value;this[offset+1]=value>>>8}else objectWriteUInt16(this,value,offset,true);return offset+2};Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value}else objectWriteUInt16(this,value,offset,false);return offset+2};function objectWriteUInt32(buf,value,offset,littleEndian){if(value<0)value=4294967295+value+1;for(var i=0,j=Math.min(buf.length-offset,4);i<j;i++){buf[offset+i]=value>>>(littleEndian?i:3-i)*8&255}}Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value}else objectWriteUInt32(this,value,offset,true);return offset+4};Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value}else objectWriteUInt32(this,value,offset,false);return offset+4};Buffer.prototype.writeInt8=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);if(value<0)value=255+value+1;this[offset]=value;return offset+1};Buffer.prototype.writeInt16LE=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value;this[offset+1]=value>>>8}else objectWriteUInt16(this,value,offset,true);return offset+2};Buffer.prototype.writeInt16BE=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value}else objectWriteUInt16(this,value,offset,false);return offset+2};Buffer.prototype.writeInt32LE=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24}else objectWriteUInt32(this,value,offset,true);return offset+4};Buffer.prototype.writeInt32BE=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value}else objectWriteUInt32(this,value,offset,false);return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(value>max||value<min)throw new TypeError("value is out of bounds");if(offset+ext>buf.length)throw new TypeError("index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert)checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38);ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert)checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308);ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function(target,target_start,start,end){var source=this;if(!start)start=0;if(!end&&end!==0)end=this.length;if(!target_start)target_start=0;if(end===start)return;if(target.length===0||source.length===0)return;if(end<start)throw new TypeError("sourceEnd < sourceStart");if(target_start<0||target_start>=target.length)throw new TypeError("targetStart out of bounds");if(start<0||start>=source.length)throw new TypeError("sourceStart out of bounds");if(end<0||end>source.length)throw new TypeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-target_start<end-start)end=target.length-target_start+start;var len=end-start;if(len<100||!Buffer.TYPED_ARRAY_SUPPORT){for(var i=0;i<len;i++){target[i+target_start]=this[i+start]}}else{target._set(this.subarray(start,start+len),target_start)}};Buffer.prototype.fill=function(value,start,end){if(!value)value=0;if(!start)start=0;if(!end)end=this.length;if(end<start)throw new TypeError("end < start");if(end===start)return;if(this.length===0)return;if(start<0||start>=this.length)throw new TypeError("start out of bounds");if(end<0||end>this.length)throw new TypeError("end out of bounds");var i;if(typeof value==="number"){for(i=start;i<end;i++){this[i]=value}}else{var bytes=utf8ToBytes(value.toString());var len=bytes.length;for(i=start;i<end;i++){this[i]=bytes[i%len]}}return this};Buffer.prototype.toArrayBuffer=function(){if(typeof Uint8Array!=="undefined"){if(Buffer.TYPED_ARRAY_SUPPORT){return new Buffer(this).buffer}else{var buf=new Uint8Array(this.length);for(var i=0,len=buf.length;i<len;i+=1){buf[i]=this[i]}return buf.buffer}}else{throw new TypeError("Buffer.toArrayBuffer not supported in this browser")}};var BP=Buffer.prototype;Buffer._augment=function(arr){arr._isBuffer=true;arr._get=arr.get;arr._set=arr.set;arr.get=BP.get;arr.set=BP.set;arr.write=BP.write;arr.toString=BP.toString;arr.toLocaleString=BP.toString;arr.toJSON=BP.toJSON;arr.equals=BP.equals;arr.compare=BP.compare;arr.copy=BP.copy;arr.slice=BP.slice;arr.readUInt8=BP.readUInt8;arr.readUInt16LE=BP.readUInt16LE;arr.readUInt16BE=BP.readUInt16BE;arr.readUInt32LE=BP.readUInt32LE;arr.readUInt32BE=BP.readUInt32BE;arr.readInt8=BP.readInt8;arr.readInt16LE=BP.readInt16LE;arr.readInt16BE=BP.readInt16BE;arr.readInt32LE=BP.readInt32LE;arr.readInt32BE=BP.readInt32BE;arr.readFloatLE=BP.readFloatLE;arr.readFloatBE=BP.readFloatBE;arr.readDoubleLE=BP.readDoubleLE;arr.readDoubleBE=BP.readDoubleBE;arr.writeUInt8=BP.writeUInt8;arr.writeUInt16LE=BP.writeUInt16LE;arr.writeUInt16BE=BP.writeUInt16BE;arr.writeUInt32LE=BP.writeUInt32LE;arr.writeUInt32BE=BP.writeUInt32BE;arr.writeInt8=BP.writeInt8;arr.writeInt16LE=BP.writeInt16LE;arr.writeInt16BE=BP.writeInt16BE;arr.writeInt32LE=BP.writeInt32LE;arr.writeInt32BE=BP.writeInt32BE;arr.writeFloatLE=BP.writeFloatLE;arr.writeFloatBE=BP.writeFloatBE;arr.writeDoubleLE=BP.writeDoubleLE;arr.writeDoubleBE=BP.writeDoubleBE;arr.fill=BP.fill;arr.inspect=BP.inspect;arr.toArrayBuffer=BP.toArrayBuffer;return arr};var INVALID_BASE64_RE=/[^+\/0-9A-z]/g;function base64clean(str){str=stringtrim(str).replace(INVALID_BASE64_RE,"");while(str.length%4!==0){str=str+"="}return str}function stringtrim(str){if(str.trim)return str.trim();return str.replace(/^\s+|\s+$/g,"")}function isArrayish(subject){return isArray(subject)||Buffer.isBuffer(subject)||subject&&typeof subject==="object"&&typeof subject.length==="number"}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++){var b=str.charCodeAt(i);if(b<=127){byteArray.push(b)}else{var start=i;if(b>=55296&&b<=57343)i++;var h=encodeURIComponent(str.slice(start,i+1)).substr(1).split("%");for(var j=0;j<h.length;j++){byteArray.push(parseInt(h[j],16))}}}return byteArray}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;i++){c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(str)}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;i++){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}function decodeUtf8Char(str){try{return decodeURIComponent(str)}catch(err){return String.fromCharCode(65533)}}},{"base64-js":66,ieee754:67,"is-array":68}],66:[function(require,module,exports){var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";(function(exports){"use strict";var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var PLUS="+".charCodeAt(0);var SLASH="/".charCodeAt(0);var NUMBER="0".charCodeAt(0);var LOWER="a".charCodeAt(0);var UPPER="A".charCodeAt(0);function decode(elt){var code=elt.charCodeAt(0);if(code===PLUS)return 62;if(code===SLASH)return 63;if(code<NUMBER)return-1;if(code<NUMBER+10)return code-NUMBER+26+26;if(code<UPPER+26)return code-UPPER;if(code<LOWER+26)return code-LOWER+26}function b64ToByteArray(b64){var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var len=b64.length;placeHolders="="===b64.charAt(len-2)?2:"="===b64.charAt(len-1)?1:0;arr=new Arr(b64.length*3/4-placeHolders);l=placeHolders>0?b64.length-4:b64.length;var L=0;function push(v){arr[L++]=v}for(i=0,j=0;i<l;i+=4,j+=3){tmp=decode(b64.charAt(i))<<18|decode(b64.charAt(i+1))<<12|decode(b64.charAt(i+2))<<6|decode(b64.charAt(i+3));push((tmp&16711680)>>16);push((tmp&65280)>>8);push(tmp&255)}if(placeHolders===2){tmp=decode(b64.charAt(i))<<2|decode(b64.charAt(i+1))>>4;push(tmp&255)}else if(placeHolders===1){tmp=decode(b64.charAt(i))<<10|decode(b64.charAt(i+1))<<4|decode(b64.charAt(i+2))>>2;push(tmp>>8&255);push(tmp&255)}return arr}function uint8ToBase64(uint8){var i,extraBytes=uint8.length%3,output="",temp,length;function encode(num){return lookup.charAt(num)}function tripletToBase64(num){return encode(num>>18&63)+encode(num>>12&63)+encode(num>>6&63)+encode(num&63)}for(i=0,length=uint8.length-extraBytes;i<length;i+=3){temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2];output+=tripletToBase64(temp)}switch(extraBytes){case 1:temp=uint8[uint8.length-1];output+=encode(temp>>2);output+=encode(temp<<4&63);output+="==";break;case 2:temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1];output+=encode(temp>>10);output+=encode(temp>>4&63);output+=encode(temp<<2&63);output+="=";break}return output}exports.toByteArray=b64ToByteArray;exports.fromByteArray=uint8ToBase64})(typeof exports==="undefined"?this.base64js={}:exports)},{}],67:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8);m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8);if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8);e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=s*128}},{}],68:[function(require,module,exports){var isArray=Array.isArray;var str=Object.prototype.toString;module.exports=isArray||function(val){return!!val&&"[object Array]"==str.call(val)}},{}],69:[function(require,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}throw TypeError('Uncaught, unspecified "error" event.')}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];handler.apply(this,args)}}else if(isObject(handler)){len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){var m;if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-->0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else{while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.listenerCount=function(emitter,type){var ret;if(!emitter._events||!emitter._events[type])ret=0;else if(isFunction(emitter._events[type]))ret=1;else ret=emitter._events[type].length;return ret};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}],70:[function(require,module,exports){var http=module.exports;var EventEmitter=require("events").EventEmitter;var Request=require("./lib/request");var url=require("url");http.request=function(params,cb){if(typeof params==="string"){params=url.parse(params)}if(!params)params={};if(!params.host&&!params.port){params.port=parseInt(window.location.port,10)}if(!params.host&&params.hostname){params.host=params.hostname}if(!params.protocol){if(params.scheme){params.protocol=params.scheme+":"}else{params.protocol=window.location.protocol}}if(!params.host){params.host=window.location.hostname||window.location.host}if(/:/.test(params.host)){if(!params.port){params.port=params.host.split(":")[1]}params.host=params.host.split(":")[0]}if(!params.port)params.port=params.protocol=="https:"?443:80;var req=new Request(new xhrHttp,params);if(cb)req.on("response",cb);return req};http.get=function(params,cb){params.method="GET";var req=http.request(params,cb);req.end();return req};http.Agent=function(){};http.Agent.defaultMaxSockets=4;var xhrHttp=function(){if(typeof window==="undefined"){throw new Error("no window object present")}else if(window.XMLHttpRequest){return window.XMLHttpRequest}else if(window.ActiveXObject){var axs=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];for(var i=0;i<axs.length;i++){try{var ax=new window.ActiveXObject(axs[i]);return function(){if(ax){var ax_=ax;ax=null;return ax_}else{return new window.ActiveXObject(axs[i])}}}catch(e){}}throw new Error("ajax not supported in this browser")}else{throw new Error("ajax not supported in this browser")}}();http.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}
},{"./lib/request":71,events:69,url:94}],71:[function(require,module,exports){var Stream=require("stream");var Response=require("./response");var Base64=require("Base64");var inherits=require("inherits");var Request=module.exports=function(xhr,params){var self=this;self.writable=true;self.xhr=xhr;self.body=[];self.uri=(params.protocol||"http:")+"//"+params.host+(params.port?":"+params.port:"")+(params.path||"/");if(typeof params.withCredentials==="undefined"){params.withCredentials=true}try{xhr.withCredentials=params.withCredentials}catch(e){}if(params.responseType)try{xhr.responseType=params.responseType}catch(e){}xhr.open(params.method||"GET",self.uri,true);xhr.onerror=function(event){self.emit("error",new Error("Network error"))};self._headers={};if(params.headers){var keys=objectKeys(params.headers);for(var i=0;i<keys.length;i++){var key=keys[i];if(!self.isSafeRequestHeader(key))continue;var value=params.headers[key];self.setHeader(key,value)}}if(params.auth){this.setHeader("Authorization","Basic "+Base64.btoa(params.auth))}var res=new Response;res.on("close",function(){self.emit("close")});res.on("ready",function(){self.emit("response",res)});res.on("error",function(err){self.emit("error",err)});xhr.onreadystatechange=function(){if(xhr.__aborted)return;res.handle(xhr)}};inherits(Request,Stream);Request.prototype.setHeader=function(key,value){this._headers[key.toLowerCase()]=value};Request.prototype.getHeader=function(key){return this._headers[key.toLowerCase()]};Request.prototype.removeHeader=function(key){delete this._headers[key.toLowerCase()]};Request.prototype.write=function(s){this.body.push(s)};Request.prototype.destroy=function(s){this.xhr.__aborted=true;this.xhr.abort();this.emit("close")};Request.prototype.end=function(s){if(s!==undefined)this.body.push(s);var keys=objectKeys(this._headers);for(var i=0;i<keys.length;i++){var key=keys[i];var value=this._headers[key];if(isArray(value)){for(var j=0;j<value.length;j++){this.xhr.setRequestHeader(key,value[j])}}else this.xhr.setRequestHeader(key,value)}if(this.body.length===0){this.xhr.send("")}else if(typeof this.body[0]==="string"){this.xhr.send(this.body.join(""))}else if(isArray(this.body[0])){var body=[];for(var i=0;i<this.body.length;i++){body.push.apply(body,this.body[i])}this.xhr.send(body)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){var len=0;for(var i=0;i<this.body.length;i++){len+=this.body[i].length}var body=new this.body[0].constructor(len);var k=0;for(var i=0;i<this.body.length;i++){var b=this.body[i];for(var j=0;j<b.length;j++){body[k++]=b[j]}}this.xhr.send(body)}else if(isXHR2Compatible(this.body[0])){this.xhr.send(this.body[0])}else{var body="";for(var i=0;i<this.body.length;i++){body+=this.body[i].toString()}this.xhr.send(body)}};Request.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];Request.prototype.isSafeRequestHeader=function(headerName){if(!headerName)return false;return indexOf(Request.unsafeHeaders,headerName.toLowerCase())===-1};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};var indexOf=function(xs,x){if(xs.indexOf)return xs.indexOf(x);for(var i=0;i<xs.length;i++){if(xs[i]===x)return i}return-1};var isXHR2Compatible=function(obj){if(typeof Blob!=="undefined"&&obj instanceof Blob)return true;if(typeof ArrayBuffer!=="undefined"&&obj instanceof ArrayBuffer)return true;if(typeof FormData!=="undefined"&&obj instanceof FormData)return true}},{"./response":72,Base64:73,inherits:74,stream:93}],72:[function(require,module,exports){var Stream=require("stream");var util=require("util");var Response=module.exports=function(res){this.offset=0;this.readable=true};util.inherits(Response,Stream);var capable={streaming:true,status2:true};function parseHeaders(res){var lines=res.getAllResponseHeaders().split(/\r?\n/);var headers={};for(var i=0;i<lines.length;i++){var line=lines[i];if(line==="")continue;var m=line.match(/^([^:]+):\s*(.*)/);if(m){var key=m[1].toLowerCase(),value=m[2];if(headers[key]!==undefined){if(isArray(headers[key])){headers[key].push(value)}else{headers[key]=[headers[key],value]}}else{headers[key]=value}}else{headers[line]=true}}return headers}Response.prototype.getResponse=function(xhr){var respType=String(xhr.responseType).toLowerCase();if(respType==="blob")return xhr.responseBlob||xhr.response;if(respType==="arraybuffer")return xhr.response;return xhr.responseText};Response.prototype.getHeader=function(key){return this.headers[key.toLowerCase()]};Response.prototype.handle=function(res){if(res.readyState===2&&capable.status2){try{this.statusCode=res.status;this.headers=parseHeaders(res)}catch(err){capable.status2=false}if(capable.status2){this.emit("ready")}}else if(capable.streaming&&res.readyState===3){try{if(!this.statusCode){this.statusCode=res.status;this.headers=parseHeaders(res);this.emit("ready")}}catch(err){}try{this._emitData(res)}catch(err){capable.streaming=false}}else if(res.readyState===4){if(!this.statusCode){this.statusCode=res.status;this.emit("ready")}this._emitData(res);if(res.error){this.emit("error",this.getResponse(res))}else this.emit("end");this.emit("close")}};Response.prototype._emitData=function(res){var respBody=this.getResponse(res);if(respBody.toString().match(/ArrayBuffer/)){this.emit("data",new Uint8Array(respBody,this.offset));this.offset=respBody.byteLength;return}if(respBody.length>this.offset){this.emit("data",respBody.slice(this.offset));this.offset=respBody.length}};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},{stream:93,util:96}],73:[function(require,module,exports){(function(){var object=typeof exports!="undefined"?exports:this;var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function InvalidCharacterError(message){this.message=message}InvalidCharacterError.prototype=new Error;InvalidCharacterError.prototype.name="InvalidCharacterError";object.btoa||(object.btoa=function(input){for(var block,charCode,idx=0,map=chars,output="";input.charAt(idx|0)||(map="=",idx%1);output+=map.charAt(63&block>>8-idx%1*8)){charCode=input.charCodeAt(idx+=3/4);if(charCode>255){throw new InvalidCharacterError("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.")}block=block<<8|charCode}return output});object.atob||(object.atob=function(input){input=input.replace(/=+$/,"");if(input.length%4==1){throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.")}for(var bc=0,bs,buffer,idx=0,output="";buffer=input.charAt(idx++);~buffer&&(bs=bc%4?bs*64+buffer:buffer,bc++%4)?output+=String.fromCharCode(255&bs>>(-2*bc&6)):0){buffer=chars.indexOf(buffer)}return output})})()},{}],74:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],75:[function(require,module,exports){module.exports=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=="[object Array]"}},{}],76:[function(require,module,exports){var process=module.exports={};process.nextTick=function(){var canSetImmediate=typeof window!=="undefined"&&window.setImmediate;var canPost=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(canSetImmediate){return function(f){return window.setImmediate(f)}}if(canPost){var queue=[];window.addEventListener("message",function(ev){var source=ev.source;if((source===window||source===null)&&ev.data==="process-tick"){ev.stopPropagation();if(queue.length>0){var fn=queue.shift();fn()}}},true);return function nextTick(fn){queue.push(fn);window.postMessage("process-tick","*")}}return function nextTick(fn){setTimeout(fn,0)}}();process.title="browser";process.browser=true;process.env={};process.argv=[];function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")}},{}],77:[function(require,module,exports){(function(global){(function(root){var freeExports=typeof exports=="object"&&exports;var freeModule=typeof module=="object"&&module&&module.exports==freeExports&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^ -~]/,regexSeparators=/\x2E|\u3002|\uFF0E|\uFF61/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw RangeError(errors[type])}function map(array,fn){var length=array.length;while(length--){array[length]=fn(array[length])}return array}function mapDomain(string,fn){return map(string.split(regexSeparators),fn).join(".")}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output}).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(domain){return mapDomain(domain,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(domain){return mapDomain(domain,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}punycode={version:"1.2.4",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define("punycode",function(){return punycode})}else if(freeExports&&!freeExports.nodeType){if(freeModule){freeModule.exports=punycode}else{for(key in punycode){punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key])}}}else{root.punycode=punycode}})(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],78:[function(require,module,exports){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v}else if(isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},{}],79:[function(require,module,exports){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if(typeof obj==="object"){return map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(isArray(obj[k])){return map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}}).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++){res.push(f(xs[i],i))}return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))res.push(key)}return res}},{}],80:[function(require,module,exports){"use strict";exports.decode=exports.parse=require("./decode");exports.encode=exports.stringify=require("./encode")},{"./decode":78,"./encode":79}],81:[function(require,module,exports){module.exports=require("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":82}],82:[function(require,module,exports){(function(process){module.exports=Duplex;var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};var util=require("core-util-is");util.inherits=require("inherits");var Readable=require("./_stream_readable");var Writable=require("./_stream_writable");util.inherits(Duplex,Readable);forEach(objectKeys(Writable.prototype),function(method){if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method]});function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once("end",onend)}function onend(){if(this.allowHalfOpen||this._writableState.ended)return;process.nextTick(this.end.bind(this))}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++){f(xs[i],i)}}}).call(this,require("_process"))},{"./_stream_readable":84,"./_stream_writable":86,_process:76,"core-util-is":87,inherits:74}],83:[function(require,module,exports){module.exports=PassThrough;var Transform=require("./_stream_transform");var util=require("core-util-is");util.inherits=require("inherits");util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},{"./_stream_transform":85,"core-util-is":87,inherits:74}],84:[function(require,module,exports){(function(process){module.exports=Readable;var isArray=require("isarray");var Buffer=require("buffer").Buffer;Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter;if(!EE.listenerCount)EE.listenerCount=function(emitter,type){return emitter.listeners(type).length};var Stream=require("stream");var util=require("core-util-is");util.inherits=require("inherits");var StringDecoder;util.inherits(Readable,Stream);function ReadableState(options,stream){options=options||{};var hwm=options.highWaterMark;this.highWaterMark=hwm||hwm===0?hwm:16*1024;this.highWaterMark=~~this.highWaterMark;this.buffer=[];this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=false;this.ended=false;this.endEmitted=false;this.reading=false;this.calledRead=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.objectMode=!!options.objectMode;this.defaultEncoding=options.defaultEncoding||"utf8";this.ranOut=false;this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=require("string_decoder/").StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding}}function Readable(options){if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=true;Stream.call(this)}Readable.prototype.push=function(chunk,encoding){var state=this._readableState;if(typeof chunk==="string"&&!state.objectMode){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=new Buffer(chunk,encoding);encoding=""}}return readableAddChunk(this,state,chunk,encoding,false)};Readable.prototype.unshift=function(chunk){var state=this._readableState;return readableAddChunk(this,state,chunk,"",true)};function readableAddChunk(stream,state,chunk,encoding,addToFront){var er=chunkInvalid(state,chunk);if(er){stream.emit("error",er)}else if(chunk===null||chunk===undefined){state.reading=false;if(!state.ended)onEofChunk(stream,state)}else if(state.objectMode||chunk&&chunk.length>0){if(state.ended&&!addToFront){var e=new Error("stream.push() after EOF");stream.emit("error",e)}else if(state.endEmitted&&addToFront){var e=new Error("stream.unshift() after end event");stream.emit("error",e)}else{if(state.decoder&&!addToFront&&!encoding)chunk=state.decoder.write(chunk);state.length+=state.objectMode?1:chunk.length;if(addToFront){state.buffer.unshift(chunk)}else{state.reading=false;state.buffer.push(chunk)}if(state.needReadable)emitReadable(stream);maybeReadMore(stream,state)}}else if(!addToFront){state.reading=false}return needMoreData(state)}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0)}Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=require("string_decoder/").StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc};var MAX_HWM=8388608;function roundUpToNextPowerOf2(n){if(n>=MAX_HWM){n=MAX_HWM}else{n--;for(var p=1;p<32;p<<=1)n|=n>>p;n++}return n}function howMuchToRead(n,state){if(state.length===0&&state.ended)return 0;if(state.objectMode)return n===0?0:1;if(n===null||isNaN(n)){if(state.flowing&&state.buffer.length)return state.buffer[0].length;else return state.length}if(n<=0)return 0;if(n>state.highWaterMark)state.highWaterMark=roundUpToNextPowerOf2(n);if(n>state.length){if(!state.ended){state.needReadable=true;return 0}else return state.length}return n}Readable.prototype.read=function(n){var state=this._readableState;state.calledRead=true;var nOrig=n;var ret;if(typeof n!=="number"||n>0)state.emittedReadable=false;if(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){emitReadable(this);return null}n=howMuchToRead(n,state);if(n===0&&state.ended){ret=null;if(state.length>0&&state.decoder){ret=fromList(n,state);state.length-=ret.length}if(state.length===0)endReadable(this);return ret}var doRead=state.needReadable;if(state.length-n<=state.highWaterMark)doRead=true;if(state.ended||state.reading)doRead=false;if(doRead){state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false}if(doRead&&!state.reading)n=howMuchToRead(nOrig,state);if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0}state.length-=n;if(state.length===0&&!state.ended)state.needReadable=true;if(state.ended&&!state.endEmitted&&state.length===0)endReadable(this);return ret};function chunkInvalid(state,chunk){var er=null;if(!Buffer.isBuffer(chunk)&&"string"!==typeof chunk&&chunk!==null&&chunk!==undefined&&!state.objectMode){er=new TypeError("Invalid non-string/buffer chunk")}return er}function onEofChunk(stream,state){if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length}}state.ended=true;if(state.length>0)emitReadable(stream);else endReadable(stream)}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(state.emittedReadable)return;state.emittedReadable=true;if(state.sync)process.nextTick(function(){emitReadable_(stream)});else emitReadable_(stream)}function emitReadable_(stream){stream.emit("readable")}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;process.nextTick(function(){maybeReadMore_(stream,state)})}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){stream.read(0);if(len===state.length)break;else len=state.length}state.readingMore=false}Readable.prototype._read=function(n){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break}state.pipesCount+=1;var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:cleanup;if(state.endEmitted)process.nextTick(endFn);else src.once("end",endFn);dest.on("unpipe",onunpipe);function onunpipe(readable){if(readable!==src)return;cleanup()}function onend(){dest.end()}var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);function cleanup(){dest.removeListener("close",onclose);dest.removeListener("finish",onfinish);dest.removeListener("drain",ondrain);dest.removeListener("error",onerror);dest.removeListener("unpipe",onunpipe);src.removeListener("end",onend);src.removeListener("end",cleanup);if(!dest._writableState||dest._writableState.needDrain)ondrain()}function onerror(er){unpipe();dest.removeListener("error",onerror);if(EE.listenerCount(dest,"error")===0)dest.emit("error",er)}if(!dest._events||!dest._events.error)dest.on("error",onerror);else if(isArray(dest._events.error))dest._events.error.unshift(onerror);else dest._events.error=[onerror,dest._events.error];function onclose(){dest.removeListener("finish",onfinish);unpipe()}dest.once("close",onclose);function onfinish(){dest.removeListener("close",onclose);unpipe()}dest.once("finish",onfinish);function unpipe(){src.unpipe(dest)}dest.emit("pipe",src);if(!state.flowing){this.on("readable",pipeOnReadable);state.flowing=true;process.nextTick(function(){flow(src)})}return dest};function pipeOnDrain(src){return function(){var dest=this;var state=src._readableState;state.awaitDrain--;if(state.awaitDrain===0)flow(src)}}function flow(src){var state=src._readableState;var chunk;state.awaitDrain=0;function write(dest,i,list){var written=dest.write(chunk);if(false===written){state.awaitDrain++}}while(state.pipesCount&&null!==(chunk=src.read())){if(state.pipesCount===1)write(state.pipes,0,null);else forEach(state.pipes,write);src.emit("data",chunk);if(state.awaitDrain>0)return}if(state.pipesCount===0){state.flowing=false;if(EE.listenerCount(src,"data")>0)emitDataEvents(src);return}state.ranOut=true}function pipeOnReadable(){if(this._readableState.ranOut){this._readableState.ranOut=false;flow(this)}}Readable.prototype.unpipe=function(dest){var state=this._readableState;if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;this.removeListener("readable",pipeOnReadable);state.flowing=false;if(dest)dest.emit("unpipe",this);return this}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;this.removeListener("readable",pipeOnReadable);state.flowing=false;for(var i=0;i<len;i++)dests[i].emit("unpipe",this);return this}var i=indexOf(state.pipes,dest);if(i===-1)return this;state.pipes.splice(i,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit("unpipe",this);return this};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==="data"&&!this._readableState.flowing)emitDataEvents(this);if(ev==="readable"&&this.readable){var state=this._readableState;if(!state.readableListening){state.readableListening=true;state.emittedReadable=false;state.needReadable=true;if(!state.reading){this.read(0)}else if(state.length){emitReadable(this,state)}}}return res};Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.resume=function(){emitDataEvents(this);this.read(0);this.emit("resume")};Readable.prototype.pause=function(){emitDataEvents(this,true);this.emit("pause")};function emitDataEvents(stream,startPaused){var state=stream._readableState;if(state.flowing){throw new Error("Cannot switch to old mode now.")}var paused=startPaused||false;var readable=false;stream.readable=true;stream.pipe=Stream.prototype.pipe;stream.on=stream.addListener=Stream.prototype.on;stream.on("readable",function(){readable=true;var c;while(!paused&&null!==(c=stream.read()))stream.emit("data",c);if(c===null){readable=false;stream._readableState.needReadable=true}});stream.pause=function(){paused=true;this.emit("pause")};stream.resume=function(){paused=false;if(readable)process.nextTick(function(){stream.emit("readable")});else this.read(0);this.emit("resume")};stream.emit("readable")}Readable.prototype.wrap=function(stream){var state=this._readableState;var paused=false;var self=this;stream.on("end",function(){if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)self.push(chunk)}self.push(null)});stream.on("data",function(chunk){if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=self.push(chunk);if(!ret){paused=true;stream.pause()}});for(var i in stream){if(typeof stream[i]==="function"&&typeof this[i]==="undefined"){this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i)}}var events=["error","close","destroy","pause","resume"];forEach(events,function(ev){stream.on(ev,self.emit.bind(self,ev))});self._read=function(n){if(paused){paused=false;stream.resume()}};return self};Readable._fromList=fromList;function fromList(n,state){var list=state.buffer;var length=state.length;var stringMode=!!state.decoder;var objectMode=!!state.objectMode;var ret;if(list.length===0)return null;if(length===0)ret=null;else if(objectMode)ret=list.shift();else if(!n||n>=length){if(stringMode)ret=list.join("");else ret=Buffer.concat(list,length);list.length=0}else{if(n<list[0].length){var buf=list[0];ret=buf.slice(0,n);list[0]=buf.slice(n)}else if(n===list[0].length){ret=list.shift()}else{if(stringMode)ret="";else ret=new Buffer(n);var c=0;for(var i=0,l=list.length;i<l&&c<n;i++){var buf=list[0];var cpy=Math.min(n-c,buf.length);if(stringMode)ret+=buf.slice(0,cpy);else buf.copy(ret,c,0,cpy);if(cpy<buf.length)list[0]=buf.slice(cpy);else list.shift();c+=cpy}}}return ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error("endReadable called on non-empty stream");if(!state.endEmitted&&state.calledRead){state.ended=true;process.nextTick(function(){if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit("end")}})}}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++){f(xs[i],i)}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i}return-1}}).call(this,require("_process"))},{_process:76,buffer:65,"core-util-is":87,events:69,inherits:74,isarray:75,stream:93,"string_decoder/":88}],85:[function(require,module,exports){module.exports=Transform;var Duplex=require("./_stream_duplex");var util=require("core-util-is");util.inherits=require("inherits");util.inherits(Transform,Duplex);function TransformState(options,stream){this.afterTransform=function(er,data){return afterTransform(stream,er,data)};this.needTransform=false;this.transforming=false;this.writecb=null;this.writechunk=null}function afterTransform(stream,er,data){var ts=stream._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb)return stream.emit("error",new Error("no writecb in Transform class"));ts.writechunk=null;ts.writecb=null;if(data!==null&&data!==undefined)stream.push(data);if(cb)cb(er);var rs=stream._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){stream._read(rs.highWaterMark)}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);var ts=this._transformState=new TransformState(options,this);var stream=this;this._readableState.needReadable=true;this._readableState.sync=false;this.once("finish",function(){if("function"===typeof this._flush)this._flush(function(er){done(stream,er)});else done(stream)})}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding)};Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("not implemented")};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;
ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark)}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)}else{ts.needTransform=true}};function done(stream,er){if(er)return stream.emit("error",er);var ws=stream._writableState;var rs=stream._readableState;var ts=stream._transformState;if(ws.length)throw new Error("calling transform done when ws.length != 0");if(ts.transforming)throw new Error("calling transform done when still transforming");return stream.push(null)}},{"./_stream_duplex":82,"core-util-is":87,inherits:74}],86:[function(require,module,exports){(function(process){module.exports=Writable;var Buffer=require("buffer").Buffer;Writable.WritableState=WritableState;var util=require("core-util-is");util.inherits=require("inherits");var Stream=require("stream");util.inherits(Writable,Stream);function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb}function WritableState(options,stream){options=options||{};var hwm=options.highWaterMark;this.highWaterMark=hwm||hwm===0?hwm:16*1024;this.objectMode=!!options.objectMode;this.highWaterMark=~~this.highWaterMark;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||"utf8";this.length=0;this.writing=false;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er)};this.writecb=null;this.writelen=0;this.buffer=[];this.errorEmitted=false}function Writable(options){var Duplex=require("./_stream_duplex");if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this);this.writable=true;Stream.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function writeAfterEnd(stream,state,cb){var er=new Error("write after end");stream.emit("error",er);process.nextTick(function(){cb(er)})}function validChunk(stream,state,chunk,cb){var valid=true;if(!Buffer.isBuffer(chunk)&&"string"!==typeof chunk&&chunk!==null&&chunk!==undefined&&!state.objectMode){var er=new TypeError("Invalid non-string/buffer chunk");stream.emit("error",er);process.nextTick(function(){cb(er)});valid=false}return valid}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;if(typeof encoding==="function"){cb=encoding;encoding=null}if(Buffer.isBuffer(chunk))encoding="buffer";else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=="function")cb=function(){};if(state.ended)writeAfterEnd(this,state,cb);else if(validChunk(this,state,chunk,cb))ret=writeOrBuffer(this,state,chunk,encoding,cb);return ret};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==="string"){chunk=new Buffer(chunk,encoding)}return chunk}function writeOrBuffer(stream,state,chunk,encoding,cb){chunk=decodeChunk(state,chunk,encoding);if(Buffer.isBuffer(chunk))encoding="buffer";var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing)state.buffer.push(new WriteReq(chunk,encoding,cb));else doWrite(stream,state,len,chunk,encoding,cb);return ret}function doWrite(stream,state,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;stream._write(chunk,encoding,state.onwrite);state.sync=false}function onwriteError(stream,state,sync,er,cb){if(sync)process.nextTick(function(){cb(er)});else cb(er);stream._writableState.errorEmitted=true;stream.emit("error",er)}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(stream,state);if(!finished&&!state.bufferProcessing&&state.buffer.length)clearBuffer(stream,state);if(sync){process.nextTick(function(){afterWrite(stream,state,finished,cb)})}else{afterWrite(stream,state,finished,cb)}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);cb();if(finished)finishMaybe(stream,state)}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit("drain")}}function clearBuffer(stream,state){state.bufferProcessing=true;for(var c=0;c<state.buffer.length;c++){var entry=state.buffer[c];var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,len,chunk,encoding,cb);if(state.writing){c++;break}}state.bufferProcessing=false;if(c<state.buffer.length)state.buffer=state.buffer.slice(c);else state.buffer.length=0}Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("not implemented"))};Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==="function"){cb=chunk;chunk=null;encoding=null}else if(typeof encoding==="function"){cb=encoding;encoding=null}if(typeof chunk!=="undefined"&&chunk!==null)this.write(chunk,encoding);if(!state.ending&&!state.finished)endWritable(this,state,cb)};function needFinish(stream,state){return state.ending&&state.length===0&&!state.finished&&!state.writing}function finishMaybe(stream,state){var need=needFinish(stream,state);if(need){state.finished=true;stream.emit("finish")}return need}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)process.nextTick(cb);else stream.once("finish",cb)}state.ended=true}}).call(this,require("_process"))},{"./_stream_duplex":82,_process:76,buffer:65,"core-util-is":87,inherits:74,stream:93}],87:[function(require,module,exports){(function(Buffer){function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;function isBuffer(arg){return Buffer.isBuffer(arg)}exports.isBuffer=isBuffer;function objectToString(o){return Object.prototype.toString.call(o)}}).call(this,require("buffer").Buffer)},{buffer:65}],88:[function(require,module,exports){var Buffer=require("buffer").Buffer;var isBufferEncoding=Buffer.isEncoding||function(encoding){switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function assertEncoding(encoding){if(encoding&&!isBufferEncoding(encoding)){throw new Error("Unknown encoding: "+encoding)}}var StringDecoder=exports.StringDecoder=function(encoding){this.encoding=(encoding||"utf8").toLowerCase().replace(/[-_]/,"");assertEncoding(encoding);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2;this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3;this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return}this.charBuffer=new Buffer(6);this.charReceived=0;this.charLength=0};StringDecoder.prototype.write=function(buffer){var charStr="";while(this.charLength){var available=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;buffer.copy(this.charBuffer,this.charReceived,0,available);this.charReceived+=available;if(this.charReceived<this.charLength){return""}buffer=buffer.slice(available,buffer.length);charStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var charCode=charStr.charCodeAt(charStr.length-1);if(charCode>=55296&&charCode<=56319){this.charLength+=this.surrogateSize;charStr="";continue}this.charReceived=this.charLength=0;if(buffer.length===0){return charStr}break}this.detectIncompleteChar(buffer);var end=buffer.length;if(this.charLength){buffer.copy(this.charBuffer,0,buffer.length-this.charReceived,end);end-=this.charReceived}charStr+=buffer.toString(this.encoding,0,end);var end=charStr.length-1;var charCode=charStr.charCodeAt(end);if(charCode>=55296&&charCode<=56319){var size=this.surrogateSize;this.charLength+=size;this.charReceived+=size;this.charBuffer.copy(this.charBuffer,size,0,size);buffer.copy(this.charBuffer,0,0,size);return charStr.substring(0,end)}return charStr};StringDecoder.prototype.detectIncompleteChar=function(buffer){var i=buffer.length>=3?3:buffer.length;for(;i>0;i--){var c=buffer[buffer.length-i];if(i==1&&c>>5==6){this.charLength=2;break}if(i<=2&&c>>4==14){this.charLength=3;break}if(i<=3&&c>>3==30){this.charLength=4;break}}this.charReceived=i};StringDecoder.prototype.end=function(buffer){var res="";if(buffer&&buffer.length)res=this.write(buffer);if(this.charReceived){var cr=this.charReceived;var buf=this.charBuffer;var enc=this.encoding;res+=buf.slice(0,cr).toString(enc)}return res};function passThroughWrite(buffer){return buffer.toString(this.encoding)}function utf16DetectIncompleteChar(buffer){this.charReceived=buffer.length%2;this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(buffer){this.charReceived=buffer.length%3;this.charLength=this.charReceived?3:0}},{buffer:65}],89:[function(require,module,exports){module.exports=require("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":83}],90:[function(require,module,exports){exports=module.exports=require("./lib/_stream_readable.js");exports.Readable=exports;exports.Writable=require("./lib/_stream_writable.js");exports.Duplex=require("./lib/_stream_duplex.js");exports.Transform=require("./lib/_stream_transform.js");exports.PassThrough=require("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":82,"./lib/_stream_passthrough.js":83,"./lib/_stream_readable.js":84,"./lib/_stream_transform.js":85,"./lib/_stream_writable.js":86}],91:[function(require,module,exports){module.exports=require("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":85}],92:[function(require,module,exports){module.exports=require("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":86}],93:[function(require,module,exports){module.exports=Stream;var EE=require("events").EventEmitter;var inherits=require("inherits");inherits(Stream,EE);Stream.Readable=require("readable-stream/readable.js");Stream.Writable=require("readable-stream/writable.js");Stream.Duplex=require("readable-stream/duplex.js");Stream.Transform=require("readable-stream/transform.js");Stream.PassThrough=require("readable-stream/passthrough.js");Stream.Stream=Stream;function Stream(){EE.call(this)}Stream.prototype.pipe=function(dest,options){var source=this;function ondata(chunk){if(dest.writable){if(false===dest.write(chunk)&&source.pause){source.pause()}}}source.on("data",ondata);function ondrain(){if(source.readable&&source.resume){source.resume()}}dest.on("drain",ondrain);if(!dest._isStdio&&(!options||options.end!==false)){source.on("end",onend);source.on("close",onclose)}var didOnEnd=false;function onend(){if(didOnEnd)return;didOnEnd=true;dest.end()}function onclose(){if(didOnEnd)return;didOnEnd=true;if(typeof dest.destroy==="function")dest.destroy()}function onerror(er){cleanup();if(EE.listenerCount(this,"error")===0){throw er}}source.on("error",onerror);dest.on("error",onerror);function cleanup(){source.removeListener("data",ondata);dest.removeListener("drain",ondrain);source.removeListener("end",onend);source.removeListener("close",onclose);source.removeListener("error",onerror);dest.removeListener("error",onerror);source.removeListener("end",cleanup);source.removeListener("close",cleanup);dest.removeListener("close",cleanup)}source.on("end",cleanup);source.on("close",cleanup);dest.on("close",cleanup);dest.emit("pipe",source);return dest}},{events:69,inherits:74,"readable-stream/duplex.js":81,"readable-stream/passthrough.js":89,"readable-stream/readable.js":90,"readable-stream/transform.js":91,"readable-stream/writable.js":92}],94:[function(require,module,exports){var punycode=require("punycode");exports.parse=urlParse;exports.resolve=urlResolve;exports.resolveObject=urlResolveObject;exports.format=urlFormat;exports.Url=Url;function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,delims=["<",">",'"',"`"," ","\r","\n","	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:true,"javascript:":true},hostlessProtocol={javascript:true,"javascript:":true},slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},querystring=require("querystring");function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&isObject(url)&&url instanceof Url)return url;var u=new Url;u.parse(url,parseQueryString,slashesDenoteHost);return u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+typeof url)}var rest=url;rest=rest.trim();var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==="//";if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf("@")}else{atSign=rest.lastIndexOf("@",hostEnd)}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth)}hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}if(hostEnd===-1)hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart="";for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+="x"}else{newpart+=part[j]}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2])}if(notHost.length){rest="/"+notHost.join(".")+rest}this.hostname=validParts.join(".");break}}}}if(this.hostname.length>hostnameMaxLen){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!ipv6Hostname){var domainArray=this.hostname.split(".");var newOut=[];for(var i=0;i<domainArray.length;++i){var s=domainArray[i];newOut.push(s.match(/[^A-Za-z0-9_-]/)?"xn--"+punycode.encode(s):s)}this.hostname=newOut.join(".")}var p=this.port?":"+this.port:"";var h=this.hostname||"";this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=="/"){rest="/"+rest}}}if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae)}rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash)}var qm=rest.indexOf("?");if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query)}rest=rest.slice(0,qm)}else if(parseQueryString){this.search="";this.query={}}if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var p=this.pathname||"";var s=this.search||"";this.path=p+s}this.href=this.format();return this};function urlFormat(obj){if(isString(obj))obj=urlParse(obj);if(!(obj instanceof Url))return Url.prototype.format.call(obj);return obj.format()}Url.prototype.format=function(){var auth=this.auth||"";if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,":");auth+="@"}var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=false,query="";if(this.host){host=auth+this.host}else if(this.hostname){host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){host+=":"+this.port}}if(this.query&&isObject(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query)}var search=this.search||query&&"?"+query||"";if(protocol&&protocol.substr(-1)!==":")protocol+=":";if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host="//"+(host||"");if(pathname&&pathname.charAt(0)!=="/")pathname="/"+pathname}else if(!host){host=""}if(hash&&hash.charAt(0)!=="#")hash="#"+hash;if(search&&search.charAt(0)!=="?")search="?"+search;pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)});search=search.replace("#","%23");return protocol+host+pathname+search+hash};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative)}Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format()};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative)}Url.prototype.resolveObject=function(relative){if(isString(relative)){var rel=new Url;rel.parse(relative,false,true);relative=rel}var result=new Url;Object.keys(this).forEach(function(k){result[k]=this[k]},this);result.hash=relative.hash;if(relative.href===""){result.href=result.format();return result}if(relative.slashes&&!relative.protocol){Object.keys(relative).forEach(function(k){if(k!=="protocol")result[k]=relative[k]});if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname="/"}result.href=result.format();return result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){Object.keys(relative).forEach(function(k){result[k]=relative[k]});result.href=result.format();return result}result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||"").split("/");while(relPath.length&&!(relative.host=relPath.shift()));if(!relative.host)relative.host="";if(!relative.hostname)relative.hostname="";if(relPath[0]!=="")relPath.unshift("");if(relPath.length<2)relPath.unshift("");result.pathname=relPath.join("/")}else{result.pathname=relative.pathname}result.search=relative.search;result.query=relative.query;result.host=relative.host||"";result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||"";var s=result.search||"";result.path=p+s}result.slashes=result.slashes||relative.slashes;result.href=result.format();return result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname="";result.port=null;if(result.host){if(srcPath[0]==="")srcPath[0]=result.host;else srcPath.unshift(result.host)}result.host="";if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==="")relPath[0]=relative.host;else relPath.unshift(relative.host)}relative.host=null}mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")}if(isRelAbs){result.host=relative.host||relative.host===""?relative.host:result.host;result.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query}else if(!isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}result.search=relative.search;result.query=relative.query;if(!isNull(result.pathname)||!isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.href=result.format();return result}if(!srcPath.length){result.pathname=null;if(result.search){result.path="/"+result.search}else{result.path=null}result.href=result.format();return result}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host)&&(last==="."||last==="..")||last==="";var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last=="."){srcPath.splice(i,1)}else if(last===".."){srcPath.splice(i,1);up++}else if(up){srcPath.splice(i,1);up--}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift("..")}}if(mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charAt(0)!=="/")){srcPath.unshift("")}if(hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"){srcPath.push("")}var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charAt(0)==="/";if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift("")}if(!srcPath.length){result.pathname=null;result.path=null}else{result.pathname=srcPath.join("/")}if(!isNull(result.pathname)||!isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result};Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==":"){this.port=port.substr(1)}host=host.substr(0,host.length-port.length)}if(host)this.hostname=host};function isString(arg){return typeof arg==="string"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isNull(arg){return arg===null}function isNullOrUndefined(arg){return arg==null}},{punycode:77,querystring:80}],95:[function(require,module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==="object"&&typeof arg.copy==="function"&&typeof arg.fill==="function"&&typeof arg.readUInt8==="function"}},{}],96:[function(require,module,exports){(function(process,global){var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}if(process.noDeprecation===true){return fn}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||"";set=set.toUpperCase();if(!debugs[set]){if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null
}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=require("./support/isBuffer");function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=require("inherits");exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":95,_process:76,inherits:74}],97:[function(require,module,exports){module.exports=require("./lib/connect")},{"./lib/connect":98}],98:[function(require,module,exports){var EventEmitter=require("events").EventEmitter;var merge=require("utils-merge");var proto=require("./proto");module.exports=createServer;function createServer(){function app(req,res,next){app.handle(req,res,next)}merge(app,proto);merge(app,EventEmitter.prototype);app.route="/";app.stack=[];return app}},{"./proto":99,events:69,"utils-merge":106}],99:[function(require,module,exports){(function(process){var finalhandler=require("finalhandler");var http=require("http");var debug=require("debug")("connect:dispatcher");var parseUrl=require("parseurl");var app=module.exports={};var env=process.env.NODE_ENV||"development";app.use=function(route,fn){if("string"!=typeof route){fn=route;route="/"}if("function"==typeof fn.handle){var server=fn;server.route=route;fn=function(req,res,next){server.handle(req,res,next)}}if(fn instanceof http.Server){fn=fn.listeners("request")[0]}if("/"==route[route.length-1]){route=route.slice(0,-1)}debug("use %s %s",route||"/",fn.name||"anonymous");this.stack.push({route:route,handle:fn});return this};app.handle=function(req,res,out){var stack=this.stack,search=1+req.url.indexOf("?"),pathlength=search?search-1:req.url.length,fqdn=1+req.url.substr(0,pathlength).indexOf("://"),protohost=fqdn?req.url.substr(0,req.url.indexOf("/",2+fqdn)):"",removed="",slashAdded=false,index=0;var done=out||finalhandler(req,res,{env:env,onerror:logerror});req.originalUrl=req.originalUrl||req.url;function next(err){if(slashAdded){req.url=req.url.substr(1);slashAdded=false}if(removed.length!==0){req.url=protohost+removed+req.url.substr(protohost.length);removed=""}var layer=stack[index++];if(!layer){done(err);return}var path=parseUrl(req).pathname||"/";var route=layer.route;if(path.toLowerCase().substr(0,route.length)!==route.toLowerCase()){return next(err)}var c=path[route.length];if(c!==undefined&&"/"!==c&&"."!==c){return next(err)}if(route.length!==0&&route!=="/"){removed=route;req.url=protohost+req.url.substr(protohost.length+removed.length);if(!fqdn&&req.url[0]!=="/"){req.url="/"+req.url;slashAdded=true}}call(layer.handle,route,err,req,res,next)}next()};app.listen=function(){var server=http.createServer(this);return server.listen.apply(server,arguments)};function call(handle,route,err,req,res,next){var arity=handle.length;var hasError=Boolean(err);debug("%s %s : %s",handle.name||"<anonymous>",route,req.originalUrl);try{if(hasError&&arity===4){handle(err,req,res,next);return}else if(!hasError&&arity<4){handle(req,res,next);return}}catch(e){err=e}next(err)}function logerror(err){if(env!=="test")console.error(err.stack||err.toString())}}).call(this,require("_process"))},{_process:76,debug:100,finalhandler:103,http:70,parseurl:105}],100:[function(require,module,exports){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){localStorage.removeItem("debug")}else{localStorage.debug=namespaces}}catch(e){}}function load(){var r;try{r=localStorage.debug}catch(e){}return r}exports.enable(load())},{"./debug":101}],101:[function(require,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:102}],102:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){var match=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"h":return n*h;case"minutes":case"minute":case"m":return n*m;case"seconds":case"second":case"s":return n*s;case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},{}],103:[function(require,module,exports){(function(process,Buffer){var debug=require("debug")("finalhandler");var escapeHtml=require("escape-html");var http=require("http");var defer=typeof setImmediate==="function"?setImmediate:function(fn){process.nextTick(fn.bind.apply(fn,arguments))};module.exports=finalhandler;function finalhandler(req,res,options){options=options||{};var env=options.env||process.env.NODE_ENV||"development";var onerror=options.onerror;return function(err){var msg;if(err){if(!res.statusCode||res.statusCode<400){res.statusCode=500}if(err.status){res.statusCode=err.status}var msg=env==="production"?http.STATUS_CODES[res.statusCode]:err.stack||err.toString();msg=escapeHtml(msg).replace(/\n/g,"<br>").replace(/  /g," &nbsp;")+"\n"}else{res.statusCode=404;msg="Cannot "+escapeHtml(req.method)+" "+escapeHtml(req.originalUrl||req.url)+"\n"}debug("default %s",res.statusCode);if(err&&onerror){defer(onerror,err,req,res)}if(res._header){return req.socket.destroy()}send(req,res,res.statusCode,msg)}}function send(req,res,status,body){function write(){res.statusCode=status;res.setHeader("X-Content-Type-Options","nosniff");res.setHeader("Content-Type","text/html; charset=utf-8");res.setHeader("Content-Length",Buffer.byteLength(body,"utf8"));if(req.method==="HEAD"){res.end();return}res.end(body,"utf8")}if(!req.readable){write();return}unpipe(req);req.once("end",write);req.resume()}function unpipe(stream){if(typeof stream.unpipe==="function"){stream.unpipe();return}var listener;var listeners=stream.listeners("close");for(var i=0;i<listeners.length;i++){listener=listeners[i];if(listener.name!=="cleanup"&&listener.name!=="onclose"){continue}listener.call(stream)}}}).call(this,require("_process"),require("buffer").Buffer)},{_process:76,buffer:65,debug:100,"escape-html":104,http:70}],104:[function(require,module,exports){module.exports=function(html){return String(html).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},{}],105:[function(require,module,exports){var url=require("url");var parse=url.parse;var Url=url.Url;var simplePathRegExp=/^(\/\/?(?!\/)[^\?#\s]*)(\?[^#\s]*)?$/;module.exports=parseurl;module.exports.original=originalurl;function parseurl(req){var url=req.url;if(url===undefined){return undefined}var parsed=req._parsedUrl;if(fresh(url,parsed)){return parsed}parsed=fastparse(url);parsed._raw=url;return req._parsedUrl=parsed}function originalurl(req){var url=req.originalUrl;if(typeof url!=="string"){return parseurl(req)}var parsed=req._parsedOriginalUrl;if(fresh(url,parsed)){return parsed}parsed=fastparse(url);parsed._raw=url;return req._parsedOriginalUrl=parsed}function fastparse(str){var simplePath=typeof str==="string"&&simplePathRegExp.exec(str);if(simplePath){var pathname=simplePath[1];var search=simplePath[2]||null;var url=Url!==undefined?new Url:{};url.path=str;url.href=str;url.pathname=pathname;url.search=search;url.query=search&&search.substr(1);return url}return parse(str)}function fresh(url,parsedUrl){return typeof parsedUrl==="object"&&parsedUrl!==null&&(Url===undefined||parsedUrl instanceof Url)&&parsedUrl._raw===url}},{url:94}],106:[function(require,module,exports){exports=module.exports=function(a,b){if(a&&b){for(var key in b){a[key]=b[key]}}return a}},{}],107:[function(require,module,exports){var CucumberHTML={};CucumberHTML.DOMFormatter=function(rootNode){var currentUri;var currentFeature;var currentElement;var currentSteps;var currentStepIndex;var currentStep;var $templates=$(CucumberHTML.templates);this.uri=function(uri){currentUri=uri};this.feature=function(feature){currentFeature=blockElement(rootNode,feature,"feature")};this.background=function(background){currentElement=featureElement(background,"background");currentStepIndex=1};this.scenario=function(scenario){currentElement=featureElement(scenario,"scenario");currentStepIndex=1};this.scenarioOutline=function(scenarioOutline){currentElement=featureElement(scenarioOutline,"scenario_outline");currentStepIndex=1};this.step=function(step){var stepElement=$(".step",$templates).clone();stepElement.appendTo(currentSteps);populate(stepElement,step,"step");if(step.doc_string){docString=$(".doc_string",$templates).clone();docString.appendTo(stepElement);docString.text(step.doc_string.value)}if(step.rows){dataTable=$(".data_table",$templates).clone();dataTable.appendTo(stepElement);var tBody=dataTable.find("tbody");$.each(step.rows,function(index,row){var tr=$("<tr></tr>").appendTo(tBody);$.each(row.cells,function(index,cell){var td=$("<td>"+cell+"</td>").appendTo(tBody)})})}};this.examples=function(examples){var examplesElement=blockElement(currentElement.children("details"),examples,"examples");var examplesTable=$(".examples_table",$templates).clone();examplesTable.appendTo(examplesElement.children("details"));$.each(examples.rows,function(index,row){var parent=index==0?examplesTable.find("thead"):examplesTable.find("tbody");var tr=$("<tr></tr>").appendTo(parent);$.each(row.cells,function(index,cell){var td=$("<td>"+cell+"</td>").appendTo(tr)})})};this.match=function(match){currentStep=currentSteps.find("li:nth-child("+currentStepIndex+")");currentStepIndex++};this.result=function(result){currentStep.addClass(result.status);if(result.status=="failed"){populateStepError(currentStep,result.error_message)}currentElement.addClass(result.status);var isLastStep=currentSteps.find("li:nth-child("+currentStepIndex+")").length==0;if(isLastStep){if(currentSteps.find(".failed").length==0){currentElement.find("details").removeAttr("open")}else{currentElement.find("details").attr("open","open")}}};this.embedding=function(mimeType,data){if(mimeType.match(/^image\//)){currentStep.append('<img src="'+data+'">')}else if(mimeType.match(/^video\//)){currentStep.append('<video src="'+data+'" type="'+mimeType+"\" autobuffer controls>Your browser doesn't support video.</video>")}else if(mimeType.match(/^text\//)){this.write(data)}};this.write=function(text){currentStep.append('<pre class="embedded-text">'+text+"</pre>")};this.before=function(before){if(before.status!="passed"){currentElement=featureElement({keyword:"Before",name:"",description:""},"before");currentStepIndex=1;populateStepError($("details",currentElement),before.error_message)}};this.after=function(after){if(after.status!="passed"){currentElement=featureElement({keyword:"After",name:"",description:""},"after");currentStepIndex++;populateStepError($("details",currentElement),after.error_message)}};function featureElement(statement,itemtype){var e=blockElement(currentFeature.children("details"),statement,itemtype);currentSteps=$(".steps",$templates).clone();currentSteps.appendTo(e.children("details"));return e}function blockElement(parent,statement,itemtype){var e=$(".blockelement",$templates).clone();e.appendTo(parent);return populate(e,statement,itemtype)}function populate(e,statement,itemtype){populateTags(e,statement.tags);populateComments(e,statement.comments);e.find(".keyword").text(statement.keyword);e.find(".name").text(statement.name);e.find(".description").text(statement.description);e.attr("itemtype","http://cukes.info/microformat/"+itemtype);e.addClass(itemtype);return e}function populateComments(e,comments){if(comments!==undefined){var commentsNode=$(".comments",$templates).clone().prependTo(e.find(".header"));$.each(comments,function(index,comment){var commentNode=$(".comment",$templates).clone().appendTo(commentsNode);commentNode.text(comment.value)})}}function populateTags(e,tags){if(tags!==undefined){var tagsNode=$(".tags",$templates).clone().prependTo(e.find(".header"));$.each(tags,function(index,tag){var tagNode=$(".tag",$templates).clone().appendTo(tagsNode);tagNode.text(tag.name)})}}function populateStepError(e,error){if(error!==undefined){errorNode=$(".error",$templates).clone().appendTo(e);errorNode.text(error)}}};CucumberHTML.templates='<div>  <section class="blockelement" itemscope>    <details open>      <summary class="header">        <span class="keyword" itemprop="keyword">Keyword</span>: <span itemprop="name" class="name">This is the block name</span>      </summary>      <div itemprop="description" class="description">The description goes here</div>    </details>  </section>  <ol class="steps"></ol>  <ol>    <li class="step"><span class="keyword" itemprop="keyword">Keyword</span><span class="name" itemprop="name">Name</span></li>  </ol>  <pre class="doc_string"></pre>  <pre class="error"></pre>  <table class="data_table">    <tbody>    </tbody>  </table>  <table class="examples_table">    <thead></thead>    <tbody></tbody>  </table>  <section class="embed">    <img itemprop="screenshot" class="screenshot" />  </section>  <div class="tags"></div>  <span class="tag"></span>  <div class="comments"></div>  <div class="comment"></div><div>';if(typeof module!=="undefined"){module.exports=CucumberHTML}else if(typeof define!=="undefined"){define([],function(){return CucumberHTML})}},{}],108:[function(require,module,exports){require("./gherkin/lexer/en");(function(__dirname){module.exports.Lexer=function(lang){return require("./gherkin/lexer/"+lang)};module.exports.connect=function(path){var gherkinFiles=require("connect").static(__dirname);return function(req,res,next){if(req.url.indexOf(path)==0){req.url=req.url.slice(path.length);gherkinFiles(req,res,next)}else{next()}}}}).call(this,"/node_modules\\gherkin\\lib")},{"./gherkin/lexer/en":110,connect:97}],109:[function(require,module,exports){var JSONFormatter=function(io){var feature_hashes=[];var uri,feature_hash,current_step_or_hook;this.done=function(){io.write(JSON.stringify(feature_hashes,null,2))};this.uri=function(_uri){uri=_uri};this.feature=function(feature){feature_hash=feature;feature_hash["uri"]=uri;feature_hashes.push(feature_hash)};this.background=function(background){feature_elements().push(background)};this.scenario=function(scenario){feature_elements().push(scenario)};this.scenario_outline=function(scenario_outline){feature_elements().push(scenario_outline)};this.examples=function(examples){all_examples().push(examples)};this.step=function(step){current_step_or_hook=step;steps().push(current_step_or_hook)};this.match=function(match){current_step_or_hook["match"]=match};this.result=function(result){current_step_or_hook["result"]=result};this.before=function(match,result){add_hook(match,result,"before")};this.after=function(match,result){add_hook(match,result,"after")};this.embedding=function(mime_type,data){embeddings().push({mime_type:mime_type,data:encode64s(data)})};this.write=function(text){output().push(text)};this.eof=function(){};this.append_duration=function(timestamp){if(current_step_or_hook["result"]){timestamp=timestamp*1e9;rshash=current_step_or_hook["result"];rshash["duration"]=timestamp;current_step_or_hook["result"]=rshash}};function add_hook(match,result,hook){if(!feature_element()[hook]){feature_element()[hook]=[]}var hooks=feature_element()[hook];hooks.push({match:match,result:result})}function feature_elements(){if(!feature_hash["elements"]){feature_hash["elements"]=[]}return feature_hash["elements"]}function feature_element(){return feature_elements()[feature_elements().length-1]}function all_examples(){if(!feature_element()["examples"]){feature_element()["examples"]=[]}return feature_element()["examples"]}function steps(){if(!feature_element()["steps"]){feature_element()["steps"]=[]}return feature_element()["steps"]}function embeddings(){if(!current_step_or_hook["embeddings"]){current_step_or_hook["embeddings"]=[]}return current_step_or_hook["embeddings"]}function output(){if(!current_step_or_hook["output"]){current_step_or_hook["output"]=[]}return current_step_or_hook["output"]}function encode64s(input){var swaps=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];var input_binary="";var output="";var temp_binary;var index;for(index=0;index<input.length;index++){temp_binary=input.charCodeAt(index).toString(2);while(temp_binary.length<8){temp_binary="0"+temp_binary}input_binary=input_binary+temp_binary;while(input_binary.length>=6){output=output+swaps[parseInt(input_binary.substring(0,6),2)];input_binary=input_binary.substring(6)}}if(input_binary.length==4){temp_binary=input_binary+"00";output=output+swaps[parseInt(temp_binary,2)];output=output+"="}if(input_binary.length==2){temp_binary=input_binary+"0000";output=output+swaps[parseInt(temp_binary,2)];output=output+"=="}return output}};module.exports=JSONFormatter},{}],110:[function(require,module,exports){(function(Buffer){(function(){var _lexer_actions=[0,1,0,1,1,1,2,1,3,1,4,1,5,1,6,1,7,1,8,1,9,1,10,1,11,1,12,1,13,1,16,1,17,1,18,1,19,1,20,1,21,1,22,1,23,2,2,18,2,3,4,2,13,0,2,14,15,2,17,0,2,17,1,2,17,16,2,17,19,2,18,6,2,18,7,2,18,8,2,18,9,2,18,10,2,18,16,2,20,21,2,22,0,2,22,1,2,22,16,2,22,19,3,4,14,15,3,5,14,15,3,11,14,15,3,12,14,15,3,13,14,15,3,14,15,18,3,17,0,11,3,17,14,15,4,2,14,15,18,4,3,4,14,15,4,17,0,14,15,5,17,0,11,14,15];var _lexer_key_offsets=[0,0,19,37,38,39,41,43,48,53,58,63,67,71,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,98,105,110,112,113,114,115,116,117,118,119,120,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,192,194,195,196,197,198,199,200,201,202,203,204,205,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,253,255,257,259,261,263,265,267,269,272,274,276,278,280,282,284,286,288,290,292,294,296,298,300,302,304,306,308,310,312,314,316,318,320,322,324,326,329,332,334,336,338,340,342,344,346,348,350,352,354,356,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,387,389,391,393,395,397,399,401,403,405,407,409,411,413,415,417,419,421,423,425,427,429,431,433,435,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,457,459,460,461,462,463,464,465,466,467,468,483,485,487,489,491,493,495,497,499,501,503,505,507,509,511,513,516,518,520,522,524,526,528,530,532,535,537,539,541,543,545,547,549,551,553,555,557,559,561,563,565,567,569,571,573,575,577,579,581,583,585,587,589,591,592,593,594,595,596,597,598,599,614,616,618,620,622,624,626,628,630,632,634,636,638,640,642,644,647,649,651,653,655,657,659,661,664,666,668,670,672,674,676,678,680,683,685,687,689,691,693,695,697,699,701,703,705,707,709,711,713,715,717,719,721,723,725,727,729,731,733,735,738,741,743,745,747,749,751,753,755,757,759,761,763,765,766,770,776,779,781,787,805,808,810,812,814,816,818,820,822,824,826,828,830,832,834,836,838,840,842,844,846,848,850,852,854,856,858,860,862,864,866,868,870,872,874,876,878,880,882,884,888,891,893,895,897,899,901,903,905,907,909,911,913,914,915,916];var _lexer_trans_keys=[10,32,34,35,37,42,64,65,66,69,70,71,83,84,87,124,239,9,13,10,32,34,35,37,42,64,65,66,69,70,71,83,84,87,124,9,13,34,34,10,13,10,13,10,32,34,9,13,10,32,34,9,13,10,32,34,9,13,10,32,34,9,13,10,32,9,13,10,32,9,13,10,13,10,95,70,69,65,84,85,82,69,95,69,78,68,95,37,32,10,13,10,13,13,32,64,9,10,9,10,13,32,64,11,12,10,32,64,9,13,98,110,105,108,105,116,121,58,10,10,10,32,35,37,64,65,66,69,70,83,9,13,10,95,10,70,10,69,10,65,10,84,10,85,10,82,10,69,10,95,10,69,10,78,10,68,10,95,10,37,10,98,10,105,10,108,10,105,10,116,10,121,10,58,10,32,34,35,37,42,64,65,66,69,70,71,83,84,87,124,9,13,97,117,99,107,103,114,111,117,110,100,58,10,10,10,32,35,37,42,64,65,66,70,71,83,84,87,9,13,10,95,10,70,10,69,10,65,10,84,10,85,10,82,10,69,10,95,10,69,10,78,10,68,10,95,10,37,10,32,10,98,110,10,105,10,108,10,105,10,116,10,121,10,58,10,100,10,117,10,115,116,10,105,10,110,10,101,10,115,10,115,10,32,10,78,10,101,10,101,10,100,10,101,10,97,10,116,10,117,10,114,10,101,10,105,10,118,10,101,10,110,10,99,10,101,10,110,10,97,10,114,10,105,10,111,10,32,58,10,79,84,10,117,10,116,10,108,10,105,10,110,10,101,10,109,10,112,10,108,10,97,10,116,10,104,115,116,105,110,101,115,115,32,78,101,101,100,120,97,109,112,108,101,115,58,10,10,10,32,35,65,66,70,124,9,13,10,98,10,105,10,108,10,105,10,116,10,121,10,58,10,117,10,115,10,105,10,110,10,101,10,115,10,115,10,32,10,78,10,101,10,101,10,100,10,101,10,97,10,116,10,117,10,114,10,101,101,97,116,117,114,101,105,118,101,110,99,101,110,97,114,105,111,32,58,115,79,84,117,116,108,105,110,101,58,10,10,10,32,35,37,42,64,65,66,70,71,83,84,87,9,13,10,95,10,70,10,69,10,65,10,84,10,85,10,82,10,69,10,95,10,69,10,78,10,68,10,95,10,37,10,32,10,98,110,10,105,10,108,10,105,10,116,10,121,10,58,10,100,10,117,10,115,116,10,105,10,110,10,101,10,115,10,115,10,32,10,78,10,101,10,101,10,100,10,101,10,97,10,116,10,117,10,114,10,101,10,105,10,118,10,101,10,110,10,99,10,101,10,110,10,97,10,114,10,105,10,111,10,104,101,109,112,108,97,116,10,10,10,32,35,37,42,64,65,66,70,71,83,84,87,9,13,10,95,10,70,10,69,10,65,10,84,10,85,10,82,10,69,10,95,10,69,10,78,10,68,10,95,10,37,10,32,10,98,110,10,105,10,108,10,105,10,116,10,121,10,58,10,100,10,97,117,10,99,10,107,10,103,10,114,10,111,10,117,10,110,10,100,10,115,116,10,105,10,110,10,101,10,115,10,115,10,32,10,78,10,101,10,101,10,101,10,97,10,116,10,117,10,114,10,101,10,105,10,118,10,101,10,110,10,99,10,101,10,110,10,97,10,114,10,105,10,111,10,32,58,10,79,84,10,117,10,116,10,108,10,105,10,110,10,101,10,109,10,112,10,108,10,97,10,116,10,104,104,32,124,9,13,10,32,92,124,9,13,10,92,124,10,92,10,32,92,124,9,13,10,32,34,35,37,42,64,65,66,69,70,71,83,84,87,124,9,13,10,97,117,10,99,10,107,10,103,10,114,10,111,10,117,10,110,10,100,10,115,10,105,10,110,10,101,10,115,10,115,10,32,10,78,10,101,10,101,10,120,10,97,10,109,10,112,10,108,10,101,10,115,10,101,10,97,10,116,10,117,10,114,10,101,10,99,10,101,10,110,10,97,10,114,10,105,10,111,10,32,58,115,10,79,84,10,117,10,116,10,108,10,105,10,110,10,101,10,109,10,112,10,108,10,97,10,116,100,187,191,0];var _lexer_single_lengths=[0,17,16,1,1,2,2,3,3,3,3,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,3,5,3,2,1,1,1,1,1,1,1,1,10,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,16,2,1,1,1,1,1,1,1,1,1,1,1,13,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,2,2,2,2,2,2,2,2,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,7,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,2,1,1,1,1,1,1,1,1,1,13,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,2,2,2,2,2,2,2,2,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,13,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,2,2,2,2,2,2,2,3,2,2,2,2,2,2,2,2,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,2,2,2,2,2,2,2,2,2,2,2,2,1,2,4,3,2,4,16,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,3,2,2,2,2,2,2,2,2,2,2,2,1,1,1,0];var _lexer_range_lengths=[0,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var _lexer_index_offsets=[0,0,19,37,39,41,44,47,52,57,62,67,71,75,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,113,116,121,128,133,136,138,140,142,144,146,148,150,152,164,167,170,173,176,179,182,185,188,191,194,197,200,203,206,209,212,215,218,221,224,227,245,248,250,252,254,256,258,260,262,264,266,268,270,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,334,337,340,343,346,349,352,355,358,362,365,368,371,374,377,380,383,386,389,392,395,398,401,404,407,410,413,416,419,422,425,428,431,434,437,440,443,447,451,454,457,460,463,466,469,472,475,478,481,484,487,490,492,494,496,498,500,502,504,506,508,510,512,514,516,518,520,522,524,526,528,530,539,542,545,548,551,554,557,560,563,566,569,572,575,578,581,584,587,590,593,596,599,602,605,608,611,614,616,618,620,622,624,626,628,630,632,634,636,638,640,642,644,646,648,652,655,657,659,661,663,665,667,669,671,673,688,691,694,697,700,703,706,709,712,715,718,721,724,727,730,733,737,740,743,746,749,752,755,758,761,765,768,771,774,777,780,783,786,789,792,795,798,801,804,807,810,813,816,819,822,825,828,831,834,837,840,843,846,849,851,853,855,857,859,861,863,865,880,883,886,889,892,895,898,901,904,907,910,913,916,919,922,925,929,932,935,938,941,944,947,950,954,957,960,963,966,969,972,975,978,982,985,988,991,994,997,1e3,1003,1006,1009,1012,1015,1018,1021,1024,1027,1030,1033,1036,1039,1042,1045,1048,1051,1054,1057,1060,1064,1068,1071,1074,1077,1080,1083,1086,1089,1092,1095,1098,1101,1104,1106,1110,1116,1120,1123,1129,1147,1151,1154,1157,1160,1163,1166,1169,1172,1175,1178,1181,1184,1187,1190,1193,1196,1199,1202,1205,1208,1211,1214,1217,1220,1223,1226,1229,1232,1235,1238,1241,1244,1247,1250,1253,1256,1259,1262,1265,1270,1274,1277,1280,1283,1286,1289,1292,1295,1298,1301,1304,1307,1309,1311,1313];var _lexer_indicies=[2,1,3,4,5,6,7,8,9,10,11,12,13,14,14,15,16,1,0,2,1,3,4,5,6,7,8,9,10,11,12,13,14,14,15,1,0,17,0,18,0,20,21,19,23,24,22,27,26,28,26,25,31,30,32,30,29,31,30,33,30,29,31,30,34,30,29,36,35,35,0,2,37,37,0,39,40,38,2,0,41,0,42,0,43,0,44,0,45,0,46,0,47,0,48,0,49,0,50,0,51,0,52,0,53,0,54,0,55,0,57,58,56,60,61,59,0,0,0,0,62,63,64,63,63,66,65,62,2,67,7,67,0,68,69,0,70,0,71,0,72,0,73,0,74,0,75,0,77,76,79,78,79,80,81,82,81,83,84,85,86,87,80,78,79,88,78,79,89,78,79,90,78,79,91,78,79,92,78,79,93,78,79,94,78,79,95,78,79,96,78,79,97,78,79,98,78,79,99,78,79,100,78,79,101,78,79,102,78,79,103,78,79,104,78,79,105,78,79,106,78,79,107,78,79,108,78,110,109,111,112,113,114,115,116,117,118,119,120,121,122,122,123,109,0,124,125,0,126,0,127,0,128,0,129,0,130,0,131,0,132,0,133,0,134,0,136,135,138,137,138,139,140,141,142,140,143,144,145,146,147,148,148,139,137,138,149,137,138,150,137,138,151,137,138,152,137,138,153,137,138,154,137,138,155,137,138,156,137,138,157,137,138,158,137,138,159,137,138,160,137,138,161,137,138,162,137,138,163,137,138,164,165,137,138,166,137,138,167,137,138,168,137,138,169,137,138,170,137,138,163,137,138,171,137,138,172,137,138,173,171,137,138,174,137,138,175,137,138,176,137,138,177,137,138,178,137,138,179,137,138,180,137,138,181,137,138,182,137,138,170,137,138,183,137,138,184,137,138,185,137,138,186,137,138,187,137,138,170,137,138,188,137,138,189,137,138,190,137,138,171,137,138,191,137,138,192,137,138,193,137,138,194,137,138,195,137,138,196,137,138,197,137,138,198,163,137,138,199,200,137,138,201,137,138,202,137,138,203,137,138,204,137,138,187,137,138,205,137,138,206,137,138,207,137,138,208,137,138,209,137,138,187,137,138,189,137,210,211,0,212,0,213,0,214,0,215,0,216,0,217,0,218,0,219,0,220,0,74,0,221,0,222,0,223,0,224,0,225,0,226,0,227,0,228,0,230,229,232,231,232,233,234,235,236,237,234,233,231,232,238,231,232,239,231,232,240,231,232,241,231,232,242,231,232,243,231,232,244,231,232,245,231,232,246,231,232,247,231,232,248,231,232,249,231,232,250,231,232,251,231,232,252,231,232,253,231,232,254,231,232,255,231,232,243,231,232,256,231,232,257,231,232,258,231,232,259,231,232,260,231,232,243,231,261,0,262,0,263,0,264,0,265,0,74,0,266,0,267,0,268,0,211,0,269,0,270,0,271,0,272,0,273,0,274,0,275,0,276,277,227,0,278,279,0,280,0,281,0,282,0,283,0,284,0,285,0,286,0,288,287,290,289,290,291,292,293,294,292,295,296,297,298,299,300,300,291,289,290,301,289,290,302,289,290,303,289,290,304,289,290,305,289,290,306,289,290,307,289,290,308,289,290,309,289,290,310,289,290,311,289,290,312,289,290,313,289,290,314,289,290,315,289,290,316,317,289,290,318,289,290,319,289,290,320,289,290,321,289,290,322,289,290,315,289,290,323,289,290,324,289,290,325,323,289,290,326,289,290,327,289,290,328,289,290,329,289,290,330,289,290,331,289,290,332,289,290,333,289,290,334,289,290,322,289,290,335,289,290,336,289,290,337,289,290,338,289,290,339,289,290,322,289,290,340,289,290,341,289,290,342,289,290,323,289,290,343,289,290,344,289,290,345,289,290,346,289,290,347,289,290,348,289,290,322,289,290,341,289,349,0,350,0,351,0,352,0,353,0,284,0,355,354,357,356,357,358,359,360,361,359,362,363,364,365,366,367,367,358,356,357,368,356,357,369,356,357,370,356,357,371,356,357,372,356,357,373,356,357,374,356,357,375,356,357,376,356,357,377,356,357,378,356,357,379,356,357,380,356,357,381,356,357,382,356,357,383,384,356,357,385,356,357,386,356,357,387,356,357,388,356,357,389,356,357,382,356,357,390,356,357,391,392,356,357,393,356,357,394,356,357,395,356,357,396,356,357,397,356,357,398,356,357,399,356,357,389,356,357,400,390,356,357,401,356,357,402,356,357,403,356,357,404,356,357,405,356,357,406,356,357,407,356,357,408,356,357,399,356,357,409,356,357,410,356,357,411,356,357,412,356,357,413,356,357,389,356,357,414,356,357,415,356,357,416,356,357,390,356,357,417,356,357,418,356,357,419,356,357,420,356,357,421,356,357,422,356,357,423,356,357,424,382,356,357,425,426,356,357,427,356,357,428,356,357,429,356,357,430,356,357,413,356,357,431,356,357,432,356,357,433,356,357,434,356,357,435,356,357,413,356,357,415,356,267,0,436,437,436,0,440,439,441,442,439,438,0,444,445,443,0,444,443,440,446,444,445,446,443,440,447,448,449,450,451,452,453,454,455,456,457,458,459,459,460,447,0,79,461,462,78,79,463,78,79,464,78,79,465,78,79,466,78,79,467,78,79,468,78,79,469,78,79,107,78,79,470,78,79,471,78,79,472,78,79,473,78,79,474,78,79,475,78,79,476,78,79,477,78,79,478,78,79,469,78,79,479,78,79,480,78,79,481,78,79,482,78,79,483,78,79,484,78,79,107,78,79,485,78,79,486,78,79,487,78,79,488,78,79,489,78,79,107,78,79,490,78,79,491,78,79,492,78,79,493,78,79,494,78,79,495,78,79,496,78,79,497,108,107,78,79,498,499,78,79,500,78,79,501,78,79,502,78,79,503,78,79,489,78,79,504,78,79,505,78,79,506,78,79,507,78,79,508,78,79,489,78,211,0,509,0,1,0,510,0];
var _lexer_trans_targs=[0,2,2,3,13,15,29,32,35,67,157,193,199,203,357,358,417,4,5,6,7,6,6,7,6,8,8,8,9,8,8,8,9,10,11,12,2,12,13,2,14,16,17,18,19,20,21,22,23,24,25,26,27,28,419,30,31,2,14,31,2,14,33,34,2,33,32,34,36,416,37,38,39,40,41,42,43,44,43,44,44,2,45,59,364,383,390,396,46,47,48,49,50,51,52,53,54,55,56,57,58,2,60,61,62,63,64,65,66,2,2,3,13,15,29,32,35,67,157,193,199,203,357,358,68,146,69,70,71,72,73,74,75,76,77,78,79,78,79,79,2,80,94,95,103,115,121,125,145,81,82,83,84,85,86,87,88,89,90,91,92,93,2,66,96,102,97,98,99,100,101,94,104,105,106,107,108,109,110,111,112,113,114,116,117,118,119,120,122,123,124,126,127,128,129,130,131,132,133,134,139,135,136,137,138,140,141,142,143,144,147,29,148,149,150,151,152,153,154,155,156,158,159,160,161,162,163,164,165,166,167,166,167,167,2,168,175,187,169,170,171,172,173,174,66,176,177,178,179,180,181,182,183,184,185,186,188,189,190,191,192,194,195,196,197,198,200,201,202,204,205,206,207,208,209,210,211,281,212,275,213,214,215,216,217,218,219,220,221,220,221,221,2,222,236,237,245,257,263,267,274,223,224,225,226,227,228,229,230,231,232,233,234,235,2,66,238,244,239,240,241,242,243,236,246,247,248,249,250,251,252,253,254,255,256,258,259,260,261,262,264,265,266,268,269,270,271,272,273,276,277,278,279,280,282,283,282,283,283,2,284,298,299,307,326,332,336,356,285,286,287,288,289,290,291,292,293,294,295,296,297,2,66,300,306,301,302,303,304,305,298,308,316,309,310,311,312,313,314,315,317,318,319,320,321,322,323,324,325,327,328,329,330,331,333,334,335,337,338,339,340,341,342,343,344,345,350,346,347,348,349,351,352,353,354,355,358,359,360,362,363,361,359,360,361,359,362,363,3,13,15,29,32,35,67,157,193,199,203,357,358,365,373,366,367,368,369,370,371,372,374,375,376,377,378,379,380,381,382,384,385,386,387,388,389,391,392,393,394,395,397,398,399,400,401,402,403,404,405,410,406,407,408,409,411,412,413,414,415,418,0];var _lexer_trans_actions=[43,0,54,3,1,0,29,1,29,29,29,29,29,29,29,35,0,0,0,7,139,48,0,102,9,5,45,134,45,0,33,122,33,33,0,11,106,0,0,114,25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57,149,126,0,110,23,0,27,118,27,51,0,0,0,0,0,0,0,0,0,57,144,0,54,0,69,33,84,84,84,84,84,0,0,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,0,0,0,13,31,130,60,57,31,63,57,63,63,63,63,63,63,63,66,0,0,0,0,0,0,0,0,0,0,0,57,144,0,54,0,72,33,84,84,84,84,84,84,84,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57,144,0,54,0,81,84,84,84,0,0,0,0,0,0,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57,144,0,54,0,78,33,84,84,84,84,84,84,84,0,0,0,0,0,0,0,0,0,0,0,0,0,19,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57,144,0,54,0,75,33,84,84,84,84,84,84,84,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37,37,54,37,87,0,0,39,0,0,93,90,41,96,90,96,96,96,96,96,96,96,99,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var _lexer_eof_actions=[0,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43];var lexer_start=1;var lexer_first_final=419;var lexer_error=0;var lexer_en_main=1;var Lexer=function(listener){var events=["comment","tag","feature","background","scenario","scenario_outline","examples","step","doc_string","row","eof"];for(var i=0,len=events.length;i<len;i++){var event=events[i];if(typeof listener[event]!="function"){throw new Error("Error. No "+event+" function exists on "+JSON.stringify(listener))}}this.listener=listener};Lexer.prototype.scan=function(data){var ending="\n%_FEATURE_END_%";if(typeof data=="string"){data=this.stringToBytes(data+ending)}else if(typeof Buffer!="undefined"&&Buffer.isBuffer(data)){var buf=new Buffer(data.length+ending.length);data.copy(buf,0,0);new Buffer(ending).copy(buf,data.length,0);data=buf}var eof=pe=data.length;var p=0;this.line_number=1;this.last_newline=0;var signedCharValue=function(v){return v>127?v-256:v};{this.cs=lexer_start}{var _klen,_trans,_keys,_ps,_widec,_acts,_nacts;var _goto_level,_resume,_eof_trans,_again,_test_eof;var _out;_klen=_trans=_keys=_acts=_nacts=null;_goto_level=0;_resume=10;_eof_trans=15;_again=20;_test_eof=30;_out=40;while(true){_trigger_goto=false;if(_goto_level<=0){if(p==pe){_goto_level=_test_eof;continue}if(this.cs==0){_goto_level=_out;continue}}if(_goto_level<=_resume){_keys=_lexer_key_offsets[this.cs];_trans=_lexer_index_offsets[this.cs];_klen=_lexer_single_lengths[this.cs];_break_match=false;do{if(_klen>0){_lower=_keys;_upper=_keys+_klen-1;while(true){if(_upper<_lower){break}_mid=_lower+(_upper-_lower>>1);if(signedCharValue(data[p])<_lexer_trans_keys[_mid]){_upper=_mid-1}else if(signedCharValue(data[p])>_lexer_trans_keys[_mid]){_lower=_mid+1}else{_trans+=_mid-_keys;_break_match=true;break}}if(_break_match){break}_keys+=_klen;_trans+=_klen}_klen=_lexer_range_lengths[this.cs];if(_klen>0){_lower=_keys;_upper=_keys+(_klen<<1)-2;while(true){if(_upper<_lower){break}_mid=_lower+(_upper-_lower>>1&~1);if(signedCharValue(data[p])<_lexer_trans_keys[_mid]){_upper=_mid-2}else if(signedCharValue(data[p])>_lexer_trans_keys[_mid+1]){_lower=_mid+2}else{_trans+=_mid-_keys>>1;_break_match=true;break}}if(_break_match){break}_trans+=_klen}}while(false);_trans=_lexer_indicies[_trans];this.cs=_lexer_trans_targs[_trans];if(_lexer_trans_actions[_trans]!=0){_acts=_lexer_trans_actions[_trans];_nacts=_lexer_actions[_acts];_acts+=1;while(_nacts>0){_nacts-=1;_acts+=1;switch(_lexer_actions[_acts-1]){case 0:this.content_start=p;this.current_line=this.line_number;this.start_col=p-this.last_newline-(this.keyword+":").length;break;case 1:this.current_line=this.line_number;this.start_col=p-this.last_newline;break;case 2:this.content_start=p;break;case 3:this.docstring_content_type_start=p;break;case 4:this.docstring_content_type_end=p;break;case 5:var con=this.unindent(this.start_col,this.bytesToString(data.slice(this.content_start,this.next_keyword_start-1)).replace(/(\r?\n)?([\t ])*$/,"").replace(/\\\"\\\"\\\"/gm,'"""'));var con_type=this.bytesToString(data.slice(this.docstring_content_type_start,this.docstring_content_type_end)).trim();this.listener.doc_string(con_type,con,this.current_line);break;case 6:p=this.store_keyword_content("feature",data,p,eof);break;case 7:p=this.store_keyword_content("background",data,p,eof);break;case 8:p=this.store_keyword_content("scenario",data,p,eof);break;case 9:p=this.store_keyword_content("scenario_outline",data,p,eof);break;case 10:p=this.store_keyword_content("examples",data,p,eof);break;case 11:var con=this.bytesToString(data.slice(this.content_start,p)).trim();this.listener.step(this.keyword,con,this.current_line);break;case 12:var con=this.bytesToString(data.slice(this.content_start,p)).trim();this.listener.comment(con,this.line_number);this.keyword_start=null;break;case 13:var con=this.bytesToString(data.slice(this.content_start,p)).trim();this.listener.tag(con,this.line_number);this.keyword_start=null;break;case 14:this.line_number++;break;case 15:this.last_newline=p+1;break;case 16:this.keyword_start=this.keyword_start||p;break;case 17:this.keyword=this.bytesToString(data.slice(this.keyword_start,p)).replace(/:$/,"");this.keyword_start=null;break;case 18:this.next_keyword_start=p;break;case 19:p=p-1;current_row=[];this.current_line=this.line_number;break;case 20:this.content_start=p;break;case 21:var con=this.bytesToString(data.slice(this.content_start,p)).trim();current_row.push(con.replace(/\\\|/,"|").replace(/\\n/,"\n").replace(/\\\\/,"\\"));break;case 22:this.listener.row(current_row,this.current_line);break;case 23:if(this.cs<lexer_first_final){var content=this.current_line_content(data,p);throw new Error("Lexing error on line "+this.line_number+": '"+content+"'. See http://wiki.github.com/cucumber/gherkin/lexingerror for more information.")}else{this.listener.eof()}break}}}if(_trigger_goto){continue}}if(_goto_level<=_again){if(this.cs==0){_goto_level=_out;continue}p+=1;if(p!=pe){_goto_level=_resume;continue}}if(_goto_level<=_test_eof){if(p==eof){__acts=_lexer_eof_actions[this.cs];__nacts=_lexer_actions[__acts];__acts+=1;while(__nacts>0){__nacts-=1;__acts+=1;switch(_lexer_actions[__acts-1]){case 23:if(this.cs<lexer_first_final){var content=this.current_line_content(data,p);throw new Error("Lexing error on line "+this.line_number+": '"+content+"'. See http://wiki.github.com/cucumber/gherkin/lexingerror for more information.")}else{this.listener.eof()}break}}if(_trigger_goto){continue}}}if(_goto_level<=_out){break}}}};var decodeUtf8=function(bytes){var result="";var i=0;var wc;var c;while(i<bytes.length){wc=bytes[i++];if(wc<128){count=0}else if(wc<194||wc>=248){throw new Error("input is not a valid UTF-8 lead octet")}else if(wc<224){count=1;wc=(wc&31)<<6}else if(wc<240){count=2;wc=(wc&15)<<12}else{count=3;wc=(wc&7)<<18}while(count){if(!(i<bytes.length)){throw new Error("short read")}if((c=bytes[i++]^128)>63){throw new Error("input is not a valid UTF-8 trail octet")}wc|=c<<6*--count;if(wc<1<<5*count+6){throw new Error("invalid non-minimal encoded input")}}if(wc>65535){wc-=65536;result+=String.fromCharCode(55296+(wc>>10));wc=56320+(wc&1023)}result+=String.fromCharCode(wc)}return result};var encodeUtf8=function(string){var bytes=[];var i=0;var j=0;var wc;while(i<string.length){wc=string.charCodeAt(i++);if(wc>=55296&&wc<=56319&&i<string.length&&string.charCodeAt(i)>=56320&&string.charCodeAt(i)<=57343){wc=65536+((wc&1023)<<10)+(string.charCodeAt(i++)&1023)}if(wc<128){bytes[j++]=wc;count=0}else if(wc<2048){bytes[j++]=192|wc>>6;count=1}else if(wc<65536){bytes[j++]=224|wc>>12;count=2}else{bytes[j++]=240|wc>>18;count=3}while(count){bytes[j++]=128|wc>>6*--count&63}}return bytes};Lexer.prototype.bytesToString=function(bytes){if(typeof bytes.write=="function"){return bytes.toString("utf-8")}return decodeUtf8(bytes)};Lexer.prototype.stringToBytes=function(string){return encodeUtf8(string)};Lexer.prototype.unindent=function(startcol,text){startcol=startcol||0;return text.replace(new RegExp("^[	 ]{0,"+startcol+"}","gm"),"")};Lexer.prototype.store_keyword_content=function(event,data,p,eof){var end_point=!this.next_keyword_start||p==eof?p:this.next_keyword_start;var content=this.unindent(this.start_col+2,this.bytesToString(data.slice(this.content_start,end_point))).replace(/\s+$/,"");var content_lines=content.split("\n");var name=content_lines.shift()||"";name=name.trim();var description=content_lines.join("\n");this.listener[event](this.keyword,name,description,this.current_line);var nks=this.next_keyword_start;this.next_keyword_start=null;return nks?nks-1:p};Lexer.prototype.current_line_content=function(data,p){var rest=Array.prototype.slice.call(data,this.last_newline,-1);var end=rest.indexOf(10)||-1;return this.bytesToString(rest.slice(0,end)).trim()};if(typeof module!=="undefined"){module.exports=Lexer}if(typeof define!=="undefined"){if(define.amd){define("gherkin/lexer/en",[],function(){return Lexer})}else{define("gherkin/lexer/en",function(require,exports,module){exports.Lexer=Lexer})}}})()}).call(this,require("buffer").Buffer)},{buffer:65}],111:[function(require,module,exports){!function(root,String){"use strict";var nativeTrim=String.prototype.trim;var nativeTrimRight=String.prototype.trimRight;var nativeTrimLeft=String.prototype.trimLeft;var parseNumber=function(source){return source*1||0};var strRepeat=function(str,qty){if(qty<1)return"";var result="";while(qty>0){if(qty&1)result+=str;qty>>=1,str+=str}return result};var slice=[].slice;var defaultToWhiteSpace=function(characters){if(characters==null)return"\\s";else if(characters.source)return characters.source;else return"["+_s.escapeRegExp(characters)+"]"};function boolMatch(s,matchers){var i,matcher,down=s.toLowerCase();matchers=[].concat(matchers);for(i=0;i<matchers.length;i+=1){matcher=matchers[i];if(!matcher)continue;if(matcher.test&&matcher.test(s))return true;if(matcher.toLowerCase()===down)return true}}var escapeChars={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"};var reversedEscapeChars={};for(var key in escapeChars)reversedEscapeChars[escapeChars[key]]=key;reversedEscapeChars["'"]="#39";var sprintf=function(){function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}var str_repeat=strRepeat;var str_format=function(){if(!str_format.cache.hasOwnProperty(arguments[0])){str_format.cache[arguments[0]]=str_format.parse(arguments[0])}return str_format.format.call(null,str_format.cache[arguments[0]],arguments)};str_format.format=function(parse_tree,argv){var cursor=1,tree_length=parse_tree.length,node_type="",arg,output=[],i,k,match,pad,pad_character,pad_length;for(i=0;i<tree_length;i++){node_type=get_type(parse_tree[i]);if(node_type==="string"){output.push(parse_tree[i])}else if(node_type==="array"){match=parse_tree[i];if(match[2]){arg=argv[cursor];for(k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k])){throw new Error(sprintf('[_.sprintf] property "%s" does not exist',match[2][k]))}arg=arg[match[2][k]]}}else if(match[1]){arg=argv[match[1]]}else{arg=argv[cursor++]}if(/[^s]/.test(match[8])&&get_type(arg)!="number"){throw new Error(sprintf("[_.sprintf] expecting number but found %s",get_type(arg)))}switch(match[8]){case"b":arg=arg.toString(2);break;case"c":arg=String.fromCharCode(arg);break;case"d":arg=parseInt(arg,10);break;case"e":arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case"f":arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case"o":arg=arg.toString(8);break;case"s":arg=(arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg;break;case"u":arg=Math.abs(arg);break;case"x":arg=arg.toString(16);break;case"X":arg=arg.toString(16).toUpperCase();break}arg=/[def]/.test(match[8])&&match[3]&&arg>=0?"+"+arg:arg;pad_character=match[4]?match[4]=="0"?"0":match[4].charAt(1):" ";pad_length=match[6]-String(arg).length;pad=match[6]?str_repeat(pad_character,pad_length):"";output.push(match[5]?arg+pad:pad+arg)}}return output.join("")};str_format.cache={};str_format.parse=function(fmt){var _fmt=fmt,match=[],parse_tree=[],arg_names=0;while(_fmt){if((match=/^[^\x25]+/.exec(_fmt))!==null){parse_tree.push(match[0])}else if((match=/^\x25{2}/.exec(_fmt))!==null){parse_tree.push("%")}else if((match=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt))!==null){if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if((field_match=/^([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1]);while((replacement_field=replacement_field.substring(field_match[0].length))!==""){if((field_match=/^\.([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1])}else if((field_match=/^\[(\d+)\]/.exec(replacement_field))!==null){field_list.push(field_match[1])}else{throw new Error("[_.sprintf] huh?")}}}else{throw new Error("[_.sprintf] huh?")}match[2]=field_list}else{arg_names|=2}if(arg_names===3){throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported")}parse_tree.push(match)}else{throw new Error("[_.sprintf] huh?")}_fmt=_fmt.substring(match[0].length)}return parse_tree};return str_format}();var _s={VERSION:"2.3.0",isBlank:function(str){if(str==null)str="";return/^\s*$/.test(str)},stripTags:function(str){if(str==null)return"";return String(str).replace(/<\/?[^>]+>/g,"")},capitalize:function(str){str=str==null?"":String(str);return str.charAt(0).toUpperCase()+str.slice(1)},chop:function(str,step){if(str==null)return[];str=String(str);step=~~step;return step>0?str.match(new RegExp(".{1,"+step+"}","g")):[str]},clean:function(str){return _s.strip(str).replace(/\s+/g," ")},count:function(str,substr){if(str==null||substr==null)return 0;str=String(str);substr=String(substr);var count=0,pos=0,length=substr.length;while(true){pos=str.indexOf(substr,pos);if(pos===-1)break;count++;pos+=length}return count},chars:function(str){if(str==null)return[];return String(str).split("")},swapCase:function(str){if(str==null)return"";return String(str).replace(/\S/g,function(c){return c===c.toUpperCase()?c.toLowerCase():c.toUpperCase()})},escapeHTML:function(str){if(str==null)return"";return String(str).replace(/[&<>"']/g,function(m){return"&"+reversedEscapeChars[m]+";"})},unescapeHTML:function(str){if(str==null)return"";return String(str).replace(/\&([^;]+);/g,function(entity,entityCode){var match;if(entityCode in escapeChars){return escapeChars[entityCode]}else if(match=entityCode.match(/^#x([\da-fA-F]+)$/)){return String.fromCharCode(parseInt(match[1],16))}else if(match=entityCode.match(/^#(\d+)$/)){return String.fromCharCode(~~match[1])}else{return entity}})},escapeRegExp:function(str){if(str==null)return"";return String(str).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(str,i,howmany,substr){var arr=_s.chars(str);arr.splice(~~i,~~howmany,substr);return arr.join("")},insert:function(str,i,substr){return _s.splice(str,i,0,substr)},include:function(str,needle){if(needle==="")return true;if(str==null)return false;return String(str).indexOf(needle)!==-1},join:function(){var args=slice.call(arguments),separator=args.shift();if(separator==null)separator="";return args.join(separator)},lines:function(str){if(str==null)return[];return String(str).split("\n")},reverse:function(str){return _s.chars(str).reverse().join("")},startsWith:function(str,starts){if(starts==="")return true;if(str==null||starts==null)return false;str=String(str);starts=String(starts);return str.length>=starts.length&&str.slice(0,starts.length)===starts},endsWith:function(str,ends){if(ends==="")return true;if(str==null||ends==null)return false;str=String(str);ends=String(ends);return str.length>=ends.length&&str.slice(str.length-ends.length)===ends},succ:function(str){if(str==null)return"";str=String(str);return str.slice(0,-1)+String.fromCharCode(str.charCodeAt(str.length-1)+1)},titleize:function(str){if(str==null)return"";str=String(str).toLowerCase();return str.replace(/(?:^|\s|-)\S/g,function(c){return c.toUpperCase()})},camelize:function(str){return _s.trim(str).replace(/[-_\s]+(.)?/g,function(match,c){return c?c.toUpperCase():""})},underscored:function(str){return _s.trim(str).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(str){return _s.trim(str).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(str){return _s.titleize(String(str).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(str){return _s.capitalize(_s.underscored(str).replace(/_id$/,"").replace(/_/g," "))},trim:function(str,characters){if(str==null)return"";if(!characters&&nativeTrim)return nativeTrim.call(str);characters=defaultToWhiteSpace(characters);return String(str).replace(new RegExp("^"+characters+"+|"+characters+"+$","g"),"")},ltrim:function(str,characters){if(str==null)return"";if(!characters&&nativeTrimLeft)return nativeTrimLeft.call(str);characters=defaultToWhiteSpace(characters);return String(str).replace(new RegExp("^"+characters+"+"),"")},rtrim:function(str,characters){if(str==null)return"";if(!characters&&nativeTrimRight)return nativeTrimRight.call(str);characters=defaultToWhiteSpace(characters);return String(str).replace(new RegExp(characters+"+$"),"")},truncate:function(str,length,truncateStr){if(str==null)return"";str=String(str);truncateStr=truncateStr||"...";length=~~length;return str.length>length?str.slice(0,length)+truncateStr:str},prune:function(str,length,pruneStr){if(str==null)return"";str=String(str);length=~~length;pruneStr=pruneStr!=null?String(pruneStr):"...";if(str.length<=length)return str;var tmpl=function(c){return c.toUpperCase()!==c.toLowerCase()?"A":" "},template=str.slice(0,length+1).replace(/.(?=\W*\w*$)/g,tmpl);if(template.slice(template.length-2).match(/\w\w/))template=template.replace(/\s*\S+$/,"");else template=_s.rtrim(template.slice(0,template.length-1));return(template+pruneStr).length>str.length?str:str.slice(0,template.length)+pruneStr},words:function(str,delimiter){if(_s.isBlank(str))return[];return _s.trim(str,delimiter).split(delimiter||/\s+/)},pad:function(str,length,padStr,type){str=str==null?"":String(str);length=~~length;var padlen=0;if(!padStr)padStr=" ";else if(padStr.length>1)padStr=padStr.charAt(0);switch(type){case"right":padlen=length-str.length;return str+strRepeat(padStr,padlen);case"both":padlen=length-str.length;return strRepeat(padStr,Math.ceil(padlen/2))+str+strRepeat(padStr,Math.floor(padlen/2));default:padlen=length-str.length;return strRepeat(padStr,padlen)+str}},lpad:function(str,length,padStr){return _s.pad(str,length,padStr)},rpad:function(str,length,padStr){return _s.pad(str,length,padStr,"right")},lrpad:function(str,length,padStr){return _s.pad(str,length,padStr,"both")},sprintf:sprintf,vsprintf:function(fmt,argv){argv.unshift(fmt);return sprintf.apply(null,argv)},toNumber:function(str,decimals){if(!str)return 0;str=_s.trim(str);if(!str.match(/^-?\d+(?:\.\d+)?$/))return NaN;return parseNumber(parseNumber(str).toFixed(~~decimals))},numberFormat:function(number,dec,dsep,tsep){if(isNaN(number)||number==null)return"";number=number.toFixed(~~dec);tsep=typeof tsep=="string"?tsep:",";var parts=number.split("."),fnums=parts[0],decimals=parts[1]?(dsep||".")+parts[1]:"";return fnums.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+tsep)+decimals},strRight:function(str,sep){if(str==null)return"";str=String(str);sep=sep!=null?String(sep):sep;var pos=!sep?-1:str.indexOf(sep);return~pos?str.slice(pos+sep.length,str.length):str},strRightBack:function(str,sep){if(str==null)return"";str=String(str);sep=sep!=null?String(sep):sep;var pos=!sep?-1:str.lastIndexOf(sep);return~pos?str.slice(pos+sep.length,str.length):str},strLeft:function(str,sep){if(str==null)return"";str=String(str);sep=sep!=null?String(sep):sep;var pos=!sep?-1:str.indexOf(sep);return~pos?str.slice(0,pos):str},strLeftBack:function(str,sep){if(str==null)return"";str+="";sep=sep!=null?""+sep:sep;var pos=str.lastIndexOf(sep);return~pos?str.slice(0,pos):str},toSentence:function(array,separator,lastSeparator,serial){separator=separator||", ";lastSeparator=lastSeparator||" and ";var a=array.slice(),lastMember=a.pop();if(array.length>2&&serial)lastSeparator=_s.rtrim(separator)+lastSeparator;return a.length?a.join(separator)+lastSeparator+lastMember:lastMember},toSentenceSerial:function(){var args=slice.call(arguments);args[3]=true;return _s.toSentence.apply(_s,args)},slugify:function(str){if(str==null)return"";var from="\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00",to="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",regex=new RegExp(defaultToWhiteSpace(from),"g");str=String(str).toLowerCase().replace(regex,function(c){var index=from.indexOf(c);return to.charAt(index)||"-"});return _s.dasherize(str.replace(/[^\w\s-]/g,""))},surround:function(str,wrapper){return[wrapper,str,wrapper].join("")},quote:function(str,quoteChar){return _s.surround(str,quoteChar||'"')},unquote:function(str,quoteChar){quoteChar=quoteChar||'"';if(str[0]===quoteChar&&str[str.length-1]===quoteChar)return str.slice(1,str.length-1);else return str},exports:function(){var result={};for(var prop in this){if(!this.hasOwnProperty(prop)||prop.match(/^(?:include|contains|reverse)$/))continue;result[prop]=this[prop]}return result},repeat:function(str,qty,separator){if(str==null)return"";qty=~~qty;if(separator==null)return strRepeat(String(str),qty);for(var repeat=[];qty>0;repeat[--qty]=str){}return repeat.join(separator)},naturalCmp:function(str1,str2){if(str1==str2)return 0;if(!str1)return-1;if(!str2)return 1;var cmpRegex=/(\.\d+)|(\d+)|(\D+)/g,tokens1=String(str1).toLowerCase().match(cmpRegex),tokens2=String(str2).toLowerCase().match(cmpRegex),count=Math.min(tokens1.length,tokens2.length);for(var i=0;i<count;i++){var a=tokens1[i],b=tokens2[i];if(a!==b){var num1=parseInt(a,10);if(!isNaN(num1)){var num2=parseInt(b,10);if(!isNaN(num2)&&num1-num2)return num1-num2}return a<b?-1:1}}if(tokens1.length===tokens2.length)return tokens1.length-tokens2.length;return str1<str2?-1:1},levenshtein:function(str1,str2){if(str1==null&&str2==null)return 0;if(str1==null)return String(str2).length;if(str2==null)return String(str1).length;str1=String(str1);str2=String(str2);var current=[],prev,value;for(var i=0;i<=str2.length;i++)for(var j=0;j<=str1.length;j++){if(i&&j)if(str1.charAt(j-1)===str2.charAt(i-1))value=prev;else value=Math.min(current[j],current[j-1],prev)+1;else value=i+j;prev=current[j];current[j]=value}return current.pop()},toBoolean:function(str,trueValues,falseValues){if(typeof str==="number")str=""+str;if(typeof str!=="string")return!!str;str=_s.trim(str);if(boolMatch(str,trueValues||["true","1"]))return true;if(boolMatch(str,falseValues||["false","0"]))return false}};_s.strip=_s.trim;_s.lstrip=_s.ltrim;_s.rstrip=_s.rtrim;_s.center=_s.lrpad;_s.rjust=_s.lpad;_s.ljust=_s.rpad;_s.contains=_s.include;_s.q=_s.quote;_s.toBool=_s.toBoolean;if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)module.exports=_s;exports._s=_s}if(typeof define==="function"&&define.amd)define("underscore.string",[],function(){return _s});root._=root._||{};root._.string=root._.str=_s}(this,String)},{}],112:[function(require,module,exports){(function(){var root=this;var previousUnderscore=root._;var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.7.0";var createCallback=function(func,context,argCount){if(context===void 0)return func;switch(argCount==null?3:argCount){case 1:return function(value){return func.call(context,value)};case 2:return function(value,other){return func.call(context,value,other)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}};_.iteratee=function(value,context,argCount){if(value==null)return _.identity;if(_.isFunction(value))return createCallback(value,context,argCount);if(_.isObject(value))return _.matches(value);return _.property(value)};_.each=_.forEach=function(obj,iteratee,context){if(obj==null)return obj;iteratee=createCallback(iteratee,context);var i,length=obj.length;if(length===+length){for(i=0;i<length;i++){iteratee(obj[i],i,obj)}}else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++){iteratee(obj[keys[i]],keys[i],obj)}}return obj};_.map=_.collect=function(obj,iteratee,context){if(obj==null)return[];iteratee=_.iteratee(iteratee,context);var keys=obj.length!==+obj.length&&_.keys(obj),length=(keys||obj).length,results=Array(length),currentKey;for(var index=0;index<length;index++){currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iteratee,memo,context){if(obj==null)obj=[];iteratee=createCallback(iteratee,context,4);var keys=obj.length!==+obj.length&&_.keys(obj),length=(keys||obj).length,index=0,currentKey;if(arguments.length<3){if(!length)throw new TypeError(reduceError);memo=obj[keys?keys[index++]:index++]}for(;index<length;index++){currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo};_.reduceRight=_.foldr=function(obj,iteratee,memo,context){if(obj==null)obj=[];iteratee=createCallback(iteratee,context,4);var keys=obj.length!==+obj.length&&_.keys(obj),index=(keys||obj).length,currentKey;if(arguments.length<3){if(!index)throw new TypeError(reduceError);memo=obj[keys?keys[--index]:--index]}while(index--){currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo};_.find=_.detect=function(obj,predicate,context){var result;predicate=_.iteratee(predicate,context);_.some(obj,function(value,index,list){if(predicate(value,index,list)){result=value;return true}});return result};_.filter=_.select=function(obj,predicate,context){var results=[];if(obj==null)return results;predicate=_.iteratee(predicate,context);_.each(obj,function(value,index,list){if(predicate(value,index,list))results.push(value)});return results};_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(_.iteratee(predicate)),context)};_.every=_.all=function(obj,predicate,context){if(obj==null)return true;predicate=_.iteratee(predicate,context);var keys=obj.length!==+obj.length&&_.keys(obj),length=(keys||obj).length,index,currentKey;for(index=0;index<length;index++){currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return false}return true};_.some=_.any=function(obj,predicate,context){if(obj==null)return false;predicate=_.iteratee(predicate,context);var keys=obj.length!==+obj.length&&_.keys(obj),length=(keys||obj).length,index,currentKey;for(index=0;index<length;index++){currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return true}return false};_.contains=_.include=function(obj,target){if(obj==null)return false;if(obj.length!==+obj.length)obj=_.values(obj);return _.indexOf(obj,target)>=0};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,_.property(key))};_.where=function(obj,attrs){return _.filter(obj,_.matches(attrs))};_.findWhere=function(obj,attrs){return _.find(obj,_.matches(attrs))};_.max=function(obj,iteratee,context){var result=-Infinity,lastComputed=-Infinity,value,computed;if(iteratee==null&&obj!=null){obj=obj.length===+obj.length?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value>result){result=value}}}else{iteratee=_.iteratee(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed>lastComputed||computed===-Infinity&&result===-Infinity){result=value;lastComputed=computed}})}return result};_.min=function(obj,iteratee,context){var result=Infinity,lastComputed=Infinity,value,computed;
if(iteratee==null&&obj!=null){obj=obj.length===+obj.length?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value<result){result=value}}}else{iteratee=_.iteratee(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed<lastComputed||computed===Infinity&&result===Infinity){result=value;lastComputed=computed}})}return result};_.shuffle=function(obj){var set=obj&&obj.length===+obj.length?obj:_.values(obj);var length=set.length;var shuffled=Array(length);for(var index=0,rand;index<length;index++){rand=_.random(0,index);if(rand!==index)shuffled[index]=shuffled[rand];shuffled[rand]=set[index]}return shuffled};_.sample=function(obj,n,guard){if(n==null||guard){if(obj.length!==+obj.length)obj=_.values(obj);return obj[_.random(obj.length-1)]}return _.shuffle(obj).slice(0,Math.max(0,n))};_.sortBy=function(obj,iteratee,context){iteratee=_.iteratee(iteratee,context);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iteratee,context){var result={};iteratee=_.iteratee(iteratee,context);_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)});return result}};_.groupBy=group(function(result,value,key){if(_.has(result,key))result[key].push(value);else result[key]=[value]});_.indexBy=group(function(result,value,key){result[key]=value});_.countBy=group(function(result,value,key){if(_.has(result,key))result[key]++;else result[key]=1});_.sortedIndex=function(array,obj,iteratee,context){iteratee=_.iteratee(iteratee,context,1);var value=iteratee(obj);var low=0,high=array.length;while(low<high){var mid=low+high>>>1;if(iteratee(array[mid])<value)low=mid+1;else high=mid}return low};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(obj.length===+obj.length)return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return obj.length===+obj.length?obj.length:_.keys(obj).length};_.partition=function(obj,predicate,context){predicate=_.iteratee(predicate,context);var pass=[],fail=[];_.each(obj,function(value,key,obj){(predicate(value,key,obj)?pass:fail).push(value)});return[pass,fail]};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[0];if(n<0)return[];return slice.call(array,0,n)};_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(n==null||guard?1:n)))};_.last=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[array.length-1];return slice.call(array,Math.max(array.length-n,0))};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,strict,output){if(shallow&&_.every(input,_.isArray)){return concat.apply(output,input)}for(var i=0,length=input.length;i<length;i++){var value=input[i];if(!_.isArray(value)&&!_.isArguments(value)){if(!strict)output.push(value)}else if(shallow){push.apply(output,value)}else{flatten(value,shallow,strict,output)}}return output};_.flatten=function(array,shallow){return flatten(array,shallow,false,[])};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.uniq=_.unique=function(array,isSorted,iteratee,context){if(array==null)return[];if(!_.isBoolean(isSorted)){context=iteratee;iteratee=isSorted;isSorted=false}if(iteratee!=null)iteratee=_.iteratee(iteratee,context);var result=[];var seen=[];for(var i=0,length=array.length;i<length;i++){var value=array[i];if(isSorted){if(!i||seen!==value)result.push(value);seen=value}else if(iteratee){var computed=iteratee(value,i,array);if(_.indexOf(seen,computed)<0){seen.push(computed);result.push(value)}}else if(_.indexOf(result,value)<0){result.push(value)}}return result};_.union=function(){return _.uniq(flatten(arguments,true,true,[]))};_.intersection=function(array){if(array==null)return[];var result=[];var argsLength=arguments.length;for(var i=0,length=array.length;i<length;i++){var item=array[i];if(_.contains(result,item))continue;for(var j=1;j<argsLength;j++){if(!_.contains(arguments[j],item))break}if(j===argsLength)result.push(item)}return result};_.difference=function(array){var rest=flatten(slice.call(arguments,1),true,true,[]);return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(array){if(array==null)return[];var length=_.max(arguments,"length").length;var results=Array(length);for(var i=0;i<length;i++){results[i]=_.pluck(arguments,i)}return results};_.object=function(list,values){if(list==null)return{};var result={};for(var i=0,length=list.length;i<length;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i=0,length=array.length;if(isSorted){if(typeof isSorted=="number"){i=isSorted<0?Math.max(0,length+isSorted):isSorted}else{i=_.sortedIndex(array,item);return array[i]===item?i:-1}}for(;i<length;i++)if(array[i]===item)return i;return-1};_.lastIndexOf=function(array,item,from){if(array==null)return-1;var idx=array.length;if(typeof from=="number"){idx=from<0?idx+from+1:Math.min(idx,from+1)}while(--idx>=0)if(array[idx]===item)return idx;return-1};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0}step=step||1;var length=Math.max(Math.ceil((stop-start)/step),0);var range=Array(length);for(var idx=0;idx<length;idx++,start+=step){range[idx]=start}return range};var Ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError("Bind must be called on a function");args=slice.call(arguments,2);bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));Ctor.prototype=func.prototype;var self=new Ctor;Ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));if(_.isObject(result))return result;return self};return bound};_.partial=function(func){var boundArgs=slice.call(arguments,1);return function(){var position=0;var args=boundArgs.slice();for(var i=0,length=args.length;i<length;i++){if(args[i]===_)args[i]=arguments[position++]}while(position<arguments.length)args.push(arguments[position++]);return func.apply(this,args)}};_.bindAll=function(obj){var i,length=arguments.length,key;if(length<=1)throw new Error("bindAll must be passed function names");for(i=1;i<length;i++){key=arguments[i];obj[key]=_.bind(obj[key],obj)}return obj};_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache;var address=hasher?hasher.apply(this,arguments):key;if(!_.has(cache,address))cache[address]=func.apply(this,arguments);return cache[address]};memoize.cache={};return memoize};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))};_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;if(!options)options={};var later=function(){previous=options.leading===false?0:_.now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null};return function(){var now=_.now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args);if(!timeout)context=args=null}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=_.now()-timestamp;if(last<wait&&last>0){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null}}};return function(){context=this;args=arguments;timestamp=_.now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null}return result}};_.wrap=function(func,wrapper){return _.partial(wrapper,func)};_.negate=function(predicate){return function(){return!predicate.apply(this,arguments)}};_.compose=function(){var args=arguments;var start=args.length-1;return function(){var i=start;var result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result}};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments)}}};_.before=function(times,func){var memo;return function(){if(--times>0){memo=func.apply(this,arguments)}else{func=null}return memo}};_.once=_.partial(_.before,2);_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);return keys};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=Array(length);for(var i=0;i<length;i++){values[i]=obj[keys[i]]}return values};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=Array(length);for(var i=0;i<length;i++){pairs[i]=[keys[i],obj[keys[i]]]}return pairs};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i]}return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=function(obj){if(!_.isObject(obj))return obj;var source,prop;for(var i=1,length=arguments.length;i<length;i++){source=arguments[i];for(prop in source){if(hasOwnProperty.call(source,prop)){obj[prop]=source[prop]}}}return obj};_.pick=function(obj,iteratee,context){var result={},key;if(obj==null)return result;if(_.isFunction(iteratee)){iteratee=createCallback(iteratee,context);for(key in obj){var value=obj[key];if(iteratee(value,key,obj))result[key]=value}}else{var keys=concat.apply([],slice.call(arguments,1));obj=new Object(obj);for(var i=0,length=keys.length;i<length;i++){key=keys[i];if(key in obj)result[key]=obj[key]}}return result};_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee)){iteratee=_.negate(iteratee)}else{var keys=_.map(concat.apply([],slice.call(arguments,1)),String);iteratee=function(value,key){return!_.contains(keys,key)}}return _.pick(obj,iteratee,context)};_.defaults=function(obj){if(!_.isObject(obj))return obj;for(var i=1,length=arguments.length;i<length;i++){var source=arguments[i];for(var prop in source){if(obj[prop]===void 0)obj[prop]=source[prop]}}return obj};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!==toString.call(b))return false;switch(className){case"[object RegExp]":case"[object String]":return""+a===""+b;case"[object Number]":if(+a!==+a)return+b!==+b;return+a===0?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}if(typeof a!="object"||typeof b!="object")return false;var length=aStack.length;while(length--){if(aStack[length]===a)return bStack[length]===b}var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&"constructor"in a&&"constructor"in b&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)){return false}aStack.push(a);bStack.push(b);var size,result;if(className==="[object Array]"){size=a.length;result=size===b.length;if(result){while(size--){if(!(result=eq(a[size],b[size],aStack,bStack)))break}}}else{var keys=_.keys(a),key;size=keys.length;result=_.keys(b).length===size;if(result){while(size--){key=keys[size];if(!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break}}}aStack.pop();bStack.pop();return result};_.isEqual=function(a,b){return eq(a,b,[],[])};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj)||_.isArguments(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==="[object Array]"};_.isObject=function(obj){var type=typeof obj;return type==="function"||type==="object"&&!!obj};_.each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)==="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return _.has(obj,"callee")}}if(typeof/./!=="function"){_.isFunction=function(obj){return typeof obj=="function"||false}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)==="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return obj!=null&&hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.constant=function(value){return function(){return value}};_.noop=function(){};_.property=function(key){return function(obj){return obj[key]}};_.matches=function(attrs){var pairs=_.pairs(attrs),length=pairs.length;return function(obj){if(obj==null)return!length;obj=new Object(obj);for(var i=0;i<length;i++){var pair=pairs[i],key=pair[0];if(pair[1]!==obj[key]||!(key in obj))return false}return true}};_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=createCallback(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};_.now=Date.now||function(){return(new Date).getTime()};var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var unescapeMap=_.invert(escapeMap);var createEscaper=function(map){var escaper=function(match){return map[match]};var source="(?:"+_.keys(map).join("|")+")";var testRegexp=RegExp(source);var replaceRegexp=RegExp(source,"g");return function(string){string=string==null?"":""+string;return testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}};_.escape=createEscaper(escapeMap);_.unescape=createEscaper(unescapeMap);_.result=function(object,property){if(object==null)return void 0;var value=object[property];return _.isFunction(value)?object[property]():value};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\u2028|\u2029/g;var escapeChar=function(match){return"\\"+escapes[match]};_.template=function(text,settings,oldSettings){if(!settings&&oldSettings)settings=oldSettings;settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,escapeChar);index=offset+match.length;if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}else if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}else if(evaluate){source+="';\n"+evaluate+"\n__p+='"}return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{var render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}var template=function(data){return render.call(this,data,_)};var argument=settings.variable||"obj";template.source="function("+argument+"){\n"+source+"}";return template};_.chain=function(obj){var instance=_(obj);instance._chain=true;return instance};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result.call(this,func.apply(_,args))}})};_.mixin(_);_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name==="shift"||name==="splice")&&obj.length===0)delete obj[0];return result.call(this,obj)}});_.each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}});_.prototype.value=function(){return this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return _})}}).call(this)},{}],cucumber:[function(require,module,exports){window.CucumberHTML=require("cucumber-html");module.exports=require("./lib/cucumber")},{"./lib/cucumber":1,"cucumber-html":107}]},{},[])("cucumber")});